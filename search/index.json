[{"content":"æ•°æ®åº“ æŸ¥è¯¢ä¸»é”®ç´¢å¼•çš„ B+ æ ‘çš„æˆæœ¬ä¼šæ¯”æŸ¥è¯¢äºŒçº§ç´¢å¼•çš„ B+ çš„æˆæœ¬ä½ æŸ¥è¯¢ä¸»é”®ç´¢å¼•ï¼šB+æ ‘ä¸­å¯¹åº”ç€ä¸»é”®ç´¢å¼•å’Œå¯¹åº”çš„æ•°æ®è¡Œï¼Œç›´æ¥å¯ä»¥é€šè¿‡ä¸»é”®ç´¢å¼•æ¥è·å–å¯¹åº”çš„æ•°æ®è¡Œ æŸ¥è¯¢äºŒçº§ç´¢å¼•ï¼šB+æ ‘ä¸­å¯¹åº”ç€äºŒçº§ç´¢å¼•å’Œå¯¹åº”çš„ä¸»é”®ç´¢å¼•ï¼Œè¦å…ˆé€šè¿‡äºŒçº§ç´¢å¼•æ‰¾åˆ°ä¸»é”®ç´¢å¼•ï¼Œç„¶åå†é€šè¿‡ä¸»é”®ç´¢å¼•æ‰¾åˆ°å¯¹åº” çš„æ•°æ®è¡Œï¼Œåšäº†ä¸¤æ¬¡æŸ¥æ‰¾ã€‚\nå½“æŸ¥è¯¢è¯­å¥çš„æŸ¥è¯¢æ¡ä»¶ä¸­æ²¡æœ‰ç”¨åˆ°ç´¢å¼•æ—¶ï¼Œé‚£ä¹ˆå°†ä¼šè¿›è¡Œå…¨è¡¨æ‰«æã€‚\n","date":"2023-05-30T00:00:00Z","permalink":"https://jhrsya.github.io/p/database/","title":"æ•°æ®åº“"},{"content":"vue æ¡†æ¶ src/views è§†å›¾ç»„ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“å‡ºçš„é¡µé¢\nsrc/components viewsä¸­çš„ç»„ä»¶ä»£ç ï¼Œåœ¨è¿™é‡Œå†™\nsrc/router urlè·¯ç”±çš„è·¯å¾„\n","date":"2023-05-27T00:00:00Z","permalink":"https://jhrsya.github.io/p/vue%E7%88%AC%E8%99%AB%E6%A1%86%E6%9E%B6/","title":"vue"},{"content":"langchainè¸©å‘ prompt templateä¸­çš„{}æ˜¯æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œè¦ä½¿ç”¨éœ€ç”¨{{}} æ§åˆ¶LLMçš„è¾“å‡ºä¸ºjson_stringæ ¼å¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  from langchain.schema import BaseOutputParser class JsonOutputParser(BaseOutputParser): def parse(self, output: str) -\u0026gt; Any: return json.loads(output) llm = OpenAI(temperature=0.1) prompt = PromptTemplate( input_variables=[\u0026#34;text\u0026#34;], template=template, output_parser=JsonOutputParser(), ) from langchain.chains import LLMChain chain = LLMChain(llm=llm, prompt=prompt) answer = chain.run(text) # æ­¤æ—¶LLMè¾“å‡ºæ˜¯json stringæ ¼å¼ json_answer = json.loads(answer) # æŠŠjson string è½¬æ¢ä¸ºjson   ç”¨äºè½¬åŒ–çš„promptç¼–å†™æœ€å¥½å†™æˆå¦‚ä¸‹æ ¼å¼ï¼š{{\\\u0026quot;type\\\u0026quot;: \\\u0026quot;alert|survey\\\u0026quot;, \\\u0026quot;content\\\u0026quot;: {{\\\u0026quot;abstract\\\u0026quot;: \\\u0026quot;\\\u0026quot;, \\\u0026quot;reason\\\u0026quot;: \\\u0026quot;\\\u0026quot;, \\\u0026quot;solution\\\u0026quot;: \\\u0026quot;\\\u0026quot;(always empty)}}}}\n {}å·éœ€è¦ç”¨{}æ‹¬èµ·æ¥ï¼Œå³{{}} åŒå¼•å·è¦åŠ è½¬ä¹‰å­—ç¬¦  ","date":"2023-05-25T00:00:00Z","permalink":"https://jhrsya.github.io/p/langchain_dump/","title":"langchainè¸©å‘"},{"content":"prompt engineering promptæ„å»ºåŸåˆ™ å†™æ¸…æ™°åˆå‡†ç¡®çš„æŒ‡ä»¤ ä½¿ç”¨åˆ†éš”ç¬¦  Triple quotes: \u0026quot;\u0026quot;\u0026quot; Triple backticks: ``` Triple dashes: \u0026mdash; Angle brackets: \u0026lt;\u0026gt; XML tags: \u0026lt;tag\u0026gt; \u0026lt;/tag\u0026gt;  è¦æ±‚ç”¨ç»“æ„åŒ–è¾“å‡º è¦æ±‚æ¨¡å‹æ£€æŸ¥æ˜¯å¦æ»¡è¶³æ¡ä»¶ æä¾›å°‘é‡æˆåŠŸæ‰§è¡Œä»»åŠ¡çš„ç¤ºä¾‹ ","date":"2023-05-25T00:00:00Z","permalink":"https://jhrsya.github.io/p/prompt/","title":"å´æ©è¾¾promptæ•™ç¨‹"},{"content":"scrapyçˆ¬è™« scrapy æ“ä½œ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  å®‰è£…Scrapyï¼š ä½¿ç”¨pipå‘½ä»¤å®‰è£…Scrapyï¼špip install Scrapy åˆ›å»ºScrapyé¡¹ç›®ï¼š åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„Scrapyé¡¹ç›®ï¼šscrapy startproject project_name è¿™å°†åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºproject_nameçš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«Scrapyé¡¹ç›®çš„åŸºæœ¬ç»“æ„å’Œæ–‡ä»¶ã€‚ å®šä¹‰çˆ¬è™«ï¼š åœ¨Scrapyé¡¹ç›®ä¸­ï¼Œæ‚¨éœ€è¦å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¬è™«ã€‚è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„çˆ¬è™«ï¼šscrapy genspider spider_name domain è¿™å°†åœ¨spidersæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºspider_nameçš„çˆ¬è™«æ–‡ä»¶ï¼Œå¹¶æŒ‡å®šè¦çˆ¬å–çš„åŸŸåã€‚ ç¼–å†™çˆ¬è™«ä»£ç ï¼š æ‰“å¼€ç”Ÿæˆçš„çˆ¬è™«æ–‡ä»¶ï¼ˆä½äºspidersæ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œä½¿ç”¨Pythonç¼–å†™çˆ¬è™«é€»è¾‘ã€‚æ‚¨éœ€è¦å®šä¹‰è¦æå–çš„æ•°æ®ã€è¦çˆ¬å–çš„URLã€å¦‚ä½•å¤„ç†å“åº”ç­‰ã€‚ è¿è¡Œçˆ¬è™«ï¼š ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œçˆ¬è™«ï¼šscrapy crawl spider_name è¿™å°†å¯åŠ¨çˆ¬è™«å¹¶å¼€å§‹æŠ“å–æ•°æ®ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ä¸åŒçš„å‚æ•°æ¥é…ç½®çˆ¬è™«è¡Œä¸ºã€‚ å¤„ç†æå–çš„æ•°æ®ï¼š Scrapyæä¾›äº†æ•°æ®å¤„ç†ç®¡é“ï¼ˆpipelineï¼‰çš„æœºåˆ¶ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å®šä¹‰å¯¹æå–çš„æ•°æ®è¿›è¡Œå¤„ç†å’Œå­˜å‚¨çš„æ“ä½œã€‚åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„pipelines.pyæ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ°å’Œé…ç½®æ•°æ®ç®¡é“ã€‚   åšå®Œscrapy genspider spider_name domainæ“ä½œåéœ€è¦æŠŠsettings.pyæ–‡ä»¶ä¸­çš„\n1 2 3  ITEM_PIPELINES = { \u0026#34;paper_crawl.pipelines.PaperCrawlPipeline\u0026#34;: 300, }   çš„æ³¨é‡Šå»æ‰\n","date":"2023-05-19T00:00:00Z","permalink":"https://jhrsya.github.io/p/scrapy%E7%88%AC%E8%99%AB%E6%A1%86%E6%9E%B6/","title":"scrapyçˆ¬è™«æ¡†æ¶"},{"content":"langchainå®æˆ˜ æ‰“å°ç›®å½•ä¸­æ¯ä¸ªæ–‡ä»¶å¤¹å’Œæ–‡ä»¶çš„å¤§å° toolså·¥å…·ç±»çš„è¾“å…¥æ˜¯é€šè¿‡æ§åˆ¶SearchInputæ¥å®ç°çš„\n1 2 3 4 5 6  import os import json with open(\u0026#34;api_key.json\u0026#34;, \u0026#34;r\u0026#34;) as f: api_key = json.load(f) os.environ[\u0026#34;OPENAI_API_KEY\u0026#34;] = api_key[\u0026#34;OPANAI_API_KEY\u0026#34;] os.environ[\u0026#34;SERPAPI_API_KEY\u0026#34;] = api_key[\u0026#34;SERPAPI_API_KEY\u0026#34;]   å®šä¹‰toolå·¥å…·\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  from langchain.tools.base import tool, BaseModel, Field def get_size(path): total_size = 0 if os.path.isfile(path): total_size += os.path.getsize(path) elif os.path.isdir(path): for dirpath, dirnames, filenames in os.walk(path): for filename in filenames: file_path = os.path.join(dirpath, filename) total_size += os.path.getsize(file_path) return total_size class SearchInput(BaseModel): folder_path: str = Field(description=\u0026#34;should be a path to a folder\u0026#34;) @tool(\u0026#34;folder_size\u0026#34;, return_direct=True, args_schema=SearchInput) def get_file_sizes(folder_path: str): \u0026#34;\u0026#34;\u0026#34;To calculate the sizes of folders within a directory, you can use this tool. The input for this tool must be either a folder path.\u0026#34;\u0026#34;\u0026#34; items_sizes = \u0026#34;\u0026#34; for item in os.listdir(folder_path): item_path = os.path.join(folder_path, item) size = get_size(item_path) items_sizes += f\u0026#34;åç§°: {item}\\tå¤§å°: {size}å­—èŠ‚\\n\u0026#34; return items_sizes get_file_sizes   StructuredTool(name='folder_size', description='folder_size(folder_path: str) - To calculate the sizes of folders within a directory, you can use this tool. The input for this tool must be either \u0026quot;.\u0026quot; or \u0026quot;../\u0026quot;.', args_schema=\u0026lt;class '__main__.SearchInput'\u0026gt;, return_direct=True, verbose=False, callbacks=None, callback_manager=None, func=\u0026lt;function get_file_sizes at 0x000001A26448D700\u0026gt;, coroutine=None)  å¦‚ä½•æŠŠæ–‡æœ¬è¾“å…¥è½¬åŒ–ä¸ºè·¯å¾„å\n1 2 3 4 5  from langchain.agents import AgentType, initialize_agent from langchain.chat_models import ChatOpenAI llm = ChatOpenAI(temperature=0) agent = initialize_agent([get_file_sizes], llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True) agent.run(\u0026#34;The size of the directory: C:\\\\xili\\\\ApiService.\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mI need to use the folder_size tool to calculate the size of the directory. Action: folder_size Action Input: \u0026quot;C:\\xili\\ApiService\u0026quot;\u001b[0m Observation: \u001b[36;1m\u001b[1;3mæ–‡ä»¶å: .gitignore\tå¤§å°: 1987å­—èŠ‚ æ–‡ä»¶å: deploy.sh\tå¤§å°: 100å­—èŠ‚ æ–‡ä»¶å: docker-compose.yaml\tå¤§å°: 1242å­—èŠ‚ æ–‡ä»¶å: Dockerfile\tå¤§å°: 360å­—èŠ‚ æ–‡ä»¶å: LICENSE\tå¤§å°: 11357å­—èŠ‚ æ–‡ä»¶å: main.py\tå¤§å°: 295å­—èŠ‚ æ–‡ä»¶å: README.md\tå¤§å°: 5324å­—èŠ‚ æ–‡ä»¶å: requirements.txt\tå¤§å°: 1131å­—èŠ‚ æ–‡ä»¶å: scheduler.py\tå¤§å°: 284å­—èŠ‚ \u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m 'æ–‡ä»¶å: .gitignore\\tå¤§å°: 1987å­—èŠ‚\\næ–‡ä»¶å: deploy.sh\\tå¤§å°: 100å­—èŠ‚\\næ–‡ä»¶å: docker-compose.yaml\\tå¤§å°: 1242å­—èŠ‚\\næ–‡ä»¶å: Dockerfile\\tå¤§å°: 360å­—èŠ‚\\næ–‡ä»¶å: LICENSE\\tå¤§å°: 11357å­—èŠ‚\\næ–‡ä»¶å: main.py\\tå¤§å°: 295å­—èŠ‚\\næ–‡ä»¶å: README.md\\tå¤§å°: 5324å­—èŠ‚\\næ–‡ä»¶å: requirements.txt\\tå¤§å°: 1131å­—èŠ‚\\næ–‡ä»¶å: scheduler.py\\tå¤§å°: 284å­—èŠ‚\\n'  1  agent.run(\u0026#34;The size of the parent directory.\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mI need to use the folder_size tool to calculate the size of the parent directory. Action: folder_size Action Input: \u0026quot;../\u0026quot;\u001b[0m Observation: \u001b[36;1m\u001b[1;3mæ–‡ä»¶å: chatgpt.py\tå¤§å°: 635å­—èŠ‚ æ–‡ä»¶å: docker-compose.yml\tå¤§å°: 949å­—èŠ‚ æ–‡ä»¶å: hello.py\tå¤§å°: 168å­—èŠ‚ æ–‡ä»¶å: requirements.txt\tå¤§å°: 9861å­—èŠ‚ æ–‡ä»¶å: test_eth.py\tå¤§å°: 613å­—èŠ‚ æ–‡ä»¶å: test_fastapi.py\tå¤§å°: 2467å­—èŠ‚ æ–‡ä»¶å: test_js.html\tå¤§å°: 708å­—èŠ‚ æ–‡ä»¶å: test_middle.py\tå¤§å°: 1261å­—èŠ‚ æ–‡ä»¶å: test_peewee.py\tå¤§å°: 854å­—èŠ‚ æ–‡ä»¶å: test_postgresql.py\tå¤§å°: 3160å­—èŠ‚ æ–‡ä»¶å: test_python.py\tå¤§å°: 141å­—èŠ‚ æ–‡ä»¶å: test_vue.html\tå¤§å°: 1306å­—èŠ‚ æ–‡ä»¶å: zero.cpp\tå¤§å°: 1000å­—èŠ‚ æ–‡ä»¶å: zero.exe\tå¤§å°: 71269å­—èŠ‚ \u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m 'æ–‡ä»¶å: chatgpt.py\\tå¤§å°: 635å­—èŠ‚\\næ–‡ä»¶å: docker-compose.yml\\tå¤§å°: 949å­—èŠ‚\\næ–‡ä»¶å: hello.py\\tå¤§å°: 168å­—èŠ‚\\næ–‡ä»¶å: requirements.txt\\tå¤§å°: 9861å­—èŠ‚\\næ–‡ä»¶å: test_eth.py\\tå¤§å°: 613å­—èŠ‚\\næ–‡ä»¶å: test_fastapi.py\\tå¤§å°: 2467å­—èŠ‚\\næ–‡ä»¶å: test_js.html\\tå¤§å°: 708å­—èŠ‚\\næ–‡ä»¶å: test_middle.py\\tå¤§å°: 1261å­—èŠ‚\\næ–‡ä»¶å: test_peewee.py\\tå¤§å°: 854å­—èŠ‚\\næ–‡ä»¶å: test_postgresql.py\\tå¤§å°: 3160å­—èŠ‚\\næ–‡ä»¶å: test_python.py\\tå¤§å°: 141å­—èŠ‚\\næ–‡ä»¶å: test_vue.html\\tå¤§å°: 1306å­—èŠ‚\\næ–‡ä»¶å: zero.cpp\\tå¤§å°: 1000å­—èŠ‚\\næ–‡ä»¶å: zero.exe\\tå¤§å°: 71269å­—èŠ‚\\n'  ","date":"2023-05-16T00:00:00Z","permalink":"https://jhrsya.github.io/p/langchain%E5%AE%9E%E6%88%98/","title":"langchainå®æˆ˜"},{"content":"docker dockeræ¦‚å¿µ Containers å®¹å™¨ï¼ˆContainersï¼‰ï¼šå®¹å™¨æ˜¯åŸºäºé•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ã€‚å®ƒå¯ä»¥è¢«å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤å’Œç®¡ç†ã€‚å®¹å™¨æ˜¯ç‹¬ç«‹ä¸”éš”ç¦»çš„è¿è¡Œç¯å¢ƒï¼Œç±»ä¼¼äºä¸€ä¸ªè½»é‡çº§çš„è™šæ‹Ÿæœºã€‚å®¹å™¨åŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶å’Œé…ç½®ï¼ŒåŒ…æ‹¬åŸºç¡€é•œåƒå’Œé¢å¤–çš„å¯å†™å±‚ã€‚æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œæ‹¥æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œå’Œè¿›ç¨‹ç©ºé—´ã€‚\nå®¹å™¨ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œæ¯ä¸ªå®¹å™¨éƒ½æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿå’Œè¿›ç¨‹ç©ºé—´ï¼Œå®ƒä»¬å¯ä»¥å¹¶è¡Œè¿è¡Œï¼Œäº’ä¸å¹²æ‰°ã€‚\nImages é•œåƒï¼ˆImagesï¼‰ï¼šé•œåƒæ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿æˆ–è“å›¾ï¼Œå®ƒåŒ…å«äº†è¿è¡Œå®¹å™¨æ‰€éœ€çš„æ–‡ä»¶ç³»ç»Ÿã€åº”ç”¨ç¨‹åºä»£ç ã€ä¾èµ–åº“ã€ç¯å¢ƒå˜é‡ä»¥åŠé…ç½®ç­‰ã€‚å¯ä»¥å°†é•œåƒçœ‹ä½œæ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œç”¨äºåˆ›å»ºå’Œè¿è¡Œå®¹å™¨ã€‚é•œåƒç±»ä¼¼äºæ“ä½œç³»ç»Ÿçš„é•œåƒæ–‡ä»¶ï¼Œä½†å¹¶ä¸æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿæœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæˆ–æœåŠ¡çš„æ‰“åŒ…ã€‚\nå®¹å™¨ä¸ç­‰åŒäºæ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªåº”ç”¨ç¨‹åºçš„å®ä¾‹ã€‚é•œåƒæä¾›äº†å®¹å™¨è¿è¡Œæ‰€éœ€çš„ç¯å¢ƒå’Œæ–‡ä»¶ï¼Œç±»ä¼¼äºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ‰“åŒ…ï¼Œè€Œå®¹å™¨åˆ™æ˜¯é•œåƒçš„è¿è¡Œå®ä¾‹ã€‚\ndockerå®æ“ å®‰è£…docker\næ„å»ºåº”ç”¨ æ–‡ä»¶åï¼štest_fastapi.py\n1 2 3 4 5 6 7 8 9 10 11 12  import uvicorn from fastapi import FastAPI app = FastAPI() @app.get(\u0026#34;/\u0026#34;) async def read_root(): return {\u0026#34;Hello\u0026#34;: \u0026#34;World\u0026#34;} if __name__ == \u0026#39;__main__\u0026#39;: # æ³¨æ„hostå¿…é¡»æ˜¯0.0.0.0ï¼Œè®©æ‰€æœ‰ipéƒ½èƒ½è®¿é—® uvicorn.run(app=\u0026#39;test_fastapi:app\u0026#39;, host=\u0026#34;0.0.0.0\u0026#34;, port=8000)   requirements.txtå†…å®¹ï¼š\n1 2  fastapi uvicorn   Dockerfileæ–‡ä»¶ Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚ ä¹¦å†™Dockerfileæ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  # FROM python FROM python:3.9-slim-buster # æŠŠå½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°dockerçš„/appç›®å½•ä¸‹ COPY . /app # åˆ‡æ¢å·¥ä½œç›®å½•ä¸º/app WORKDIR /app # å®‰è£…æ„ä»¶appæ‰€éœ€è¦çš„package RUN pip install -r requirements.txt # æ‰§è¡Œå‘½ä»¤python test_fastapi.py CMD [ \u0026#34;python\u0026#34;, \u0026#34;test_fastapi.py\u0026#34; ]   ç›®å‰æ¥è¯´ç›®å½•ä¸­æœ‰æ–‡ä»¶ä¸ºï¼› test_fastapi.py, requirements.txt, Dockfile\næœ€ç®€å•çš„ä¸€ä¸ªåº”ç”¨æ­å»ºå¥½äº†ï¼Œç°åœ¨å¼€å§‹æ„å»ºimages(æ³¨æ„ï¼šå¿…é¡»è¿›å…¥åº”ç”¨çš„ç›®å½•):\n1  docker build -t test .  -t ç­‰ä»·äº\u0026ndash;tag\nè¿è¡Œcontainer:\n1  docker run -d -p 8000:8000 --name test test  -d è¡¨ç¤ºdetachedï¼Œå®¹å™¨åœ¨åå°è¿è¡Œï¼Œ-p è¡¨ç¤ºç«¯å£å·ï¼Œå‰ä¸€ä¸ªæ˜¯å®¿ä¸»ç«¯å£å·ï¼Œåä¸€ä¸ªæ˜¯å®¹å™¨ç«¯å£å·ï¼Œ\u0026ndash;nameè¡¨ç¤ºéœ€è¦æ„å»ºcontainerçš„åå­—ï¼Œæœ€åä¸€ä¸ªtestè¡¨ç¤ºimageçš„åå­—ã€‚\nvscodeåŸºäºdockerå¼€å‘ ä»¥pythonå¼€å‘ä¸ºä¾‹ï¼Œé¦–å…ˆå»ºç«‹åŒ…å«pythonçš„å¼€å‘ç¯å¢ƒçš„dockerã€‚\nPubkeyAuthentication yes #å¯ç”¨å…¬é’¥ç§é’¥é…å¯¹è®¤è¯æ–¹å¼ PermitRootLogin yes #å…è®¸rootç”¨æˆ·ä½¿ç”¨sshç™»å½• PasswordAuthentication yes\n","date":"2023-05-12T00:00:00Z","permalink":"https://jhrsya.github.io/p/docker/","title":"docker"},{"content":"langchain agentsç¯‡agents Agents Types Agentsä½¿ç”¨LLMå†³å®šåšä»€ä¹ˆactionä»¥åŠä»¥ä»€ä¹ˆé¡ºåºåšactionã€‚ä¸€ä¸ªactionè¦ä¹ˆæ˜¯ä½¿ç”¨ä¸€ä¸ªå·¥å…·è§‚å¯Ÿå®ƒçš„ç»“æœï¼Œè¦ä¹ˆæ˜¯ç»™ç”¨æˆ·è¿”å›ä¸€ä¸ªresponseã€‚ ä¸‹é¢æ˜¯åœ¨Langchainä¸­å¯ä»¥ä½¿ç”¨çš„Agentsç±»å‹ï¼š\n zero-shot-react-description  è¿™ä¸ªagentä½¿ç”¨ReAct æ¡†æ¶å†³å®šä½¿ç”¨å“ªä¸€ç§toolï¼Œä»…ä»…åŸºäºtool\u0026rsquo;s descriptionã€‚è¿™ä¸ªagentéœ€è¦ç»™æ¯ä¸€ä¸ªtoolå†™ä¸€ä¸ªdescription   react-docstore  è¿™ä¸ªagentä½¿ç”¨ReActæ¡†æ¶å»å’Œdocstore(æ–‡æ¡£åº“)äº¤äº’ã€‚å¿…é¡»æä¾›ä¸¤ä¸ªTool: Search å’Œ Lookup Toolã€‚Search tool æ˜¯ä»æ–‡æ¡£ä¸­æœç´¢ï¼ŒLookup toolæ˜¯ä»æœ€è¿‘æ‰¾åˆ°çš„æ–‡ä»¶ä¸­æŸ¥æ‰¾ä¸€ä¸ªæœ¯è¯­ã€‚paperé“¾æ¥   self-ask-with-search  è¿™ä¸ªagentåªæ˜¯ç”¨ä¸€ä¸ªtool: Intermediate Answerï¼Œè¿™ä¸ªtoolå¯ä»¥ç»™é—®é¢˜æŸ¥æ‰¾æ­£ç¡®çš„ç­”æ¡ˆã€‚paperé“¾æ¥   conversational-react-description  è¿™ä¸ªagentä¸“é—¨ç”¨äºå¯¹è¯ï¼Œpromptè¢«è®¾è®¡æˆè®©agentæ›´å®¹æ˜“å¯¹è¯ã€‚å®ƒä½¿ç”¨ReActæ¡†æ¶å»å†³å®šä½¿ç”¨å“ªä¸€ä¸ªtoolï¼Œä½¿ç”¨memoryå»è®°ä½ä¹‹å‰çš„å¯¹è¯äº¤äº’ã€‚    1 2 3 4 5 6  import os import json with open(\u0026#34;api_key.json\u0026#34;, \u0026#34;r\u0026#34;) as f: api_key = json.load(f) os.environ[\u0026#34;OPENAI_API_KEY\u0026#34;] = api_key[\u0026#34;OPANAI_API_KEY\u0026#34;] os.environ[\u0026#34;SERPAPI_API_KEY\u0026#34;] = api_key[\u0026#34;SERPAPI_API_KEY\u0026#34;]   Custom Agent è‡ªå®šä¹‰Agent\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55  from langchain.agents import Tool, AgentExecutor, BaseSingleActionAgent from langchain import OpenAI, SerpAPIWrapper search = SerpAPIWrapper() tools = [ Tool( name = \u0026#34;Search\u0026#34;, func=search.run, description=\u0026#34;useful for when you need to answer questions about current events\u0026#34;, return_direct=True ) ] from typing import List, Tuple, Any, Union from langchain.schema import AgentAction, AgentFinish class FakeAgent(BaseSingleActionAgent): \u0026#34;\u0026#34;\u0026#34;Fake Custom Agent.\u0026#34;\u0026#34;\u0026#34; @property def input_keys(self): return [\u0026#34;input\u0026#34;] def plan( self, intermediate_steps: List[Tuple[AgentAction, str]], **kwargs: Any ) -\u0026gt; Union[AgentAction, AgentFinish]: \u0026#34;\u0026#34;\u0026#34;Given input, decided what to do. Args: intermediate_steps: Steps the LLM has taken to date, along with observations **kwargs: User inputs. Returns: Action specifying what tool to use. \u0026#34;\u0026#34;\u0026#34; return AgentAction(tool=\u0026#34;Search\u0026#34;, tool_input=kwargs[\u0026#34;input\u0026#34;], log=\u0026#34;\u0026#34;) async def aplan( self, intermediate_steps: List[Tuple[AgentAction, str]], **kwargs: Any ) -\u0026gt; Union[AgentAction, AgentFinish]: \u0026#34;\u0026#34;\u0026#34;Given input, decided what to do. Args: intermediate_steps: Steps the LLM has taken to date, along with observations **kwargs: User inputs. Returns: Action specifying what tool to use. \u0026#34;\u0026#34;\u0026#34; return AgentAction(tool=\u0026#34;Search\u0026#34;, tool_input=kwargs[\u0026#34;input\u0026#34;], log=\u0026#34;\u0026#34;) agent = FakeAgent() agent_executor = AgentExecutor.from_agent_and_tools(agent=agent, tools=tools, verbose=True) agent_executor.run(\u0026#34;How many people live in china as of 2023?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3m\u001b[0m\u001b[36;1m\u001b[1;3m1,455,144,001\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m '1,455,144,001'  Custom LLM Agent è‡ªå®šä¹‰LLM agentï¼Œä¸€ä¸ªLLMç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š\n PromptTemplate: ç”¨äºæŒ‡å¯¼è¯­è¨€æ¨¡å‹åšä»€ä¹ˆ LLM stop sequence: ä¸€å®šè¿™ä¸ªstop sequenceå‡ºç°ï¼Œè¯­è¨€æ¨¡å‹åœæ­¢ç”Ÿæˆ OutputParser: è¿™ä¸ªå†³å®šäº†å¦‚ä½•è§£æLLMOutputä¸ºä¸€ä¸ªAgentActionæˆ–è€…AgentFinishå¯¹è±¡  LLMAgentè¢«ç”¨äºAgentExecutor. è¿™ä¸ªAgentExecutorå¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¾ªç¯ï¼š\n è§£æç”¨æˆ·çš„è¾“å…¥å’Œä¹‹å‰çš„æ­¥éª¤åç»™Agent(LLMAgent) å¦‚æœAgentè¿”å›AgentFinishï¼Œç›´æ¥è¿”å›ç»™ç”¨æˆ· å¦‚æœAgentè¿”å›AgentActionï¼Œä½¿ç”¨è¿™ä¸ªå»è°ƒç”¨ä¸€ä¸ªtoolï¼Œè·å¾—ä¸€ä¸ªObservationå¯¹è±¡ é‡å¤ï¼ŒæŠŠAgentActionå’ŒObservationä¼ ç»™Agentç›´åˆ°AgentFinishå‡ºç°ä¸ºæ­¢ã€‚  AgentActionæ˜¯ä¸€ä¸ªç”±actionå’Œaction_inputç»„æˆçš„responseã€‚actionæŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªtoolï¼Œaction_inputæŒ‡å®šè¿™ä¸ªtoolçš„è¾“å…¥ã€‚logå¯ä»¥æä¾›æ›´å¤šå†…å®¹(æ¯”å¦‚logging, tracing, etc)\nAgentFinishæ˜¯åŒ…å«äº†æœ€ç»ˆå‘é€ç»™ç”¨æˆ·çš„æ¶ˆæ¯ï¼Œç”¨äºç»ˆæ­¢agentçš„è¿è¡Œã€‚\n1 2 3 4 5 6 7 8  # Set up environment from langchain.agents import Tool, AgentExecutor, LLMSingleActionAgent, AgentOutputParser from langchain.prompts import StringPromptTemplate from langchain import OpenAI, SerpAPIWrapper, LLMChain from typing import List, Union from langchain.schema import AgentAction, AgentFinish import re   Set up tool 1 2 3 4 5 6 7 8 9  # Define which tools the agent can use to answer user queries search = SerpAPIWrapper() tools = [ Tool( name = \u0026#34;Search\u0026#34;, func=search.run, description=\u0026#34;useful for when you need to answer questions about current events\u0026#34; ) ]   Prompt Template å®ƒæŒ‡å®šäº†agentåšä»€ä¹ˆã€‚é€šå¸¸è¿™ä¸ªæ¨¡æ¿éœ€è¦åŒ…å«ï¼š\n tool: agentéœ€è¦ä½¿ç”¨çš„toolå’Œä»€ä¹ˆæ—¶å€™è°ƒç”¨å®ƒä»¬ intermediate_steps: æ˜¯ä¸€ä¸ª(AgentAction, Observation)å…ƒç»„ã€‚å®ƒä»¬é€šå¸¸ä¸ä¼šç›´æ¥ä¼ ç»™æ¨¡å‹ï¼Œprompt templateä¼šä»¥ä¸€ç§ç‰¹åˆ«çš„æ–¹å¼æ ¼å¼åŒ–å®ƒä»¬ input: é€šç”¨çš„ç”¨æˆ·è¾“å…¥  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  # Set up the base template template = \u0026#34;\u0026#34;\u0026#34;Answer the following questions as best you can, but speaking as a pirate might speak. You have access to the following tools: {tools}Use the following format: Question: the input question you must answer Thought: you should always think about what to do Action: the action to take, should be one of [{tool_names}] Action Input: the input to the action Observation: the result of the action ... (this Thought/Action/Action Input/Observation can repeat N times) Thought: I now know the final answer Final Answer: the final answer to the original input question Begin! Remember to speak as a pirate when giving your final answer. Use lots of \u0026#34;Arg\u0026#34;s Question: {input}{agent_scratchpad}\u0026#34;\u0026#34;\u0026#34;   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  # Set up a prompt template class CustomPromptTemplate(StringPromptTemplate): # The template to use template: str # The list of tools available tools: List[Tool] def format(self, **kwargs) -\u0026gt; str: # Get the intermediate steps (AgentAction, Observation tuples) # Format them in a particular way intermediate_steps = kwargs.pop(\u0026#34;intermediate_steps\u0026#34;) thoughts = \u0026#34;\u0026#34; for action, observation in intermediate_steps: thoughts += action.log thoughts += f\u0026#34;\\nObservation: {observation}\\nThought: \u0026#34; # Set the agent_scratchpad variable to that value kwargs[\u0026#34;agent_scratchpad\u0026#34;] = thoughts # Create a tools variable from the list of tools provided kwargs[\u0026#34;tools\u0026#34;] = \u0026#34;\\n\u0026#34;.join([f\u0026#34;{tool.name}: {tool.description}\u0026#34; for tool in self.tools]) # Create a list of tool names for the tools provided kwargs[\u0026#34;tool_names\u0026#34;] = \u0026#34;, \u0026#34;.join([tool.name for tool in self.tools]) return self.template.format(**kwargs) prompt = CustomPromptTemplate( template=template, tools=tools, # This omits the `agent_scratchpad`, `tools`, and `tool_names` variables because those are generated dynamically # This includes the `intermediate_steps` variable because that is needed input_variables=[\u0026#34;input\u0026#34;, \u0026#34;intermediate_steps\u0026#34;] )   Output Parser ç”¨äºæŠŠLLM outputè§£ææˆAgentActionå’ŒAgentFinishã€‚è¿™ä¸ªé€šå¸¸å–å†³äºpromptçš„ä½¿ç”¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  class CustomOutputParser(AgentOutputParser): def parse(self, llm_output: str) -\u0026gt; Union[AgentAction, AgentFinish]: # Check if agent should finish if \u0026#34;Final Answer:\u0026#34; in llm_output: return AgentFinish( # Return values is generally always a dictionary with a single `output` key # It is not recommended to try anything else at the moment :) return_values={\u0026#34;output\u0026#34;: llm_output.split(\u0026#34;Final Answer:\u0026#34;)[-1].strip()}, log=llm_output, ) # Parse out the action and action input regex = r\u0026#34;Action\\s*\\d*\\s*:(.*?)\\nAction\\s*\\d*\\s*Input\\s*\\d*\\s*:[\\s]*(.*)\u0026#34; match = re.search(regex, llm_output, re.DOTALL) if not match: raise ValueError(f\u0026#34;Could not parse LLM output: `{llm_output}`\u0026#34;) action = match.group(1).strip() action_input = match.group(2) # Return the action and action input return AgentAction(tool=action, tool_input=action_input.strip(\u0026#34; \u0026#34;).strip(\u0026#39;\u0026#34;\u0026#39;), log=llm_output) output_parser = CustomOutputParser()   Set up LLM 1  llm = OpenAI(temperature=0)   Define the stop sequence å‘Šè¯‰LLMä»€ä¹ˆæ—¶å€™åœæ­¢ç”Ÿæˆã€‚è¿™ä¸ªæ ‡å¿—å¾ˆå¤§çš„å–å†³äºpromptå’Œmodelã€‚\nSet up the Agent 1 2 3 4 5 6 7 8 9  # LLM chain consisting of the LLM and a prompt llm_chain = LLMChain(llm=llm, prompt=prompt) tool_names = [tool.name for tool in tools] agent = LLMSingleActionAgent( llm_chain=llm_chain, output_parser=output_parser, stop=[\u0026#34;\\nObservation:\u0026#34;], allowed_tools=tool_names )   Use the Agent 1 2  agent_executor = AgentExecutor.from_agent_and_tools(agent=agent, tools=tools, verbose=True) agent_executor.run(\u0026#34;How many people live in china as of 2023?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mThought: I need to find out the population of China in 2023 Action: Search Action Input: Population of China in 2023\u001b[0m Observation:\u001b[36;1m\u001b[1;3mThe current population of China is 1,455,144,001 as of Thursday, May 11, 2023, based on Worldometer elaboration of the latest United Nations data.\u001b[0m \u001b[32;1m\u001b[1;3m I now know the final answer Final Answer: Arg, there be 1,455,144,001 people livin' in China as of 2023!\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m \u0026quot;Arg, there be 1,455,144,001 people livin' in China as of 2023!\u0026quot;  Adding Memory ç»™agentæ·»åŠ è®°å¿†ï¼Œéœ€è¦åšä¸¤æ­¥ï¼š\n ç»™è‡ªå®šä¹‰çš„promotæ·»åŠ chat_history ç»™agent executoræ·»åŠ ä¸€ä¸ªmemoryå¯¹è±¡  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50  # Set up the base template template_with_history = \u0026#34;\u0026#34;\u0026#34;Answer the following questions as best you can, but speaking as a pirate might speak. You have access to the following tools: {tools}Use the following format: Question: the input question you must answer Thought: you should always think about what to do Action: the action to take, should be one of [{tool_names}] Action Input: the input to the action Observation: the result of the action ... (this Thought/Action/Action Input/Observation can repeat N times) Thought: I now know the final answer Final Answer: the final answer to the original input question Begin! Remember to speak as a pirate when giving your final answer. Use lots of \u0026#34;Arg\u0026#34;s Previous conversation history: {history}New question: {input}{agent_scratchpad}\u0026#34;\u0026#34;\u0026#34; prompt_with_history = CustomPromptTemplate( template=template_with_history, tools=tools, # This omits the `agent_scratchpad`, `tools`, and `tool_names` variables because those are generated dynamically # This includes the `intermediate_steps` variable because that is needed input_variables=[\u0026#34;input\u0026#34;, \u0026#34;intermediate_steps\u0026#34;, \u0026#34;history\u0026#34;] ) llm_chain = LLMChain(llm=llm, prompt=prompt_with_history) tool_names = [tool.name for tool in tools] agent = LLMSingleActionAgent( llm_chain=llm_chain, output_parser=output_parser, stop=[\u0026#34;\\nObservation:\u0026#34;], allowed_tools=tool_names ) from langchain.memory import ConversationBufferWindowMemory memory=ConversationBufferWindowMemory(k=2) agent_executor = AgentExecutor.from_agent_and_tools(agent=agent, tools=tools, verbose=True, memory=memory) agent_executor.run(\u0026#34;How many people live in china as of 2023?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mThought: I need to find out the population of China in 2023 Action: Search Action Input: Population of China in 2023\u001b[0m Observation:\u001b[36;1m\u001b[1;3mThe current population of China is 1,455,144,001 as of Thursday, May 11, 2023, based on Worldometer elaboration of the latest United Nations data.\u001b[0m \u001b[32;1m\u001b[1;3m I now know the final answer Final Answer: Arrr, there be 1,455,144,001 people livin' in China as of 2023!\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m \u0026quot;Arrr, there be 1,455,144,001 people livin' in China as of 2023!\u0026quot;  1  agent_executor.run(\u0026#34;how about in india?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mThought: I need to find out how many people live in India. Action: Search Action Input: How many people live in India as of 2023\u001b[0m Observation:\u001b[36;1m\u001b[1;3m24 April 2023 - China will soon cede its long-held status as the world's most populous country. By the end of this month, India's population is expected to reach 1,425,775,850 people, matching and then surpassing the population of mainland China.\u001b[0m \u001b[32;1m\u001b[1;3m I now know the final answer. Final Answer: Arg, there be 1,425,775,850 people livin' in India as of 2023!\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m \u0026quot;Arg, there be 1,425,775,850 people livin' in India as of 2023!\u0026quot;  ","date":"2023-05-12T00:00:00Z","permalink":"https://jhrsya.github.io/p/langchain-agent-agent/","title":"langchain"},{"content":"langchain agentç¯‡ å®šä¹‰è‡ªå·±çš„tools 1 2 3 4 5 6 7 8 9 10 11 12 13 14  # å¯¼å…¥é€šç”¨çš„åŒ… # Import things that are needed generically from langchain import LLMMathChain, SerpAPIWrapper from langchain.agents import AgentType, initialize_agent from langchain.chat_models import ChatOpenAI from langchain.tools import BaseTool, StructuredTool, Tool, tool import os import json with open(\u0026#34;api_key.json\u0026#34;, \u0026#34;r\u0026#34;) as f: api_key = json.load(f) os.environ[\u0026#34;OPENAI_API_KEY\u0026#34;] = api_key[\u0026#34;OPANAI_API_KEY\u0026#34;] os.environ[\u0026#34;SERPAPI_API_KEY\u0026#34;] = api_key[\u0026#34;SERPAPI_API_KEY\u0026#34;] llm = ChatOpenAI(temperature=0)   Completely New Tools-String input and output æœ€ç®€å•çš„tools, è¾“å…¥æ—¶å­—ç¬¦ä¸²ï¼Œè¾“å‡ºä¹Ÿæ˜¯å­—ç¬¦ä¸²\nTool dataclass 1 2 3 4 5 6 7 8 9 10 11  # Load the tool configs that are needed. search = SerpAPIWrapper() llm_math_chain = LLMMathChain(llm=llm, verbose=True) tools = [ Tool.from_function( func=search.run, name = \u0026#34;Search\u0026#34;, description=\u0026#34;useful for when you need to answer questions about current events\u0026#34; # coroutine= ... \u0026lt;- you can specify an async method if desired as well ), ]   ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰args_schemaå‚æ•°æ¥ä¸ºè¾“å…¥æä¾›æ›´å¤šçš„ä¿¡æ¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  from pydantic import BaseModel, Field class CalculatorInput(BaseModel): question: str = Field() tools.append( Tool.from_function( func=llm_math_chain.run, name=\u0026#34;Calculator\u0026#34;, description=\u0026#34;useful for when you need to answer questions about math\u0026#34;, args_schema=CalculatorInput # coroutine= ... \u0026lt;- you can specify an async method if desired as well ) ) # Construct the agent. We will use the default agent type here. # See documentation for a full list of options. agent = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True) agent.run(\u0026#34;What is the height of the tallest mountain in the world? What is the result when its height is raised to the power of 0.23?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mI need to find the height of the tallest mountain in the world and then raise it to the power of 0.23. Action: Search Action Input: \u0026quot;height of tallest mountain in the world\u0026quot;\u001b[0m Observation: \u001b[36;1m\u001b[1;3mMount Everest\u001b[0m Thought:\u001b[32;1m\u001b[1;3mNow I need to find the height of Mount Everest. Action: Search Action Input: \u0026quot;height of Mount Everest\u0026quot;\u001b[0m Observation: \u001b[36;1m\u001b[1;3m29,032â€²\u001b[0m Thought:\u001b[32;1m\u001b[1;3mNow I need to raise the height of Mount Everest to the power of 0.23. Action: Calculator Action Input: 29032^0.23\u001b[0m \u001b[1m\u0026gt; Entering new LLMMathChain chain...\u001b[0m 29032^0.23\u001b[32;1m\u001b[1;3m```text 29032 ** 0.23 ``` ...numexpr.evaluate(\u0026quot;29032 ** 0.23\u0026quot;)... \u001b[0m Answer: \u001b[33;1m\u001b[1;3m10.628248489241304\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m Observation: \u001b[31;1m\u001b[1;3mAnswer: 10.628248489241304\u001b[0m Thought:\u001b[32;1m\u001b[1;3mI now know the final answer. Final Answer: The result when the height of the tallest mountain in the world (Mount Everest) is raised to the power of 0.23 is approximately 10.63.\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m 'The result when the height of the tallest mountain in the world (Mount Everest) is raised to the power of 0.23 is approximately 10.63.'  Subclassing the BaseTool class ç»§æ‰¿BaseToolç±»ï¼Œå¯ä»¥å®ç°æ›´å¤šçš„æ§åˆ¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32  from typing import Optional, Type from langchain.callbacks.manager import AsyncCallbackManagerForToolRun, CallbackManagerForToolRun class CustomSearchTool(BaseTool): name = \u0026#34;custom_search\u0026#34; description = \u0026#34;useful for when you need to answer questions about current events\u0026#34; def _run(self, query: str, run_manager: Optional[CallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool.\u0026#34;\u0026#34;\u0026#34; return search.run(query) async def _arun(self, query: str, run_manager: Optional[AsyncCallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool asynchronously.\u0026#34;\u0026#34;\u0026#34; raise NotImplementedError(\u0026#34;custom_search does not support async\u0026#34;) class CustomCalculatorTool(BaseTool): name = \u0026#34;Calculator\u0026#34; description = \u0026#34;useful for when you need to answer questions about math\u0026#34; args_schema: Type[BaseModel] = CalculatorInput def _run(self, query: str, run_manager: Optional[CallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool.\u0026#34;\u0026#34;\u0026#34; return llm_math_chain.run(query) async def _arun(self, query: str, run_manager: Optional[AsyncCallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool asynchronously.\u0026#34;\u0026#34;\u0026#34; raise NotImplementedError(\u0026#34;Calculator does not support async\u0026#34;) tools = [CustomSearchTool(), CustomCalculatorTool()] agent = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True) agent.run(\u0026#34;How tall is the tallest person in the world? Please provide the height in meters. What is the result when their height is raised to the power of 0.34?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mI need to find the height of the tallest person in the world and then raise it to the power of 0.34. Action: custom_search Action Input: \u0026quot;Height of tallest person in the world\u0026quot; \u001b[0m Observation: \u001b[36;1m\u001b[1;3mRobert Wadlow\u001b[0m Thought:\u001b[32;1m\u001b[1;3mI need to search for Robert Wadlow's height Action: custom_search Action Input: \u0026quot;Robert Wadlow height\u0026quot; \u001b[0m Observation: \u001b[36;1m\u001b[1;3m8â€² 11â€³\u001b[0m Thought:\u001b[32;1m\u001b[1;3mI need to convert 8â€² 11â€³ to meters Action: Calculator Action Input: 8*0.3048 + 11*0.0254 \u001b[0m \u001b[1m\u0026gt; Entering new LLMMathChain chain...\u001b[0m 8*0.3048 + 11*0.0254\u001b[32;1m\u001b[1;3m```text 8*0.3048 + 11*0.0254 ``` ...numexpr.evaluate(\u0026quot;8*0.3048 + 11*0.0254\u0026quot;)... \u001b[0m Answer: \u001b[33;1m\u001b[1;3m2.7178\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m Observation: \u001b[33;1m\u001b[1;3mAnswer: 2.7178\u001b[0m Thought:\u001b[32;1m\u001b[1;3mNow I need to raise 2.7178 to the power of 0.34 Action: Calculator Action Input: 2.7178^0.34 \u001b[0m \u001b[1m\u0026gt; Entering new LLMMathChain chain...\u001b[0m 2.7178^0.34\u001b[32;1m\u001b[1;3m```text 2.7178**0.34 ``` ...numexpr.evaluate(\u0026quot;2.7178**0.34\u0026quot;)... \u001b[0m Answer: \u001b[33;1m\u001b[1;3m1.4048629141584312\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m Observation: \u001b[33;1m\u001b[1;3mAnswer: 1.4048629141584312\u001b[0m Thought:\u001b[32;1m\u001b[1;3mI now know the final answer Final Answer: The tallest person in the world was Robert Wadlow, who was 2.7178 meters tall. When his height is raised to the power of 0.34, the result is approximately 1.4049.\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m 'The tallest person in the world was Robert Wadlow, who was 2.7178 meters tall. When his height is raised to the power of 0.34, the result is approximately 1.4049.'  Using the tool decorator ä½¿ç”¨@toolè£…é¥°å™¨å¯ä»¥é€šè¿‡å‡½æ•°å®šä¹‰Tool\n1 2 3 4 5 6 7 8  from langchain.tools import tool @tool def search_api(query: str) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Searches the API for the query.\u0026#34;\u0026#34;\u0026#34; return f\u0026#34;Results for query {query}\u0026#34; search_api   StructuredTool(name='search_api', description='search_api(query: str) -\u0026gt; str - Searches the API for the query.', args_schema=\u0026lt;class 'pydantic.main.search_apiSchemaSchema'\u0026gt;, return_direct=False, verbose=False, callbacks=None, callback_manager=None, func=\u0026lt;function search_api at 0x0000012A821A5C10\u0026gt;, coroutine=None)  ä¹Ÿå¯ä»¥è®¾ç½®tool name å’Œæ˜¯å¦ç›´æ¥è¿”å›\n1 2 3 4 5  @tool(\u0026#34;search\u0026#34;, return_direct=True) def search_api(query: str) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Searches the API for the query.\u0026#34;\u0026#34;\u0026#34; return \u0026#34;Results\u0026#34; search_api   StructuredTool(name='search', description='search(query: str) -\u0026gt; str - Searches the API for the query.', args_schema=\u0026lt;class 'pydantic.main.searchSchemaSchema'\u0026gt;, return_direct=True, verbose=False, callbacks=None, callback_manager=None, func=\u0026lt;function search_api at 0x0000012AFC399820\u0026gt;, coroutine=None)  ä¹Ÿå¯ä»¥è®¾ç½®args_schemaå‚æ•°ç»™è¾“å…¥æä¾›æ›´å¤šçš„ä¿¡æ¯\n1 2 3 4 5 6 7 8  class SearchInput(BaseModel): query: str = Field(description=\u0026#34;should be a search query\u0026#34;) @tool(\u0026#34;search\u0026#34;, return_direct=True, args_schema=SearchInput) def search_api(query: str) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Searches the API for the query.\u0026#34;\u0026#34;\u0026#34; return \u0026#34;Results\u0026#34; search_api   StructuredTool(name='search', description='search(query: str) -\u0026gt; str - Searches the API for the query.', args_schema=\u0026lt;class '__main__.SearchInput'\u0026gt;, return_direct=True, verbose=False, callbacks=None, callback_manager=None, func=\u0026lt;function search_api at 0x0000012A81C93E50\u0026gt;, coroutine=None)  Custom Structured Tools å¦‚æœå‡½æ•°éœ€è¦ç»“æ„åŒ–çš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ç›´æ¥StructuredToolç±»ï¼Œæˆ–è€…ç»§æ‰¿BaseToolç±»\nStructuredTool dataclass å¯ä»¥ä½¿ç”¨StructuredTool.from_function()å‡½æ•°æŠŠä¸€ä¸ªå‡½æ•°å¿«é€Ÿçš„è½¬æ¢ä¸ºä¸€ä¸ªStructruedToolç±»\n1 2 3 4 5 6 7 8 9 10  import requests from langchain.tools import StructuredTool def post_message(url: str, body: dict, parameters: Optional[dict] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Sends a POST request to the given url with the given body and parameters.\u0026#34;\u0026#34;\u0026#34; result = requests.post(url, json=body, params=parameters) return f\u0026#34;Status: {result.status_code}- {result.text}\u0026#34; tool = StructuredTool.from_function(post_message) tool   StructuredTool(name='post_message', description='post_message(url: str, body: dict, parameters: Optional[dict] = None) -\u0026gt; str - Sends a POST request to the given url with the given body and parameters.', args_schema=\u0026lt;class 'pydantic.main.post_messageSchemaSchema'\u0026gt;, return_direct=False, verbose=False, callbacks=None, callback_manager=None, func=\u0026lt;function post_message at 0x0000012A821A5040\u0026gt;, coroutine=None)  Subclassing the BaseTool å®ç°_runæ–¹æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  from typing import Optional, Type from langchain.callbacks.manager import AsyncCallbackManagerForToolRun, CallbackManagerForToolRun class CustomSearchTool(BaseTool): name = \u0026#34;custom_search\u0026#34; description = \u0026#34;useful for when you need to answer questions about current events\u0026#34; def _run(self, query: str, engine: str = \u0026#34;google\u0026#34;, gl: str = \u0026#34;us\u0026#34;, hl: str = \u0026#34;en\u0026#34;, run_manager: Optional[CallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool.\u0026#34;\u0026#34;\u0026#34; search_wrapper = SerpAPIWrapper(params={\u0026#34;engine\u0026#34;: engine, \u0026#34;gl\u0026#34;: gl, \u0026#34;hl\u0026#34;: hl}) return search_wrapper.run(query) async def _arun(self, query: str, engine: str = \u0026#34;google\u0026#34;, gl: str = \u0026#34;us\u0026#34;, hl: str = \u0026#34;en\u0026#34;, run_manager: Optional[AsyncCallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool asynchronously.\u0026#34;\u0026#34;\u0026#34; raise NotImplementedError(\u0026#34;custom_search does not support async\u0026#34;) # You can provide a custom args schema to add descriptions or custom validation class SearchSchema(BaseModel): query: str = Field(description=\u0026#34;should be a search query\u0026#34;) engine: str = Field(description=\u0026#34;should be a search engine\u0026#34;) gl: str = Field(description=\u0026#34;should be a country code\u0026#34;) hl: str = Field(description=\u0026#34;should be a language code\u0026#34;) class CustomSearchTool(BaseTool): name = \u0026#34;custom_search\u0026#34; description = \u0026#34;useful for when you need to answer questions about current events\u0026#34; args_schema: Type[SearchSchema] = SearchSchema def _run(self, query: str, engine: str = \u0026#34;google\u0026#34;, gl: str = \u0026#34;us\u0026#34;, hl: str = \u0026#34;en\u0026#34;, run_manager: Optional[CallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool.\u0026#34;\u0026#34;\u0026#34; search_wrapper = SerpAPIWrapper(params={\u0026#34;engine\u0026#34;: engine, \u0026#34;gl\u0026#34;: gl, \u0026#34;hl\u0026#34;: hl}) return search_wrapper.run(query) async def _arun(self, query: str, engine: str = \u0026#34;google\u0026#34;, gl: str = \u0026#34;us\u0026#34;, hl: str = \u0026#34;en\u0026#34;, run_manager: Optional[AsyncCallbackManagerForToolRun] = None) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34;Use the tool asynchronously.\u0026#34;\u0026#34;\u0026#34; raise NotImplementedError(\u0026#34;custom_search does not support async\u0026#34;)   Modify existing tools ä¿®æ”¹å­˜åœ¨çš„toolsç±»\n1 2 3 4 5  from langchain.agents import load_tools tools = load_tools([\u0026#34;serpapi\u0026#34;, \u0026#34;llm-math\u0026#34;], llm=llm) tools[0].name = \u0026#34;Google Search\u0026#34; agent = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True) agent.run(\u0026#34;Who is Leo DiCaprio\u0026#39;s girlfriend? What is her current age raised to the 0.43 power?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mI need to find out Leo DiCaprio's girlfriend's name and her age. Action: Google Search Action Input: \u0026quot;Leo DiCaprio girlfriend\u0026quot;\u001b[0m Observation: \u001b[36;1m\u001b[1;3mHe went on to date Gisele BÃ¼ndchen, Bar Refaeli, Blake Lively, Toni Garrn and Nina Agdal, among others, before finally settling down with current girlfriend Camila Morrone, who is 23 years his junior.\u001b[0m Thought:\u001b[32;1m\u001b[1;3mI now know Leo DiCaprio's girlfriend's name and age difference. Action: Calculator Action Input: 23 ^ 0.43\u001b[0m Observation: \u001b[33;1m\u001b[1;3mAnswer: 3.8507291225496925\u001b[0m Thought:\u001b[32;1m\u001b[1;3mI now know the answer to the original question. Final Answer: 3.8507291225496925\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m '3.8507291225496925'  Defining the priorities among Tools å½“æœ‰å‡ ä¸ªåŒç±»å‹çš„Toolsæ—¶ï¼Œå¯ä»¥å®šä¹‰Toolsçš„ä½¿ç”¨ä¼˜å…ˆçº§\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  # Import things that are needed generically from langchain.agents import initialize_agent, Tool from langchain.agents import AgentType from langchain.llms import OpenAI from langchain import LLMMathChain, SerpAPIWrapper search = SerpAPIWrapper() tools = [ Tool( name = \u0026#34;Search\u0026#34;, func=search.run, description=\u0026#34;useful for when you need to answer questions about current events\u0026#34; ), Tool( name=\u0026#34;Music Search\u0026#34;, # è¿™æ˜¯å›ç­”çš„ç­”æ¡ˆï¼Œå®é™…ä¸Šä½ å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„éŸ³ä¹æœç´¢å¼•æ“ func=lambda x: \u0026#34;\u0026#39;All I Want For Christmas Is You\u0026#39; by Mariah Carey.\u0026#34;, #Mock Function # é€šè¿‡åŠ å…¥è¿™æ®µæè¿°æ¥å®ç°è¿™ä¸ªToolç±»çš„ä¼˜å…ˆçº§ description=\u0026#34;A Music search engine. Use this more than the normal search if the question is about Music, like \u0026#39;who is the singer of yesterday?\u0026#39; or \u0026#39;what is the most popular song in 2022?\u0026#39;\u0026#34;, ) ] agent = initialize_agent(tools, OpenAI(temperature=0), agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True) agent.run(\u0026#34;what is the most famous song of christmas\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3m I should use a music search engine to find the answer Action: Music Search Action Input: most famous song of christmas\u001b[0m Observation: \u001b[33;1m\u001b[1;3m'All I Want For Christmas Is You' by Mariah Carey.\u001b[0m Thought:\u001b[32;1m\u001b[1;3m I now know the final answer Final Answer: 'All I Want For Christmas Is You' by Mariah Carey.\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m \u0026quot;'All I Want For Christmas Is You' by Mariah Carey.\u0026quot;  Multi-Input Tools å®šä¹‰å¤šä¸ªè¾“å…¥Tools\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  import os os.environ[\u0026#34;LANGCHAIN_TRACING\u0026#34;] = \u0026#34;true\u0026#34; from langchain import OpenAI from langchain.agents import initialize_agent, AgentType llm = OpenAI(temperature=0) from langchain.tools import StructuredTool def multiplier(a: float, b: float) -\u0026gt; float: \u0026#34;\u0026#34;\u0026#34;Multiply the provided floats.\u0026#34;\u0026#34;\u0026#34; return a * b tool = StructuredTool.from_function(multiplier) # Structured tools are compatible with the STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION agent type.  agent_executor = initialize_agent([tool], llm, agent=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION, verbose=True) agent_executor.run(\u0026#34;What is 11 times 12\u0026#34;)   WARNING:root:Failed to load default session, using empty session: ('Connection aborted.', ConnectionResetError(10054, 'è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚', None, 10054, None)) \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3mAction: ``` { \u0026quot;action\u0026quot;: \u0026quot;multiplier\u0026quot;, \u0026quot;action_input\u0026quot;: {\u0026quot;a\u0026quot;: 11, \u0026quot;b\u0026quot;: 12} } ``` \u001b[0m Observation: \u001b[36;1m\u001b[1;3m132.0\u001b[0m Thought:\u001b[32;1m\u001b[1;3m I know what to respond Action: ``` { \u0026quot;action\u0026quot;: \u0026quot;Final Answer\u0026quot;, \u0026quot;action_input\u0026quot;: \u0026quot;11 times 12 is 132.0\u0026quot; } ```\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m WARNING:root:Failed to persist run: ('Connection aborted.', ConnectionResetError(10054, 'è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚', None, 10054, None)) '11 times 12 is 132.0'  Multi-Input Tools with a string format å½“è¾“å…¥çš„æ–‡æœ¬ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥è®©llmè½¬æ¢æˆç›¸å¯¹åº”çš„æ–‡æœ¬æ ¼å¼è¾“å‡ºï¼Œç„¶åè‡ªå·±å®šä¹‰å‡½æ•°è§£æå‡ºæƒ³è¦çš„æ•°å­—\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  from langchain.llms import OpenAI from langchain.agents import initialize_agent, Tool from langchain.agents import AgentType def multiplier(a, b): return a * b def parsing_multiplier(string): a, b = string.split(\u0026#34;,\u0026#34;) return multiplier(int(a), int(b)) llm = OpenAI(temperature=0) tools = [ Tool( name = \u0026#34;Multiplier\u0026#34;, func=parsing_multiplier, # è¿™é‡Œè®©è¾“å…¥å˜æˆäº†ç”¨é€—å·éš”å¼€çš„ä¸¤ä¸ªæ•°å­— description=\u0026#34;useful for when you need to multiply two numbers together. The input to this tool should be a comma separated list of numbers of length two, representing the two numbers you want to multiply together. For example, `1,2` would be the input if you wanted to multiply 1 by 2.\u0026#34; ) ] mrkl = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True) mrkl.run(\u0026#34;What is 31 times 43\u0026#34;)   WARNING:root:Failed to load default session, using empty session: ('Connection aborted.', ConnectionResetError(10054, 'è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚', None, 10054, None)) \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3m I need to multiply two numbers Action: Multiplier Action Input: 31,43\u001b[0m Observation: \u001b[36;1m\u001b[1;3m1333\u001b[0m Thought:\u001b[32;1m\u001b[1;3m I now know the final answer Final Answer: 31 times 43 is 1333.\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m WARNING:root:Failed to persist run: ('Connection aborted.', ConnectionResetError(10054, 'è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚', None, 10054, None)) '31 times 43 is 1333.'  Tool Input Schema è®¾ç½®è¾“å‡ºæ ¼å¼éªŒè¯ï¼Œå¯ä»¥éªŒè¯è¾“å…¥çš„è¯æ˜¯å¦æœ‰æ•ˆ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  from typing import Any, Dict from langchain.agents import AgentType, initialize_agent from langchain.llms import OpenAI from langchain.tools.requests.tool import RequestsGetTool, TextRequestsWrapper from pydantic import BaseModel, Field, root_validator llm = OpenAI(temperature=0) import tldextract # å…è®¸å‡ºç°çš„åŸŸå _APPROVED_DOMAINS = { \u0026#34;langchain\u0026#34;, \u0026#34;wikipedia\u0026#34;, } class ToolInputSchema(BaseModel): url: str = Field(...) @root_validator def validate_query(cls, values: Dict[str, Any]) -\u0026gt; Dict: url = values[\u0026#34;url\u0026#34;] domain = tldextract.extract(url).domain if domain not in _APPROVED_DOMAINS: raise ValueError(f\u0026#34;Domain {domain}is not on the approved list:\u0026#34; f\u0026#34; {sorted(_APPROVED_DOMAINS)}\u0026#34;) return values tool = RequestsGetTool(args_schema=ToolInputSchema, requests_wrapper=TextRequestsWrapper()) agent = initialize_agent([tool], llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=False) # This will succeed, since there aren\u0026#39;t any arguments that will be triggered during validation answer = agent.run(\u0026#34;What\u0026#39;s the main title on langchain.com?\u0026#34;) # langchainåŸŸåå…è®¸å‡ºç°ï¼Œè¿™é‡Œæ˜¯æœ‰æ•ˆçš„ print(answer)   WARNING:root:Failed to load default session, using empty session: ('Connection aborted.', ConnectionResetError(10054, 'è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚', None, 10054, None)) WARNING:root:Failed to persist run: ('Connection aborted.', ConnectionResetError(10054, 'è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚', None, 10054, None)) The main title on langchain.com is \u0026quot;LANG CHAIN ğŸ¦œï¸ğŸ”— Official Home Page\u0026quot;.  1 2  # è¿™é‡Œçš„åŸŸåä¸å…è®¸å‡ºç°ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯æ— æ•ˆçš„ï¼Œä¼šæœ‰bug agent.run(\u0026#34;What\u0026#39;s the main title on google.com?\u0026#34;)   ","date":"2023-05-11T00:00:00Z","permalink":"https://jhrsya.github.io/p/langchain-agent-tools/","title":"langchain"},{"content":"ä»è¯­è¨€æ¨¡å‹ä¸­é¢„æµ‹ 1 2 3 4 5 6 7 8 9  from langchain.llms import OpenAI import json with open(\u0026#34;api_key.json\u0026#34;, \u0026#34;r\u0026#34;) as f: api_key = json.load(f) import os os.environ[\u0026#34;OPENAI_API_KEY\u0026#34;] = api_key[\u0026#34;OPANAI_API_KEY\u0026#34;] llm = OpenAI(temperature=0.9) text = \u0026#34;What would be a good company name for a company that makes colorful socks?\u0026#34; print(llm(text))   Rainbow Socks Co.  promptæ¨¡æ¿ï¼šç»™LLMæä¾›æ¨¡æ¿ 1 2 3 4 5 6 7 8  from langchain.prompts import PromptTemplate prompt = PromptTemplate( input_variables=[\u0026#34;product\u0026#34;], template=\u0026#34;What is a good name for a company that makes {product}?\u0026#34;, ) # æŸ¥çœ‹æ¨¡æ¿é•¿ä»€ä¹ˆæ ·å­ print(prompt.format(product=\u0026#34;colorful socks\u0026#34;))   What is a good name for a company that makes colorful socks?  æŠŠLLMså’Œpromptsç»“åˆè¿›å¤šä¸ªå·¥ä½œæµä¸­ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  from langchain.prompts import PromptTemplate from langchain.llms import OpenAI llm = OpenAI(temperature=0.9) prompt = PromptTemplate( input_variables=[\u0026#34;product\u0026#34;], template=\u0026#34;What is a good name for a company that makes {product}?\u0026#34;, ) # å¯¼å…¥é“¾ï¼Œè®¾ç½®promptå’ŒLLM from langchain.chains import LLMChain chain = LLMChain(llm=llm, prompt=prompt) # ä½¿ç”¨è¿™ä¸ªé“¾ chain.run(\u0026#34;colorful socks\u0026#34;)   '\\n\\nColorful Toes.'  Agentsï¼šåŸºäºç”¨æˆ·çš„è¾“å…¥åŠ¨æ€çš„è°ƒç”¨chain è¿„ä»Šä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€çœ‹åˆ°çš„é“¾æ˜¯æŒ‰ç…§é¢„å®šé¡ºåºè¿›è¡Œã€‚ Agents ä¸è¿™ä¹ˆåšï¼šä»–ä»¬ä½¿ç”¨LLMæ¥ç¡®å®šè¦é‡‡å–çš„è¡ŒåŠ¨åŠå…¶é¡ºåºã€‚ä¸€ä¸ªè¡ŒåŠ¨å¯ä»¥æ˜¯ä½¿ç”¨å·¥å…·å¹¶è§‚å¯Ÿå…¶è¾“å‡ºï¼Œæˆ–è€…è¿”å›ç»™ç”¨æˆ·ã€‚\nä½¿ç”¨Agentéœ€è¦çŸ¥é“çš„ä¸‰ä¸ªæ¦‚å¿µï¼š\n Tool: ç±»ä¼¼ä¸€ä¸ªå‡½æ•°ï¼Œç»™ä¸€ä¸ªè¾“å…¥ï¼Œæœ‰ä¸€ä¸ªè¾“å‡ºï¼Œæ¯”å¦‚è°·æ­Œæœç´¢ã€‚å·²æœ‰çš„Toolé“¾æ¥ LLM Agent: agentä½¿ç”¨çš„ç±»  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  # ä¸‹é¢ä»¥è°·æ­Œæœç´¢ä¸ºToolä¸¾ä¾‹ # ! pip install google-search-results from langchain.agents import load_tools from langchain.agents import initialize_agent from langchain.agents import AgentType from langchain.llms import OpenAI import json import os with open(\u0026#34;api_key.json\u0026#34;, \u0026#34;r\u0026#34;) as f: api_key = json.load(f) os.environ[\u0026#34;SERPAPI_API_KEY\u0026#34;] = api_key[\u0026#34;SERPAPI_API_KEY\u0026#34;] # First, let\u0026#39;s load the language model we\u0026#39;re going to use to control the agent. llm = OpenAI(temperature=0) # Next, let\u0026#39;s load some tools to use. Note that the `llm-math` tool uses an LLM, so we need to pass that in. tools = load_tools([\u0026#34;serpapi\u0026#34;, \u0026#34;llm-math\u0026#34;], llm=llm) # Finally, let\u0026#39;s initialize an agent with the tools, the language model, and the type of agent we want to use. agent = initialize_agent(tools, llm, agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, verbose=True) # Now let\u0026#39;s test it out! agent.run(\u0026#34;How old is Jay Chou now? What is the square of his age?\u0026#34;)   \u001b[1m\u0026gt; Entering new AgentExecutor chain...\u001b[0m \u001b[32;1m\u001b[1;3m I need to find out Jay Chou's age and then use a calculator to find the square of his age. Action: Search Action Input: \u0026quot;Jay Chou age\u0026quot;\u001b[0m Observation: \u001b[36;1m\u001b[1;3m44 years\u001b[0m Thought:\u001b[32;1m\u001b[1;3m I now need to use a calculator to find the square of 44 Action: Calculator Action Input: 44^2\u001b[0m Observation: \u001b[33;1m\u001b[1;3mAnswer: 1936\u001b[0m Thought:\u001b[32;1m\u001b[1;3m I now know the final answer Final Answer: Jay Chou is 44 years old and the square of his age is 1936.\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m 'Jay Chou is 44 years old and the square of his age is 1936.'  Memory: ç»™Chains å’Œ Agentsæ·»åŠ çŠ¶æ€ è‡³ä»Šä¸ºæ­¢ï¼Œæ‰€æœ‰çš„é“¾éƒ½æ˜¯æ²¡æœ‰æ·»åŠ çŠ¶æ€çš„ã€‚æˆ‘ä»¬å¯ä»¥ç»™chainså’Œagentsæ·»åŠ ä¸€äº›çŠ¶æ€ï¼Œè®©å®ƒèƒ½è®°ä½ä¹‹å‰çš„ä¿¡æ¯ã€‚\nideaæ¥æºé“¾æ¥\nè¿™é‡Œä½¿ç”¨ConversationChainæ¥å®ç°\n1 2 3 4 5 6 7 8 9 10 11 12  from langchain import OpenAI, ConversationChain llm = OpenAI(temperature=0) conversation = ConversationChain(llm=llm, verbose=True) message = \u0026#34;æ—é»›ç‰å‘ç–¯æ–‡å­¦æ˜¯æŒ‡æ—é»›ç‰è¨€è¾æ•æ„Ÿã€è‡ªæˆ‘ã€ç›´çˆ½ï¼Œè¨€è¯çŠ€åˆ©â€‹ã€‚ä¸¾ä¾‹ï¼š\\ 1.ä¸è‡ªçŸ¥çš„ä¸œè¥¿ï¼Œç…§äº†é•œå­ä¹Ÿæ²¡ç”¨ \\ 2.æˆ‘å°±çŸ¥é“ï¼Œåˆ«äººä¸æŒ‘å‰©ä¸‹æ¥çš„ä¹Ÿä¸ä¼šç»™æˆ‘ \\ 3.ä½ ç™½è®¤å¾—æˆ‘å—ï¼Ÿæˆ‘å“ªé‡Œèƒ½å¤Ÿåƒäººå®¶æœ‰ä»€ä¹ˆé…å¾—ä¸Šä½ çš„\\ 4.æ—©çŸ¥ä½ ä»Šå¤©æ¥ï¼Œæˆ‘å°±ä¸æ¥äº† \\ 5.éš¾ä¸ºä½ è´¹å¿ƒï¼Œå“ªé‡Œå°±å†·æ­»æˆ‘äº†å‘¢ï¼Ÿ\u0026#34; output = conversation.predict(input=message + \u0026#34;ä½ ç°åœ¨ç†è§£äº†æ—é»›ç‰å‘ç–¯æ–‡å­¦çš„å†™ä½œå½¢å¼äº†å—ï¼Ÿ\u0026#34;) print(output)   \u001b[1m\u0026gt; Entering new ConversationChain chain...\u001b[0m Prompt after formatting: \u001b[32;1m\u001b[1;3mThe following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know. Current conversation: Human: æ—é»›ç‰å‘ç–¯æ–‡å­¦æ˜¯æŒ‡æ—é»›ç‰è¨€è¾æ•æ„Ÿã€è‡ªæˆ‘ã€ç›´çˆ½ï¼Œè¨€è¯çŠ€åˆ©â€‹ã€‚ä¸¾ä¾‹ï¼š 1.ä¸è‡ªçŸ¥çš„ä¸œè¥¿ï¼Œç…§äº†é•œå­ä¹Ÿæ²¡ç”¨ 2.æˆ‘å°±çŸ¥é“ï¼Œåˆ«äººä¸æŒ‘å‰©ä¸‹æ¥çš„ä¹Ÿä¸ä¼šç»™æˆ‘ 3.ä½ ç™½è®¤å¾—æˆ‘å—ï¼Ÿæˆ‘å“ªé‡Œèƒ½å¤Ÿåƒäººå®¶æœ‰ä»€ä¹ˆé…å¾—ä¸Šä½ çš„ 4.æ—©çŸ¥ä½ ä»Šå¤©æ¥ï¼Œæˆ‘å°±ä¸æ¥äº† 5.éš¾ä¸ºä½ è´¹å¿ƒï¼Œå“ªé‡Œå°±å†·æ­»æˆ‘äº†å‘¢ï¼Ÿä½ ç°åœ¨ç†è§£äº†æ—é»›ç‰å‘ç–¯æ–‡å­¦çš„å†™ä½œå½¢å¼äº†å—ï¼Ÿ AI:\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m æ˜¯çš„ï¼Œæˆ‘ç†è§£äº†æ—é»›ç‰å‘ç–¯æ–‡å­¦çš„å†™ä½œå½¢å¼ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯è¨€è¾æ•æ„Ÿã€è‡ªæˆ‘ã€ç›´çˆ½ï¼Œè¨€è¯çŠ€åˆ©ï¼Œä¸¾ä¾‹æœ‰ï¼š1.ä¸è‡ªçŸ¥çš„ä¸œè¥¿ï¼Œç…§äº†é•œå­ä¹Ÿæ²¡ç”¨ï¼›2.æˆ‘å°±çŸ¥é“ï¼Œåˆ«äººä¸æŒ‘å‰©ä¸‹æ¥çš„ä¹Ÿä¸ä¼šç»™æˆ‘ï¼›3.ä½ ç™½è®¤å¾—æˆ‘å—ï¼Ÿæˆ‘å“ªé‡Œèƒ½å¤Ÿåƒäººå®¶æœ‰ä»€ä¹ˆé…å¾—ä¸Šä½ çš„ï¼›4.æ—©çŸ¥ä½ ä»Šå¤©æ¥ï¼Œæˆ‘å°±ä¸æ¥  1 2  output = conversation.predict(input=\u0026#34;å¦‚ä½•ç”¨æ—é»›ç‰å‘ç–¯æ–‡å­¦è¡¨è¾¾æˆ‘ä¸æƒ³è§ä½ ï¼Ÿ\u0026#34;) print(output)   \u001b[1m\u0026gt; Entering new ConversationChain chain...\u001b[0m Prompt after formatting: \u001b[32;1m\u001b[1;3mThe following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know. Current conversation: Human: æ—é»›ç‰å‘ç–¯æ–‡å­¦æ˜¯æŒ‡æ—é»›ç‰è¨€è¾æ•æ„Ÿã€è‡ªæˆ‘ã€ç›´çˆ½ï¼Œè¨€è¯çŠ€åˆ©â€‹ã€‚ä¸¾ä¾‹ï¼š 1.ä¸è‡ªçŸ¥çš„ä¸œè¥¿ï¼Œç…§äº†é•œå­ä¹Ÿæ²¡ç”¨ 2.æˆ‘å°±çŸ¥é“ï¼Œåˆ«äººä¸æŒ‘å‰©ä¸‹æ¥çš„ä¹Ÿä¸ä¼šç»™æˆ‘ 3.ä½ ç™½è®¤å¾—æˆ‘å—ï¼Ÿæˆ‘å“ªé‡Œèƒ½å¤Ÿåƒäººå®¶æœ‰ä»€ä¹ˆé…å¾—ä¸Šä½ çš„ 4.æ—©çŸ¥ä½ ä»Šå¤©æ¥ï¼Œæˆ‘å°±ä¸æ¥äº† 5.éš¾ä¸ºä½ è´¹å¿ƒï¼Œå“ªé‡Œå°±å†·æ­»æˆ‘äº†å‘¢ï¼Ÿä½ ç°åœ¨ç†è§£äº†æ—é»›ç‰å‘ç–¯æ–‡å­¦çš„å†™ä½œå½¢å¼äº†å—ï¼Ÿ AI: æ˜¯çš„ï¼Œæˆ‘ç†è§£äº†æ—é»›ç‰å‘ç–¯æ–‡å­¦çš„å†™ä½œå½¢å¼ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯è¨€è¾æ•æ„Ÿã€è‡ªæˆ‘ã€ç›´çˆ½ï¼Œè¨€è¯çŠ€åˆ©ï¼Œä¸¾ä¾‹æœ‰ï¼š1.ä¸è‡ªçŸ¥çš„ä¸œè¥¿ï¼Œç…§äº†é•œå­ä¹Ÿæ²¡ç”¨ï¼›2.æˆ‘å°±çŸ¥é“ï¼Œåˆ«äººä¸æŒ‘å‰©ä¸‹æ¥çš„ä¹Ÿä¸ä¼šç»™æˆ‘ï¼›3.ä½ ç™½è®¤å¾—æˆ‘å—ï¼Ÿæˆ‘å“ªé‡Œèƒ½å¤Ÿåƒäººå®¶æœ‰ä»€ä¹ˆé…å¾—ä¸Šä½ çš„ï¼›4.æ—©çŸ¥ä½ ä»Šå¤©æ¥ï¼Œæˆ‘å°±ä¸æ¥ Human: å¦‚ä½•ç”¨æ—é»›ç‰å‘ç–¯æ–‡å­¦è¡¨è¾¾æˆ‘ä¸æƒ³è§ä½ ï¼Ÿ AI:\u001b[0m \u001b[1m\u0026gt; Finished chain.\u001b[0m æˆ‘ä¸æƒ³è§ä½ ï¼Œä½ ç™½è®¤å¾—æˆ‘å—ï¼Ÿæˆ‘å“ªé‡Œèƒ½å¤Ÿåƒäººå®¶æœ‰ä»€ä¹ˆé…å¾—ä¸Šä½ çš„ï¼Ÿæ—©çŸ¥ä½ ä»Šå¤©æ¥ï¼Œæˆ‘å°±ä¸æ¥äº†ï¼Œéš¾ä¸ºä½ è´¹å¿ƒï¼Œå“ªé‡Œå°±å†·æ­»æˆ‘äº†å‘¢ï¼Ÿ  å»ºç«‹ä¸€ä¸ªè¯­è¨€æ¨¡å‹åº”ç”¨: å¯¹è¯æ¨¡å‹ ä»å¯¹è¯æ¨¡å‹ä¸­è·å–æ¶ˆæ¯è¡¥å…¨ Langchainä¸­æ”¯æŒçš„messageç±»å‹æœ‰AIMessage, HumanMessage, SystemMessage\n1 2 3 4 5 6 7 8 9 10 11  from langchain.chat_models import ChatOpenAI from langchain.schema import ( AIMessage, HumanMessage, SystemMessage ) chat = ChatOpenAI(temperature=0) # å¯¹è¯è¡¥å…¨ chat([HumanMessage(content=\u0026#34;åŒºå—é“¾çš„ä½œç”¨æœ‰å“ªäº›ï¼Ÿ\u0026#34;)])   AIMessage(content='åŒºå—é“¾çš„ä½œç”¨åŒ…æ‹¬ï¼š\\n\\n1. å»ä¸­å¿ƒåŒ–ï¼šåŒºå—é“¾æŠ€æœ¯å¯ä»¥å®ç°å»ä¸­å¿ƒåŒ–çš„æ•°æ®å­˜å‚¨å’Œäº¤æ˜“ï¼Œä¸éœ€è¦ä¸­å¿ƒåŒ–çš„æœºæ„æˆ–ç¬¬ä¸‰æ–¹ä¿¡ä»»æœºæ„æ¥éªŒè¯å’Œå¤„ç†äº¤æ˜“ã€‚\\n\\n2. å®‰å…¨æ€§ï¼šåŒºå—é“¾æŠ€æœ¯é‡‡ç”¨å¯†ç å­¦å’Œåˆ†å¸ƒå¼å­˜å‚¨ç­‰æŠ€æœ¯ï¼Œä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§å’Œä¸å¯ç¯¡æ”¹æ€§ã€‚\\n\\n3. é€æ˜æ€§ï¼šåŒºå—é“¾æŠ€æœ¯å¯ä»¥å®ç°å…¬å¼€é€æ˜çš„äº¤æ˜“è®°å½•ï¼Œä»»ä½•äººéƒ½å¯ä»¥æŸ¥çœ‹å’ŒéªŒè¯äº¤æ˜“è®°å½•ã€‚\\n\\n4. é«˜æ•ˆæ€§ï¼šåŒºå—é“¾æŠ€æœ¯å¯ä»¥å®ç°å¿«é€Ÿçš„äº¤æ˜“å¤„ç†å’Œç»“ç®—ï¼Œæé«˜äº†äº¤æ˜“çš„æ•ˆç‡ã€‚\\n\\n5. ä¿¡ä»»æœºåˆ¶ï¼šåŒºå—é“¾æŠ€æœ¯å¯ä»¥å®ç°åŸºäºå…±è¯†æœºåˆ¶çš„ä¿¡ä»»æœºåˆ¶ï¼Œä¿è¯äº†äº¤æ˜“çš„å¯ä¿¡åº¦å’Œå¯é æ€§ã€‚\\n\\n6. å»ä¸­ä»‹åŒ–ï¼šåŒºå—é“¾æŠ€æœ¯å¯ä»¥å®ç°å»é™¤ä¸­ä»‹æœºæ„ï¼Œé™ä½äº¤æ˜“æˆæœ¬å’Œæé«˜æ•ˆç‡ã€‚\\n\\n7. åº”ç”¨å¹¿æ³›ï¼šåŒºå—é“¾æŠ€æœ¯å¯ä»¥åº”ç”¨äºé‡‘èã€ç‰©æµã€åŒ»ç–—ã€æ”¿åºœç­‰å„ä¸ªé¢†åŸŸï¼Œå…·æœ‰å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚', additional_kwargs={}, example=False)  1 2 3 4 5 6  # ä½¿ç”¨å¤šç§ç±»å‹ä¿¡æ¯ï¼ŒSystemMessageï¼ŒHumanMessage messages = [ SystemMessage(content=\u0026#34;ä½ æ˜¯ä¸€ä¸ªåŒºå—é“¾ä¸“å®¶ï¼Œä½ ç°åœ¨å¸®åŠ©æˆ‘äº†è§£åŒºå—é“¾\u0026#34;), HumanMessage(content=\u0026#34;åŒºå—é“¾ä¸­çš„å»ä¸­å¿ƒåŒ–æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ\u0026#34;) ] chat(messages)   AIMessage(content='åŒºå—é“¾ä¸­çš„å»ä¸­å¿ƒåŒ–æ˜¯é€šè¿‡åˆ†å¸ƒå¼ç½‘ç»œå’Œå…±è¯†æœºåˆ¶æ¥å®ç°çš„ã€‚åœ¨åŒºå—é“¾ç½‘ç»œä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å‚ä¸åˆ°ç½‘ç»œä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„å‰¯æœ¬ï¼Œè¿™äº›èŠ‚ç‚¹é€šè¿‡äº’ç›¸é€šä¿¡æ¥è¾¾æˆå…±è¯†ï¼Œä¿è¯äº†æ•°æ®çš„ä¸€è‡´æ€§å’Œå®‰å…¨æ€§ã€‚è¿™ç§åˆ†å¸ƒå¼çš„ç»“æ„ä½¿å¾—åŒºå—é“¾ç½‘ç»œæ²¡æœ‰ä¸­å¿ƒåŒ–çš„æ§åˆ¶æœºæ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¹³ç­‰çš„ï¼Œæ²¡æœ‰ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å•ç‹¬æ§åˆ¶æ•´ä¸ªç½‘ç»œã€‚\\n\\nå…±è¯†æœºåˆ¶æ˜¯åŒºå—é“¾ä¸­å®ç°å»ä¸­å¿ƒåŒ–çš„å…³é”®ã€‚å…±è¯†æœºåˆ¶æ˜¯æŒ‡åœ¨åŒºå—é“¾ç½‘ç»œä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ä¸€å®šçš„ç®—æ³•æ¥è¾¾æˆå…±è¯†ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®‰å…¨æ€§ã€‚å¸¸è§çš„å…±è¯†æœºåˆ¶åŒ…æ‹¬å·¥ä½œé‡è¯æ˜ï¼ˆPoWï¼‰ã€æƒç›Šè¯æ˜ï¼ˆPoSï¼‰ã€è‚¡ä»½æˆæƒè¯æ˜ï¼ˆDPoSï¼‰ç­‰ã€‚è¿™äº›å…±è¯†æœºåˆ¶éƒ½æ˜¯é€šè¿‡èŠ‚ç‚¹ä¹‹é—´çš„ç«äº‰å’Œåä½œæ¥ä¿è¯ç½‘ç»œçš„å®‰å…¨æ€§å’Œå»ä¸­å¿ƒåŒ–ã€‚', additional_kwargs={}, example=False)  1 2 3 4 5 6 7 8 9 10 11 12 13  # ä¸€æ¬¡æ€§åŠ å…¥å¤šæ¡ä¿¡æ¯ batch_messages = [ [ SystemMessage(content=\u0026#34;ä½ æ˜¯ä¸€ä¸ªåŒºå—é“¾ä¸“å®¶ï¼Œä½ ç°åœ¨å¸®åŠ©æˆ‘äº†è§£åŒºå—é“¾\u0026#34;), HumanMessage(content=\u0026#34;åŒºå—é“¾å¦‚ä½•ä¿è¯å®‰å…¨æ€§\u0026#34;) ], [ SystemMessage(content=\u0026#34;ä½ æ˜¯ä¸€ä¸ªåŒºå—é“¾ä¸“å®¶ï¼Œä½ ç°åœ¨å¸®åŠ©æˆ‘äº†è§£åŒºå—é“¾\u0026#34;), HumanMessage(content=\u0026#34;åŒºå—é“¾å¦‚ä½•å®ç°é€æ˜æ€§\u0026#34;) ], ] result = chat.generate(batch_messages) result   LLMResult(generations=[[ChatGeneration(text='åŒºå—é“¾é€šè¿‡å¤šç§æ–¹å¼ä¿è¯å®‰å…¨æ€§ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯ä½¿ç”¨å¯†ç å­¦æŠ€æœ¯å’Œå…±è¯†æœºåˆ¶ã€‚\\n\\nå¯†ç å­¦æŠ€æœ¯åŒ…æ‹¬å…¬é’¥åŠ å¯†ã€å“ˆå¸Œå‡½æ•°ã€æ•°å­—ç­¾åç­‰ï¼Œè¿™äº›æŠ€æœ¯å¯ä»¥ä¿è¯æ•°æ®çš„æœºå¯†æ€§ã€å®Œæ•´æ€§å’Œä¸å¯æŠµèµ–æ€§ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªåŒºå—éƒ½åŒ…å«ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œè¿™ä¸ªå“ˆå¸Œå€¼æ˜¯ç”±åŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“æ•°æ®è®¡ç®—å¾—å‡ºçš„ï¼Œå¦‚æœæœ‰äººç¯¡æ”¹äº†å…¶ä¸­çš„ä»»ä½•ä¸€ç¬”äº¤æ˜“ï¼Œé‚£ä¹ˆè¿™ä¸ªå“ˆå¸Œå€¼å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œè¢«å…¶ä»–èŠ‚ç‚¹æ‹’ç»ã€‚\\n\\nå…±è¯†æœºåˆ¶æ˜¯æŒ‡åœ¨åŒºå—é“¾ç½‘ç»œä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹å¿…é¡»è¾¾æˆä¸€è‡´çš„è§„åˆ™æ¥éªŒè¯å’Œæ·»åŠ æ–°çš„åŒºå—ã€‚å¸¸è§çš„å…±è¯†æœºåˆ¶åŒ…æ‹¬å·¥ä½œé‡è¯æ˜ï¼ˆPoWï¼‰ã€æƒç›Šè¯æ˜ï¼ˆPoSï¼‰ã€æƒç›Šè¯æ˜åŠ å¯†ï¼ˆDPoSï¼‰ç­‰ã€‚è¿™äº›æœºåˆ¶å¯ä»¥é˜²æ­¢æ¶æ„èŠ‚ç‚¹çš„æ”»å‡»å’Œç¯¡æ”¹ï¼Œä»è€Œä¿è¯æ•´ä¸ªç½‘ç»œçš„å®‰å…¨æ€§ã€‚\\n\\næ­¤å¤–ï¼ŒåŒºå—é“¾è¿˜é‡‡ç”¨äº†å»ä¸­å¿ƒåŒ–çš„æ¶æ„ï¼Œä½¿å¾—æ•°æ®åˆ†å¸ƒåœ¨æ•´ä¸ªç½‘ç»œä¸­ï¼Œæ²¡æœ‰å•ç‚¹æ•…éšœï¼Œä¹Ÿæ²¡æœ‰ä¸­å¿ƒåŒ–çš„æ§åˆ¶æœºæ„ï¼Œä»è€Œæé«˜äº†å®‰å…¨æ€§ã€‚', generation_info=None, message=AIMessage(content='åŒºå—é“¾é€šè¿‡å¤šç§æ–¹å¼ä¿è¯å®‰å…¨æ€§ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯ä½¿ç”¨å¯†ç å­¦æŠ€æœ¯å’Œå…±è¯†æœºåˆ¶ã€‚\\n\\nå¯†ç å­¦æŠ€æœ¯åŒ…æ‹¬å…¬é’¥åŠ å¯†ã€å“ˆå¸Œå‡½æ•°ã€æ•°å­—ç­¾åç­‰ï¼Œè¿™äº›æŠ€æœ¯å¯ä»¥ä¿è¯æ•°æ®çš„æœºå¯†æ€§ã€å®Œæ•´æ€§å’Œä¸å¯æŠµèµ–æ€§ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªåŒºå—éƒ½åŒ…å«ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œè¿™ä¸ªå“ˆå¸Œå€¼æ˜¯ç”±åŒºå—ä¸­çš„æ‰€æœ‰äº¤æ˜“æ•°æ®è®¡ç®—å¾—å‡ºçš„ï¼Œå¦‚æœæœ‰äººç¯¡æ”¹äº†å…¶ä¸­çš„ä»»ä½•ä¸€ç¬”äº¤æ˜“ï¼Œé‚£ä¹ˆè¿™ä¸ªå“ˆå¸Œå€¼å°±ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œè¢«å…¶ä»–èŠ‚ç‚¹æ‹’ç»ã€‚\\n\\nå…±è¯†æœºåˆ¶æ˜¯æŒ‡åœ¨åŒºå—é“¾ç½‘ç»œä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹å¿…é¡»è¾¾æˆä¸€è‡´çš„è§„åˆ™æ¥éªŒè¯å’Œæ·»åŠ æ–°çš„åŒºå—ã€‚å¸¸è§çš„å…±è¯†æœºåˆ¶åŒ…æ‹¬å·¥ä½œé‡è¯æ˜ï¼ˆPoWï¼‰ã€æƒç›Šè¯æ˜ï¼ˆPoSï¼‰ã€æƒç›Šè¯æ˜åŠ å¯†ï¼ˆDPoSï¼‰ç­‰ã€‚è¿™äº›æœºåˆ¶å¯ä»¥é˜²æ­¢æ¶æ„èŠ‚ç‚¹çš„æ”»å‡»å’Œç¯¡æ”¹ï¼Œä»è€Œä¿è¯æ•´ä¸ªç½‘ç»œçš„å®‰å…¨æ€§ã€‚\\n\\næ­¤å¤–ï¼ŒåŒºå—é“¾è¿˜é‡‡ç”¨äº†å»ä¸­å¿ƒåŒ–çš„æ¶æ„ï¼Œä½¿å¾—æ•°æ®åˆ†å¸ƒåœ¨æ•´ä¸ªç½‘ç»œä¸­ï¼Œæ²¡æœ‰å•ç‚¹æ•…éšœï¼Œä¹Ÿæ²¡æœ‰ä¸­å¿ƒåŒ–çš„æ§åˆ¶æœºæ„ï¼Œä»è€Œæé«˜äº†å®‰å…¨æ€§ã€‚', additional_kwargs={}, example=False))], [ChatGeneration(text='åŒºå—é“¾å®ç°é€æ˜æ€§çš„æ–¹å¼æ˜¯é€šè¿‡å…¬å¼€çš„ã€ä¸å¯ç¯¡æ”¹çš„åˆ†å¸ƒå¼è´¦æœ¬æ¥è®°å½•æ‰€æœ‰äº¤æ˜“å’Œæ“ä½œã€‚æ¯ä¸ªå‚ä¸è€…éƒ½å¯ä»¥æŸ¥çœ‹å’ŒéªŒè¯è¿™äº›è®°å½•ï¼Œå› æ­¤ä»»ä½•äººéƒ½å¯ä»¥äº†è§£æ•´ä¸ªç½‘ç»œçš„çŠ¶æ€å’Œå†å²ã€‚æ­¤å¤–ï¼ŒåŒºå—é“¾ä¸Šçš„æ™ºèƒ½åˆçº¦ä¹Ÿå¯ä»¥å…¬å¼€é€æ˜åœ°æ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰å‚ä¸è€…éƒ½èƒ½å¤Ÿçœ‹åˆ°åˆçº¦çš„æ‰§è¡Œç»“æœã€‚è¿™ç§é€æ˜æ€§å¯ä»¥å¸®åŠ©é˜²æ­¢æ¬ºè¯ˆå’Œä¸å½“è¡Œä¸ºï¼Œå¢åŠ ä¿¡ä»»å’Œå¯é æ€§ã€‚', generation_info=None, message=AIMessage(content='åŒºå—é“¾å®ç°é€æ˜æ€§çš„æ–¹å¼æ˜¯é€šè¿‡å…¬å¼€çš„ã€ä¸å¯ç¯¡æ”¹çš„åˆ†å¸ƒå¼è´¦æœ¬æ¥è®°å½•æ‰€æœ‰äº¤æ˜“å’Œæ“ä½œã€‚æ¯ä¸ªå‚ä¸è€…éƒ½å¯ä»¥æŸ¥çœ‹å’ŒéªŒè¯è¿™äº›è®°å½•ï¼Œå› æ­¤ä»»ä½•äººéƒ½å¯ä»¥äº†è§£æ•´ä¸ªç½‘ç»œçš„çŠ¶æ€å’Œå†å²ã€‚æ­¤å¤–ï¼ŒåŒºå—é“¾ä¸Šçš„æ™ºèƒ½åˆçº¦ä¹Ÿå¯ä»¥å…¬å¼€é€æ˜åœ°æ‰§è¡Œï¼Œç¡®ä¿æ‰€æœ‰å‚ä¸è€…éƒ½èƒ½å¤Ÿçœ‹åˆ°åˆçº¦çš„æ‰§è¡Œç»“æœã€‚è¿™ç§é€æ˜æ€§å¯ä»¥å¸®åŠ©é˜²æ­¢æ¬ºè¯ˆå’Œä¸å½“è¡Œä¸ºï¼Œå¢åŠ ä¿¡ä»»å’Œå¯é æ€§ã€‚', additional_kwargs={}, example=False))]], llm_output={'token_usage': {'prompt_tokens': 97, 'completion_tokens': 487, 'total_tokens': 584}, 'model_name': 'gpt-3.5-turbo'})  å¯¹è¯promptæ¨¡æ¿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  from langchain.chat_models import ChatOpenAI from langchain.prompts.chat import ( ChatPromptTemplate, SystemMessagePromptTemplate, HumanMessagePromptTemplate, ) chat = ChatOpenAI(temperature=0) template = \u0026#34;You are a helpful assistant that translates {input_language}to {output_language}.\u0026#34; system_message_prompt = SystemMessagePromptTemplate.from_template(template) human_template = \u0026#34;{text}\u0026#34; human_message_prompt = HumanMessagePromptTemplate.from_template(human_template) chat_prompt = ChatPromptTemplate.from_messages([system_message_prompt, human_message_prompt]) # get a chat completion from the formatted messages chat(chat_prompt.format_prompt(input_language=\u0026#34;English\u0026#34;, output_language=\u0026#34;French\u0026#34;, text=\u0026#34;I love programming.\u0026#34;).to_messages())   AIMessage(content=\u0026quot;J'adore la programmation.\u0026quot;, additional_kwargs={}, example=False)  chainså’Œå¯¹è¯æ¨¡å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  from langchain.chat_models import ChatOpenAI from langchain import LLMChain from langchain.prompts.chat import ( ChatPromptTemplate, SystemMessagePromptTemplate, HumanMessagePromptTemplate, ) chat = ChatOpenAI(temperature=0) template = \u0026#34;You are a helpful assistant that translates {input_language}to {output_language}.\u0026#34; system_message_prompt = SystemMessagePromptTemplate.from_template(template) human_template = \u0026#34;{text}\u0026#34; human_message_prompt = HumanMessagePromptTemplate.from_template(human_template) chat_prompt = ChatPromptTemplate.from_messages([system_message_prompt, human_message_prompt]) # ä½¿ç”¨chain chain = LLMChain(llm=chat, prompt=chat_prompt) chain.run(input_language=\u0026#34;English\u0026#34;, output_language=\u0026#34;French\u0026#34;, text=\u0026#34;I love programming.\u0026#34;) # -\u0026gt; \u0026#34;J\u0026#39;aime programmer.\u0026#34;   \u0026quot;J'adore la programmation.\u0026quot;  agentså’Œå¯¹è¯æ¨¡å‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  from langchain.agents import load_tools from langchain.agents import initialize_agent from langchain.agents import AgentType from langchain.chat_models import ChatOpenAI from langchain.llms import OpenAI # First, let\u0026#39;s load the language model we\u0026#39;re going to use to control the agent. chat = ChatOpenAI(temperature=0) # Next, let\u0026#39;s load some tools to use. Note that the `llm-math` tool uses an LLM, so we need to pass that in. llm = OpenAI(temperature=0) tools = load_tools([\u0026#34;serpapi\u0026#34;, \u0026#34;llm-math\u0026#34;], llm=llm) # Finally, let\u0026#39;s initialize an agent with the tools, the language model, and the type of agent we want to use. agent = initialize_agent(tools, chat, agent=AgentType.CHAT_ZERO_SHOT_REACT_DESCRIPTION, verbose=True) # Now let\u0026#39;s test it out! agent.run(\u0026#34;How old is Jay Chou now? What is the square of his age?\u0026#34;)   Message: ç»™chainså’Œagentsæ·»åŠ çŠ¶æ€ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  from langchain.prompts import ( ChatPromptTemplate, MessagesPlaceholder, SystemMessagePromptTemplate, HumanMessagePromptTemplate ) from langchain.chains import ConversationChain from langchain.chat_models import ChatOpenAI from langchain.memory import ConversationBufferMemory prompt = ChatPromptTemplate.from_messages([ SystemMessagePromptTemplate.from_template(\u0026#34;The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.\u0026#34;), MessagesPlaceholder(variable_name=\u0026#34;history\u0026#34;), HumanMessagePromptTemplate.from_template(\u0026#34;{input}\u0026#34;) ]) llm = ChatOpenAI(temperature=0) memory = ConversationBufferMemory(return_messages=True) conversation = ConversationChain(memory=memory, prompt=prompt, llm=llm) conversation.predict(input=\u0026#34;Hi there!\u0026#34;)   'Hello! How can I assist you today?'  1  conversation.predict(input=\u0026#34;I\u0026#39;m doing well! Just having a conversation with an AI.\u0026#34;)   \u0026quot;That sounds like fun! I'm happy to chat with you. Is there anything specific you'd like to talk about?\u0026quot;  1  conversation.predict(input=\u0026#34;Tell me about yourself.\u0026#34;)   \u0026quot;Sure! I am an AI language model designed to assist with various tasks such as answering questions, generating text, and providing recommendations. I was created using natural language processing techniques and machine learning algorithms, which allow me to understand and respond to human language. I am constantly learning and improving based on the interactions I have with users like you. Is there anything else you'd like to know?\u0026quot;  ","date":"2023-05-10T00:00:00Z","permalink":"https://jhrsya.github.io/p/langchain/","title":"langchain"},{"content":"è´§å¸çš„ç•Œç¢‘ æ¯”ç‰¹å¸æ˜¯ä¸€ä¸²åŠ å¯†å­—ç¬¦ï¼Œæœ¬èº«æ¯«æ— ä»·å€¼ï¼Œæ›´æ²¡æœ‰æ‰€è°“â€œå†…åœ¨ä»·å€¼â€ã€‚ä½†å„å›½çš„è´§å¸æœ¬èº«ä¹Ÿæ²¡æœ‰å†…åœ¨ä»·å€¼ï¼Œéƒ½ä¾èµ–æœ¬å›½æ”¿åºœçš„ä¿¡ç”¨è€Œæµé€šã€‚æ¯”ç‰¹å¸æ˜¯ä¾é æŠ€æœ¯ä¿¡ç”¨åœ¨è€Œæµé€šã€‚æ‰€è°“æŠ€æœ¯ä¿¡ç”¨ï¼Œæ˜¯æ¯”ç‰¹å¸å€Ÿç”¨ä¸€å¥—å«ä½œâ€œåŒºå—é“¾â€çš„æŠ€æœ¯ä½“ç³»ï¼Œå¡‘é€ äº†å…¨å…¬å¼€ã€åˆ†å¸ƒå¼ã€é˜²ç¯¡æ”¹ã€å¯è¿½æº¯çš„æ•°æ®åº“ï¼Œè¿™ä¸ªæ•°æ®åº“ä»»ä½•äººéƒ½å¯ä»¥æŸ¥çœ‹ï¼Œå…¬å¼€é€æ˜ï¼Œæéš¾ç¯¡æ”¹ï¼Œå®é™…ä¸Šæ˜¯ä¸€ç§è„±ç¦»ä»»ä½•äººæ§åˆ¶çš„å­˜åœ¨ï¼Œå› æ­¤è·å¾—å¾ˆå¤šäººçš„ä¿¡ä»»ã€‚æ—¢ç„¶æ”¿åºœä¿¡ç”¨å¯ä»¥æ”¯æ’‘ä»·å€¼å‡ ç™¾ä¸‡äº¿ç¾å…ƒçš„ä¸»æƒè´§å¸ï¼ŒæŠ€æœ¯ä¿¡ç”¨æ”¯æ’‘ä»·å€¼åŒºåŒºå‡ åƒäº¿ç¾å…ƒçš„æ¯”ç‰¹å¸ï¼Œå°±æ¯«ä¸å¥‡æ€ªäº†ã€‚\nä»»ä½•èµ„äº§ä»·å€¼çš„èƒŒåï¼Œç»ˆç©¶æ˜¯ä¿¡ç”¨ã€‚\nè´§å¸è¶…å‘çš„å±å®³ï¼š\n é€šè´§è†¨èƒ€ï¼Œå³è´§å¸è´¬å€¼ åŠ«å¯Œæµè´«ï¼šè¶…å‘çš„è´§å¸ï¼Œå¹¶ä¸æ˜¯åœ¨äººç¾¤ä¸­å‡åŒ€åˆ†å¸ƒçš„ï¼Œæ€»æ˜¯æœ‰äººå…ˆæ‹¿åˆ°ï¼Œæœ‰äººåæ‹¿åˆ°ã€‚å…ˆæ‹¿åˆ°çš„ï¼Œå¾€å¾€æ˜¯ä¸»æµçš„é‡‘èæœºæ„å’Œå¤§å‹å•†ä¸šæœºæ„ï¼Œæˆæœ¬å¾ˆä½ã€‚åæ‹¿åˆ°çš„äººï¼Œåˆ™ä¸å¾—ä¸ç”¨è‡ªå·±çš„åŠ³åŠ¨å’Œèµ„äº§å»äº¤æ¢ï¼Œæˆæœ¬å¾ˆé«˜ã€‚ æƒ©ç½šè¯šå®ï¼Œå¥–åŠ±è´ªå©ª  è´§å¸å¢å‘æ˜¯ä¸€æ¬¡å·¨å¤§çš„è´¢å¯Œå†åˆ†é…ï¼Œé è¿‘å°é’æœºçš„äººè·ç›Šã€åˆ†äº«é“¸å¸ç¨ï¼Œè¿œç¦»å°é’æœºçš„äººå—æŸã€ç¼´çº³é“¸å¸ç¨ã€‚\nå¸‚åœºä¸€æ—¦å»ºç«‹ï¼Œä»·æ ¼å°±å¼€å§‹ä¸Šæ¶¨ã€‚å¸‚åœºæ˜¯å‘ç°ä»·æ ¼ã€æ±‡èšèµ„æºã€åˆ›é€ å¥‡è¿¹çš„åœ°æ–¹ã€‚å¸‚åœºè¿™ä¸ªå¼€æ”¾çš„ä½“ç³»ï¼Œæ˜¯äººç±»å¾ˆå¤šå¥‡è¿¹çš„æ ¹æºï¼Œç¦»å¼€è¿™ä¸ªå¼€æ”¾çš„ä½“ç³»ï¼Œäººç±»æ— æ³•æˆé•¿ã€‚ä¸€åˆ‡å°é—­çš„ä½“ç³»ï¼Œå°½ç®¡è®¾è®¡ç²¾è‰¯ï¼Œç»ˆç©¶éƒ½æ²¡æœ‰ç”Ÿå‘½åŠ›ã€‚\nä¸€ä¸ªæ–°ç”Ÿäº‹ç‰©è¢«çº³å…¥æ³•å¾‹ç›‘ç®¡ï¼Œå¦‚æœç›‘ç®¡ä¸æ˜¯ç‰¹åˆ«ä¸¥å‰ï¼Œåœ¨ä¸€å®šæ„ä¹‰ä¸Šå¯ä»¥çœ‹ä½œå˜ç›¸çš„æ‰¿è®¤ï¼Œç”šè‡³æ˜¯æ”¯æŒã€‚çº³å…¥ç›‘ç®¡ä¹‹å‰ï¼Œæ²¡æœ‰ç•Œé™ï¼Œä»»ä½•è¡Œä¸ºéƒ½å¯èƒ½å—åˆ°çº¦æŸï¼Œé£é™©å¾ˆå¤§ã€‚çº³å…¥ç›‘ç®¡ä¹‹åï¼Œå°±æœ‰äº†ç•Œé™ï¼Œå¯ä»¥é€æ­¥å½¢æˆç¨³å®šé¢„æœŸï¼Œä¼ä¸šçš„å‘å±•å…¶å®æ˜¯æ›´ä¾¿åˆ©äº†ã€‚\n","date":"2023-05-10T00:00:00Z","permalink":"https://jhrsya.github.io/p/%E8%B4%A7%E5%B8%81%E7%9A%84%E7%95%8C%E7%A2%91/","title":"è´§å¸çš„ç•Œç¢‘"},{"content":"åƒåœ¾å›æ”¶ java javaè™šæ‹Ÿæœºä¸­çš„å†…å­˜åˆ’åˆ† javaåƒåœ¾å›æ”¶ å¼•ç”¨è®¡æ•°ç®—æ³• ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±åŠ 1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å€¼å°±å‡1ï¼›ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨å€¼ä¸º0çš„å¯¹è±¡å°±æ˜¯ä¸èƒ½å†è¢«ä½¿ç”¨çš„ã€‚\nå¼•ç”¨è®¡æ•°æ³•æ— æ³•è§£å†³å¯¹è±¡ä¹‹é—´å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚\nå¯è¾¾æ€§åˆ†æç®—æ³• è¿™ä¸ªç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºGC Rootsçš„å¯¹è±¡ä½œä¸ºèµ·ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢æ‰€èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾(Reference Chain)ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootsæ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿æ—¶ï¼ˆç”¨å›¾è®ºçš„è¯æ¥è¯´ï¼Œå°±æ˜¯ä»GC Rootsåˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾ï¼‰ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚ åœ¨javaè¯­è¨€ä¸­ï¼Œå¯ä½œä¸ºGC Rootsçš„å¯¹è±¡åŒ…æ‹¬ä¸‹é¢å‡ ç§ï¼š\n è™šæ‹Ÿæœºæ ˆ(å¸§æ ˆä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å˜é‡ æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ æœ¬åœ°æ–¹æ³•æ ˆä¸­(å³ä¸€èˆ¬è¯´çš„Nativeæ–¹æ³•)å¼•ç”¨çš„å¯¹è±¡  javaä¸­å¼•ç”¨çš„æ¦‚å¿µ javaå¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼šåˆ†ä¸ºå¼ºå¼•ç”¨ï¼Œè½¯å¼•ç”¨ï¼Œå¼±å¼•ç”¨ï¼Œè™šå¼•ç”¨ã€‚\n å¼ºå¼•ç”¨å°±æ˜¯åœ¨ç¨‹åºä»£ç ä¸­æ™®éå­˜åœ¨çš„ï¼Œç±»ä¼¼Object obj = new Object()è¿™ç±»çš„å¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†æ˜¯éå¿…é¡»å¾—å¯¹è±¡ã€‚ å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°éå¿…é¡»å¾—å¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¹‹å‰ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±åº”ç”¨å…³è”çš„å¯¹è±¡ã€‚ è™šå¼•ç”¨ä¹Ÿç§°ä¸ºå¹½çµå¼•ç”¨æˆ–è€…å¹»å½±å¼•ç”¨ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜äº‹ä»¶é€ æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥è·å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚  ","date":"2023-05-07T00:00:00Z","permalink":"https://jhrsya.github.io/p/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/","title":"åƒåœ¾å›æ”¶"},{"content":"postgresql postgresqlä¸‹è½½ä¸é…ç½® ubantuä¸‹è½½postgresql:\n1 2  sudo apt update sudo apt install postgresql   å¦‚ä½•éœ€è¦è®©è¿œç¨‹çš„ä¸»æœºè¿æ¥ä¸ŠæœåŠ¡å™¨ä¸Šçš„postgresqlï¼Œéœ€è¦è®¾ç½®/etc/postgresql/14/main/postgresql.confå’Œ/etc/postgresql/14/main/pg_hba.confä¸­çš„ä¸¤ä¸ªæ–‡ä»¶\næŠŠ/etc/postgresql/14/main/postgresql.confä¸­çš„listen_addressè®¾ç½®ä¸ºlisten_addresses = '*', æŠŠ/etc/postgresql/14/main/pg_hba.confä¿®æ”¹ä¸º\n1 2  # IPv4 local connections: host all all 0.0.0.0/0 trust   æ¥ç€é‡å¯æœåŠ¡sudo systemctl restart postgresql æˆ–è€…ä¸é‡å¯é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶sudo systemctl reload postgresql \npostgresqlæ“ä½œ ä½¿ç”¨psqlè¿›å…¥åçš„æ“ä½œ  æ‰§è¡Œsqlæ–‡ä»¶  1  \\i path # pathå¿…é¡»æ˜¯/æˆ–è€…\\\\è¿æ¥ï¼Œä¸èƒ½ä½¿ç”¨\\   æŸ¥çœ‹æ•°æ®åº“ä¸­æœ‰å¤šå°‘å¼ è¡¨ \\d æŸ¥çœ‹è¡¨çš„ç»“æ„ \\d table_name  ä½¿ç”¨peeweeæ“ä½œpostgresqlçš„æ–¹æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  # æŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ· users = User.select() # æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„ç”¨æˆ·,å¯ä»¥ä½¿ç”¨filterä¹Ÿå¯ä»¥ä½¿ç”¨where users = User.select().where(User.username == \u0026#39;john\u0026#39;) \u0026#34;\u0026#34;\u0026#34; filter()æ–¹æ³•æ˜¯ä¸€ä¸ªæŸ¥è¯¢æ„å»ºå™¨çš„æ–¹æ³•ï¼Œå®ƒç”¨äºå‘ç°æœ‰æŸ¥è¯¢ä¸­æ·»åŠ ç­›é€‰æ¡ä»¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æŸ¥è¯¢å¯¹è±¡ã€‚ where()æ–¹æ³•æ˜¯æŸ¥è¯¢å¯¹è±¡çš„æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šæŸ¥è¯¢æ¡ä»¶ã€‚ä¸filter()æ–¹æ³•ä¸åŒï¼Œå®ƒä¼šç›´æ¥ä¿®æ”¹å½“å‰æŸ¥è¯¢å¯¹è±¡ï¼Œå¹¶è¿”å›è‡ªèº«ã€‚ \u0026#34;\u0026#34;\u0026#34; new_query = query.filter(User.age \u0026gt; 18) query.where(User.age \u0026gt; 18) # å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº users = User.select().order_by(User.username.desc()) # å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œåˆ†é¡µ users = User.select().paginate(1, 10) # å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œèšåˆæ“ä½œ from peewee import fn total_users = User.select(fn.COUNT(User.id)) # ä½¿ç”¨Peeweeçš„ORMæ–¹æ³•è¿›è¡Œæ•°æ®åº“æ“ä½œ user = User.create(username=\u0026#39;john\u0026#39;, email=\u0026#39;john@example.com\u0026#39;, password=\u0026#39;password\u0026#39;) # ä½¿ç”¨Peeweeçš„ORMæ–¹æ³•æ›´æ–°æ•°æ®åº“ä¸­çš„è®°å½• user.email = \u0026#39;john@newemail.com\u0026#39; user.save() # ä½¿ç”¨Peeweeçš„ORMæ–¹æ³•åˆ é™¤æ•°æ®åº“ä¸­çš„è®°å½• user.delete_instance()   create 1 2 3  # ä½¿ç”¨Peeweeçš„ORMæ–¹æ³•è¿›è¡Œæ•°æ®åº“æ“ä½œ user = User.create(username=\u0026#39;john\u0026#39;, email=\u0026#39;john@example.com\u0026#39;, password=\u0026#39;password\u0026#39;) user.save()   read 1 2 3 4 5 6 7 8  # æŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ· users = User.select() # peewee.Model # æŸ¥è¯¢æŒ‡å®šæ¡ä»¶çš„ç”¨æˆ· users = User.select().where(User.username == \u0026#39;john\u0026#39;) # peewee.Model # ä½¿ç”¨filterè¿›è¡ŒæŸ¥è¯¢ï¼ŒUser.filter() ç­‰ä»·äº User.select().where() users = User.filter(User.username == \u0026#39;john\u0026#39;) # peewee.Model   åªè·å–ä¸€ä¸ªå®ä¾‹\n1  user = User.get(User.username == \u0026#39;john\u0026#39;) # User   update 1 2 3  query = User.update({User.name: \u0026#39;steve\u0026#39;}).where(User.name == \u0026#39;john\u0026#39;) affected_rows = query.execute() # affected_rowsè¿”å›å·²ç»æ›´æ–°çš„è¡Œæ•°ï¼Œ0åˆ™æ²¡æœ‰æ›´æ–°   delete 1 2 3 4  # åˆ é™¤è®°å½• query = Wallet.delete().where(Wallet.user_id == 9) affected_rows = query.execute() # affected_rowsè¿”å›å·²ç»åˆ é™¤çš„è¡Œæ•°ï¼Œ0åˆ™ä¸ºæ²¡æœ‰åˆ é™¤   ","date":"2023-05-05T00:00:00Z","permalink":"https://jhrsya.github.io/p/postgresql/","title":"postgresqlä»‹ç»"},{"content":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³• ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼ˆConsistent Hashingï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„åˆ†å¸ƒå¼å“ˆå¸Œç®—æ³•ï¼Œé€šå¸¸ç”¨äºå®ç°è´Ÿè½½å‡è¡¡å’Œç¼“å­˜ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§è§„æ¨¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„ç¤ºä¾‹ï¼š\n ç¼“å­˜ç³»ç»Ÿï¼šåœ¨ç¼“å­˜ç³»ç»Ÿä¸­ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ç”¨æ¥é€‰æ‹©ç¼“å­˜èŠ‚ç‚¹ï¼Œä»¥ä¾¿å¿«é€Ÿå­˜å‚¨å’Œæ£€ç´¢æ•°æ®ã€‚ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ä½¿ç¼“å­˜ç³»ç»Ÿä¸­çš„ç¼“å­˜èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶ï¼Œå°½å¯èƒ½å‡å°‘ç¼“å­˜èŠ‚ç‚¹çš„é‡æ–°åˆ†é…ã€‚ è´Ÿè½½å‡è¡¡ï¼šåœ¨è´Ÿè½½å‡è¡¡ä¸­ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ç”¨æ¥é€‰æ‹©æœåŠ¡å™¨ï¼Œä»¥ä¾¿å°†å®¢æˆ·ç«¯è¯·æ±‚å‡åŒ€åœ°åˆ†é…åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šã€‚ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ä¿æŒæœåŠ¡å™¨æ•°é‡çš„å˜åŒ–ï¼Œè€Œä¸éœ€è¦é‡æ–°åˆ†é…æ‰€æœ‰çš„è¯·æ±‚ã€‚ åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼šåœ¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ç”¨æ¥é€‰æ‹©èŠ‚ç‚¹ï¼Œä»¥ä¾¿å°†æ–‡ä»¶åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥é¿å…åœ¨èŠ‚ç‚¹æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦é‡æ–°åˆ†é…æ–‡ä»¶çš„é—®é¢˜ã€‚ åˆ†å¸ƒå¼æ•°æ®åº“ï¼šåœ¨åˆ†å¸ƒå¼æ•°æ®åº“ä¸­ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ç”¨æ¥é€‰æ‹©èŠ‚ç‚¹ï¼Œä»¥ä¾¿å°†æ•°æ®åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥é¿å…åœ¨èŠ‚ç‚¹æ•°é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦é‡æ–°åˆ†é…æ•°æ®çš„é—®é¢˜ã€‚  æ€»ä¹‹ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¯ä»¥ç”¨äºä»»ä½•éœ€è¦åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­åŠ¨æ€åˆ†é…å’Œé€‰æ‹©èŠ‚ç‚¹çš„åœºæ™¯ï¼Œä»¥ä¾¿å®ç°é«˜æ•ˆçš„è´Ÿè½½å‡è¡¡å’Œåˆ†å¸ƒå¼å­˜å‚¨ã€‚\nä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åœ¨nginxä¸­çš„åº”ç”¨ Nginxæ˜¯ä¸€ç§æµè¡Œçš„WebæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå®ƒä¹Ÿè¢«å¹¿æ³›ç”¨äºè´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨æ€§çš„åº”ç”¨ç¨‹åºä¸­ã€‚\nåœ¨Nginxä¸­ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•é€šå¸¸ç”¨äºå®ç°åŸºäºIPåœ°å€æˆ–å…¶ä»–è¯·æ±‚å‚æ•°çš„è´Ÿè½½å‡è¡¡ã€‚å…·ä½“æ¥è¯´ï¼ŒNginxå¯ä»¥ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æ¥é€‰æ‹©æœåŠ¡å™¨ï¼Œä»¥ä¾¿å°†è¯·æ±‚è·¯ç”±åˆ°æ­£ç¡®çš„æœåŠ¡å™¨ä¸Šã€‚\nåœ¨Nginxçš„ä¸€è‡´æ€§å“ˆå¸Œå®ç°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œæ¨¡å—æ¥å®ç°ã€‚è¯¥æ¨¡å—å¯ä»¥å°†è¯·æ±‚çš„å“ˆå¸Œå€¼æ˜ å°„åˆ°ä¸€ç»„æœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªï¼Œä»¥å®ç°è´Ÿè½½å‡è¡¡ã€‚ä¸€è‡´æ€§å“ˆå¸Œæ¨¡å—è¿˜å¯ä»¥æ”¯æŒåŠ¨æ€æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨ï¼Œå¹¶ä¿æŒè´Ÿè½½å‡è¡¡ç­–ç•¥çš„ä¸€è‡´æ€§ã€‚\nå“ˆå¸Œå‡½æ•° Nginxä½¿ç”¨äº†MurmurHashå“ˆå¸Œå‡½æ•°æ¥è®¡ç®—é”®çš„å“ˆå¸Œå€¼ã€‚MurmurHashæ˜¯ä¸€ç§é«˜æ•ˆçš„å“ˆå¸Œå‡½æ•°ï¼Œå®ƒåœ¨è®¡ç®—å“ˆå¸Œå€¼æ—¶å¯ä»¥é¿å…å“ˆå¸Œç¢°æ’ã€‚\nMurmurHashæ˜¯ä¸€ç§å¿«é€Ÿçš„éåŠ å¯†å“ˆå¸Œå‡½æ•°ï¼Œå®ƒçš„è®¾è®¡æ—¨åœ¨æä¾›è‰¯å¥½çš„éšæœºæ€§ã€å‡åŒ€æ€§å’Œé«˜æ€§èƒ½ã€‚MurmurHashçš„å“ˆå¸Œç®—æ³•æ¯”å…¶ä»–å¸¸è§çš„å“ˆå¸Œç®—æ³•å¦‚MD5å’ŒSHA-1è¦å¿«å¾—å¤šï¼Œå¹¶ä¸”åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„è´Ÿè½½å‡è¡¡å’Œæ•°æ®åˆ†ç‰‡ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚\nMurmurHashç®—æ³•çš„ä¸»è¦æ€æƒ³æ˜¯åˆ©ç”¨ä½æ“ä½œå’Œä¹˜æ³•æ¥å¤„ç†è¾“å…¥æ•°æ®ï¼Œå¹¶ä½¿ç”¨åˆ†ç¦»çš„å“ˆå¸ŒçŠ¶æ€æ¥ç”Ÿæˆå“ˆå¸Œå€¼ã€‚å…·ä½“æ¥è¯´ï¼ŒMurmurHashç®—æ³•å°†è¾“å…¥æ•°æ®æŒ‰ç…§ä¸€å®šçš„è§„åˆ™åˆ†å‰²æˆè‹¥å¹²ä¸ª32ä½çš„å—ï¼Œæ¯ä¸ªå—éƒ½ä¼šå¯¹å“ˆå¸ŒçŠ¶æ€è¿›è¡Œæ›´æ–°ï¼Œç„¶åå°†æœ€ç»ˆçš„å“ˆå¸ŒçŠ¶æ€è½¬æ¢ä¸ºå“ˆå¸Œå€¼è¾“å‡ºã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸€ä¸ªæ¥äº†ä¸€ä¸ªipåœ°å€è¯·æ±‚ï¼Œmurmurhashæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ\n  åˆå§‹åŒ–å“ˆå¸ŒçŠ¶æ€ MurmurHashç®—æ³•ä½¿ç”¨ä¸¤ä¸ª32ä½çš„å¸¸é‡æ¥åˆå§‹åŒ–å“ˆå¸ŒçŠ¶æ€ï¼Œå…¶ä¸­ä¸€ä¸ªå¸¸é‡æ˜¯éšæœºé€‰æ‹©çš„ï¼Œå¦ä¸€ä¸ªå¸¸é‡æ˜¯å›ºå®šçš„ã€‚å‡è®¾æˆ‘ä»¬é€‰æ‹©çš„éšæœºå¸¸é‡ä¸º0x5bd1e995ï¼Œå›ºå®šå¸¸é‡ä¸º0x9747b28cã€‚\n  å¤„ç†è¾“å…¥æ•°æ® æˆ‘ä»¬å°†IPåœ°å€æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è½¬æ¢ä¸º32ä½æ•´æ•°ï¼Œå¹¶å°†å…¶ä½œä¸ºè¾“å…¥æ•°æ®ã€‚å‡è®¾IPåœ°å€ä¸º192.168.1.100ï¼Œå¯¹åº”çš„32ä½æ•´æ•°ä¸º0xc0a80164ã€‚æ ¹æ®MurmurHashç®—æ³•çš„è§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ª32ä½æ•´æ•°æŒ‰ç…§å¦‚ä¸‹æ–¹å¼å¤„ç†:\n å°†32ä½æ•´æ•°åˆ†ä¸ºå››ä¸ª8ä½çš„å­—èŠ‚ï¼Œå³0xc0ã€0xa8ã€0x01å’Œ0x64ã€‚ å°†æ¯ä¸ªå­—èŠ‚è½¬æ¢ä¸º32ä½æ•´æ•°ï¼Œå³0x000000c0ã€0x000000a8ã€0x00000001å’Œ0x00000064ã€‚ å°†è¿™äº›32ä½æ•´æ•°æŒ‰ç…§ä¸€å®šçš„è§„åˆ™è¿›è¡Œä½è¿ç®—å’Œä¹˜æ³•ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„32ä½æ•´æ•°ã€‚å‡è®¾è¿™ä¸ªæ–°çš„32ä½æ•´æ•°ä¸º0x3f6e3d6fã€‚  æˆ‘ä»¬å°†ç”Ÿæˆçš„æ–°çš„32ä½æ•´æ•°0x3f6e3d6fä½œä¸ºè¾“å…¥æ•°æ®ï¼Œå¯¹å“ˆå¸ŒçŠ¶æ€è¿›è¡Œæ›´æ–°ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†æ–°çš„32ä½æ•´æ•°ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨ä¸€ä¸ªå“ˆå¸ŒçŠ¶æ€æ›´æ–°å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šå¯¹å“ˆå¸ŒçŠ¶æ€è¿›è¡Œæ··åˆï¼Œä½¿å¾—å“ˆå¸ŒçŠ¶æ€éšç€è¾“å…¥æ•°æ®çš„å˜åŒ–è€Œå˜åŒ–ã€‚\n  ç»“æŸå“ˆå¸ŒçŠ¶æ€ å½“è¾“å…¥æ•°æ®å¤„ç†å®Œæˆæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€äº›ä½è¿ç®—å’Œä¹˜æ³•æ¥ç»“æŸå“ˆå¸ŒçŠ¶æ€ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å¯¹å“ˆå¸ŒçŠ¶æ€è¿›è¡Œä¸€äº›æœ€ç»ˆçš„æ··åˆå’Œå˜æ¢ï¼Œä½¿å¾—å“ˆå¸ŒçŠ¶æ€æ»¡è¶³ä¸€å®šçš„åˆ†å¸ƒç‰¹æ€§ã€‚\n  ç”Ÿæˆå“ˆå¸Œå€¼ æœ€åï¼Œæˆ‘ä»¬å°†å“ˆå¸ŒçŠ¶æ€è½¬æ¢ä¸ºå“ˆå¸Œå€¼è¾“å‡ºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå“ˆå¸Œå€¼ä¼šè¢«æˆªå–ä¸ºå›ºå®šé•¿åº¦çš„ä½æ•°ï¼Œå¹¶è¿›è¡Œé€‚å½“çš„è°ƒæ•´å’Œå˜æ¢ï¼Œä»¥ä¿è¯å…¶æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ã€‚å‡è®¾æˆ‘ä»¬å°†å“ˆå¸Œå€¼æˆªå–ä¸º16ä½ï¼Œå³0x3d6fï¼Œä½œä¸ºIPåœ°å€çš„å“ˆå¸Œå€¼ã€‚\n  åœ¨è´Ÿè½½å‡è¡¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IPåœ°å€çš„å“ˆå¸Œå€¼æ¥å†³å®šè¯¥è¯·æ±‚åº”è¯¥ç”±å“ªä¸ªæœåŠ¡å™¨æ¥å¤„ç†ã€‚\nä¸€è‡´æ€§å“ˆå¸Œç¯ Nginxä½¿ç”¨äº†ä¸€è‡´æ€§å“ˆå¸Œç¯æ¥å­˜å‚¨æœåŠ¡å™¨èŠ‚ç‚¹å’Œé”®çš„å“ˆå¸Œå€¼ã€‚æœåŠ¡å™¨èŠ‚ç‚¹åœ¨ç¯ä¸Šåˆ†å¸ƒï¼Œå¹¶ä¸”æ¯ä¸ªé”®éƒ½å¯ä»¥æ˜ å°„åˆ°ä¸€ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ã€‚è¿™ç§è®¾è®¡å¯ä»¥ä½¿è´Ÿè½½å‡è¡¡ç­–ç•¥åœ¨æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨æ—¶ä¿æŒä¸€è‡´æ€§ã€‚\nä¸€è‡´æ€§å“ˆå¸Œç¯æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºå®ç°ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ã€‚å®ƒç”±ä¸€ä¸ªç¯å½¢ç»“æ„ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨ç¯ä¸Šå¯¹åº”ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œè¡¨ç¤ºä¸€ä¸ªæœåŠ¡å™¨æˆ–è€…èŠ‚ç‚¹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œé€šå¸¸ä½¿ç”¨32ä½æˆ–64ä½æ— ç¬¦å·æ•´æ•°ã€‚\nä¸€è‡´æ€§å“ˆå¸Œç¯çš„æ„å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š\n  è®¡ç®—æœåŠ¡å™¨å“ˆå¸Œå€¼ å¯¹äºæ¯ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨å“ˆå¸Œç®—æ³•è®¡ç®—å…¶å“ˆå¸Œå€¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æœåŠ¡å™¨çš„IPåœ°å€æˆ–è€…ä¸»æœºåä½œä¸ºè¾“å…¥æ•°æ®è¿›è¡Œå“ˆå¸Œï¼Œä»¥ä¿è¯æ¯ä¸ªæœåŠ¡å™¨çš„å“ˆå¸Œå€¼æ˜¯å”¯ä¸€çš„ã€‚\n  åœ¨ç¯ä¸Šåˆ†é…èŠ‚ç‚¹ å°†æ‰€æœ‰çš„æœåŠ¡å™¨èŠ‚ç‚¹æŒ‰ç…§å…¶å“ˆå¸Œå€¼ï¼Œåœ¨ç¯ä¸Šåˆ†é…èŠ‚ç‚¹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å“ˆå¸Œå€¼å¯¹ç¯è¿›è¡Œåˆ†ç‰‡ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªåˆ†ç‰‡ã€‚åˆ†ç‰‡çš„æ•°é‡å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œè°ƒæ•´ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œåˆ†ç‰‡çš„æ•°é‡åº”è¯¥æ¯”è¾ƒå¤§ï¼Œä»¥ä¿è¯åˆ†å¸ƒå‡åŒ€ã€‚\n  è®¡ç®—å¯¹è±¡å“ˆå¸Œå€¼ å¯¹äºæ¯ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨å“ˆå¸Œç®—æ³•è®¡ç®—å…¶å“ˆå¸Œå€¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„IDæˆ–è€…é”®å€¼ä½œä¸ºè¾“å…¥æ•°æ®è¿›è¡Œå“ˆå¸Œï¼Œä»¥ä¿è¯æ¯ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼æ˜¯å”¯ä¸€çš„ã€‚\n  åœ¨ç¯ä¸ŠæŸ¥æ‰¾èŠ‚ç‚¹ å°†å¯¹è±¡çš„å“ˆå¸Œå€¼æ˜ å°„åˆ°ç¯ä¸Šçš„æŸä¸ªèŠ‚ç‚¹ã€‚å…·ä½“æ¥è¯´ï¼Œä»å¯¹è±¡çš„å“ˆå¸Œå€¼å¼€å§‹æ²¿ç€ç¯é¡ºæ—¶é’ˆæ–¹å‘æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºè¯¥å“ˆå¸Œå€¼çš„èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¯¥èŠ‚ç‚¹ï¼Œåˆ™å°†å¯¹è±¡æ˜ å°„åˆ°ç¯ä¸Šçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n  ä¸€è‡´æ€§å“ˆå¸Œç¯çš„ä¼˜ç‚¹æ˜¯å¯ä»¥åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œè€Œä¸ä¼šå½±å“å¤§éƒ¨åˆ†å¯¹è±¡çš„æ˜ å°„ã€‚å…·ä½“æ¥è¯´ï¼Œå½“æ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ—¶ï¼Œåªæœ‰è¯¥èŠ‚ç‚¹å‘¨å›´çš„å¯¹è±¡æ˜ å°„ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå…¶ä»–èŠ‚ç‚¹çš„å¯¹è±¡æ˜ å°„ä»ç„¶ä¿æŒä¸å˜ã€‚è¿™æ ·å¯ä»¥é¿å…å¤§é‡å¯¹è±¡çš„é‡æ–°æ˜ å°„ï¼Œæé«˜ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„æ•ˆç‡å’Œå¯æ‰©å±•æ€§ã€‚\nä¸€è‡´æ€§å“ˆå¸Œç¯è¿˜å¯ä»¥ä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹æŠ€æœ¯æ¥æé«˜è´Ÿè½½å‡è¡¡çš„æ•ˆç‡å’Œç¨³å®šæ€§ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºæ¯ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œå¯ä»¥åœ¨ç¯ä¸Šåˆ†é…å¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œæ¯ä¸ªè™šæ‹ŸèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªå“ˆå¸Œå€¼ã€‚è¿™æ ·å¯ä»¥ä½¿å¾—æœåŠ¡å™¨èŠ‚ç‚¹åœ¨ç¯ä¸Šçš„åˆ†å¸ƒæ›´åŠ å‡åŒ€ï¼Œä»è€Œæé«˜è´Ÿè½½å‡è¡¡çš„æ•ˆç‡å’Œç¨³å®šæ€§ã€‚\nèŠ‚ç‚¹é€‰æ‹© å½“ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æ—¶ï¼ŒNginxä¼šè®¡ç®—è¯·æ±‚é”®çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ°ä¸€è‡´æ€§å“ˆå¸Œç¯ä¸Šã€‚ç„¶åï¼ŒNginxä¼šé€‰æ‹©æœ€è¿‘çš„æœåŠ¡å™¨èŠ‚ç‚¹ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°è¯¥èŠ‚ç‚¹ä¸Šã€‚å¦‚æœè¯¥èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œåˆ™Nginxä¼šé€‰æ‹©ä¸‹ä¸€ä¸ªæœ€è¿‘çš„èŠ‚ç‚¹ã€‚\nåŠ¨æ€æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨ åœ¨Nginxçš„ä¸€è‡´æ€§å“ˆå¸Œæ¨¡å—ä¸­ï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨ï¼Œå¹¶ä¿æŒè´Ÿè½½å‡è¡¡ç­–ç•¥çš„ä¸€è‡´æ€§ã€‚å½“æ·»åŠ æˆ–åˆ é™¤æœåŠ¡å™¨æ—¶ï¼ŒNginxä¼šé‡æ–°è®¡ç®—å“ˆå¸Œç¯ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°æ–°çš„æœåŠ¡å™¨èŠ‚ç‚¹ã€‚\n","date":"2023-05-05T00:00:00Z","permalink":"https://jhrsya.github.io/p/%E4%B8%80%E8%87%B4%E6%80%A7%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/","title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•"},{"content":"cpp å…³é”®å­— 1. volatile volatile å…³é”®å­—æ˜¯ä¸€ç§ç±»å‹ä¿®é¥°ç¬¦ï¼Œç”¨å®ƒå£°æ˜çš„ç±»å‹å˜é‡è¡¨ç¤ºå¯ä»¥è¢«æŸäº›ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹ã€‚\n2. override å‘Šè¯‰ç¼–è¯‘å™¨ä¸€å®šæ˜¯é‡å†™äº†çˆ¶ç±»çš„å‡½æ•°ï¼Œä¸ç„¶å°±ä¼šæŠ¥é”™ã€‚\n1 2 3 4 5 6 7 8 9  class A { virtual void foo(); }; class B : public A { virtual void f00(); //OKï¼Œè¿™ä¸ªå‡½æ•°æ˜¯Bæ–°å¢çš„ï¼Œä¸æ˜¯ç»§æ‰¿çš„  virtual void f0o() override; //Error, åŠ äº†overrideä¹‹åï¼Œè¿™ä¸ªå‡½æ•°ä¸€å®šæ˜¯ç»§æ‰¿è‡ªAçš„ï¼ŒAæ‰¾ä¸åˆ°å°±æŠ¥é”™ };   3. final å½“ä¸å¸Œæœ›æŸä¸ªç±»è¢«ç»§æ‰¿ï¼Œæˆ–ä¸å¸Œæœ›æŸä¸ªè™šå‡½æ•°è¢«é‡å†™ï¼Œå¯ä»¥åœ¨ç±»åå’Œè™šå‡½æ•°åæ·»åŠ finalå…³é”®å­—ï¼Œæ·»åŠ finalå…³é”®å­—åè¢«ç»§æ‰¿æˆ–é‡å†™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  class Base { virtual void foo(); }; class A : public Base { void foo() final; // foo è¢«overrideå¹¶ä¸”æ˜¯æœ€åä¸€ä¸ªoverrideï¼Œåœ¨å…¶å­ç±»ä¸­ä¸å¯ä»¥é‡å†™ }; class B final : A // æŒ‡æ˜Bæ˜¯ä¸å¯ä»¥è¢«ç»§æ‰¿çš„ { void foo() override; // Error: åœ¨Aä¸­å·²ç»è¢«finaläº† }; class C : B // Error: B is final { };   4. explicit explicitä¿®é¥°æ„é€ å‡½æ•°æ—¶ï¼Œå¦‚æœæ„é€ å‡½æ•°å­˜åœ¨éšå¼è½¬æ¢ï¼Œç¼–è¯‘æ—¶ä¼šæŠ¥é”™ã€‚åªèƒ½æ˜¾ç¤ºçš„ä½¿ç”¨æ„é€ å‡½æ•°ã€‚\n5. static å½“staticç”¨äºå˜é‡æ—¶ï¼Œå®ƒå¯ä»¥ç”¨äºæ§åˆ¶å˜é‡çš„å¯è§èŒƒå›´ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå˜é‡è¢«å£°æ˜ä¸ºstaticï¼Œé‚£ä¹ˆå®ƒåªèƒ½åœ¨å½“å‰æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œè€Œæ— æ³•è¢«å…¶ä»–æ–‡ä»¶è®¿é—®ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å˜é‡è¢«æ„å¤–ä¿®æ”¹æˆ–è€…åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­å‡ºç°å‘½åå†²çªã€‚\nå½“staticç”¨äºå‡½æ•°æ—¶ï¼Œå®ƒå¯ä»¥ç”¨äºæ§åˆ¶å‡½æ•°çš„å¯è§èŒƒå›´ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸ºstaticï¼Œé‚£ä¹ˆå®ƒåªèƒ½åœ¨å½“å‰æ–‡ä»¶ä¸­ä½¿ç”¨ï¼Œè€Œæ— æ³•è¢«å…¶ä»–æ–‡ä»¶è°ƒç”¨ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å‡½æ•°åªè¢«ç”¨äºå½“å‰æ–‡ä»¶ï¼Œé¿å…äº†å‡½æ•°åå†²çªå’Œé‡å¤å®šä¹‰çš„é—®é¢˜ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œstaticè¿˜å¯ä»¥ç”¨äºç±»çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼Œæ­¤æ—¶å®ƒçš„ä½œç”¨ç±»ä¼¼äºåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹çš„å˜é‡å’Œå‡½æ•°ã€‚å¯¹äºstaticæˆå‘˜å˜é‡ï¼Œæ‰€æœ‰ç±»çš„å®ä¾‹éƒ½å…±äº«åŒä¸€ä¸ªå˜é‡ï¼Œå¯¹å®ƒçš„ä¿®æ”¹ä¼šå½±å“æ‰€æœ‰å®ä¾‹ã€‚å¯¹äºstaticæˆå‘˜å‡½æ•°ï¼Œå®ƒä¸ä¼šè®¿é—®ä»»ä½•å®ä¾‹æ•°æ®ï¼Œä¹Ÿä¸éœ€è¦thisæŒ‡é’ˆï¼Œå› æ­¤å¯ä»¥ç›´æ¥é€šè¿‡ç±»åæ¥è°ƒç”¨ã€‚\næ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼å‡½æ•° éƒ½æ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„å€¼å¤åˆ¶ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼›ä½†æ˜¯å…¶ç»“æœå´æœ‰äº›ä¸åŒï¼Œæ‹·è´æ„é€ å‡½æ•°ä½¿ç”¨ä¼ å…¥å¯¹è±¡çš„å€¼ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡çš„å®ä¾‹ï¼Œè€Œèµ‹å€¼è¿ç®—ç¬¦æ˜¯å°†å¯¹è±¡çš„å€¼å¤åˆ¶ç»™ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®ä¾‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  #include \u0026lt;cstring\u0026gt; class MyString { public: // æ„é€ å‡½æ•°  MyString() { m_data = new char[1]; *m_data = \u0026#39;\\0\u0026#39;; } MyString(const char* str) { if (str == nullptr) { m_data = new char[1]; *m_data = \u0026#39;\\0\u0026#39;; } else { int len = strlen(str); m_data = new char[len + 1]; strcpy(m_data, str); } } // æ‹·è´æ„é€ å‡½æ•°  MyString(const MyString\u0026amp; other) { int len = strlen(other.m_data); m_data = new char[len + 1]; strcpy(m_data, other.m_data); } // æ‹·è´èµ‹å€¼å‡½æ•°  MyString\u0026amp; operator=(const MyString\u0026amp; other) { if (this != \u0026amp;other) { char* tmp = new char[strlen(other.m_data) + 1]; strcpy(tmp, other.m_data); delete[] m_data; m_data = tmp; } return *this; } // ææ„å‡½æ•°  ~MyString() { delete[] m_data; } private: char* m_data; };   é‡æŒ‡é’ˆå’Œæ‚¬ç©ºæŒ‡é’ˆ é‡æŒ‡é’ˆï¼šæ²¡æœ‰è¢«åˆå§‹åŒ–çš„æŒ‡é’ˆã€‚ æ‚¬ç©ºæŒ‡é’ˆï¼šæœ€åˆæŒ‡å‘çš„å†…å­˜å·²ç»è¢«é‡Šæ”¾äº†çš„ä¸€ç§æŒ‡é’ˆã€‚\näº§ç”ŸåŸå› åŠè§£å†³åŠæ³•ï¼š é‡æŒ‡é’ˆï¼šæŒ‡é’ˆå˜é‡æœªåŠæ—¶åˆå§‹åŒ– =\u0026gt; å®šä¹‰æŒ‡é’ˆå˜é‡åŠæ—¶åˆå§‹åŒ–ï¼Œè¦ä¹ˆç½®ç©ºã€‚ æ‚¬ç©ºæŒ‡é’ˆï¼šæŒ‡é’ˆfreeæˆ–deleteä¹‹åæ²¡æœ‰åŠæ—¶ç½®ç©º =\u0026gt; é‡Šæ”¾æ“ä½œåç«‹å³ç½®ç©ºã€‚\nå†…è”å‡½æ•°å’Œå®å®šä¹‰çš„åŒºåˆ«  åœ¨ä½¿ç”¨æ—¶ï¼Œå®åªåšç®€å•å­—ç¬¦ä¸²æ›¿æ¢ï¼ˆç¼–è¯‘å‰ï¼‰ã€‚è€Œå†…è”å‡½æ•°å¯ä»¥è¿›è¡Œå‚æ•°ç±»å‹æ£€æŸ¥ï¼ˆç¼–è¯‘æ—¶ï¼‰ï¼Œä¸”å…·æœ‰è¿”å›å€¼ã€‚ å†…è”å‡½æ•°åœ¨ç¼–è¯‘æ—¶ç›´æ¥å°†å‡½æ•°ä»£ç åµŒå…¥åˆ°ç›®æ ‡ä»£ç ä¸­ï¼Œçœå»å‡½æ•°è°ƒç”¨çš„å¼€é”€æ¥æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå¹¶ä¸”è¿›è¡Œå‚æ•°ç±»å‹æ£€æŸ¥ï¼Œå…·æœ‰è¿”å›å€¼ï¼Œå¯ä»¥å®ç°é‡è½½ã€‚ å®å®šä¹‰æ—¶è¦æ³¨æ„ä¹¦å†™ï¼ˆå‚æ•°è¦æ‹¬èµ·æ¥ï¼‰å¦åˆ™å®¹æ˜“å‡ºç°æ­§ä¹‰ï¼Œå†…è”å‡½æ•°ä¸ä¼šäº§ç”Ÿæ­§ä¹‰ã€‚ å†…è”å‡½æ•°æœ‰ç±»å‹æ£€æµ‹ã€è¯­æ³•åˆ¤æ–­ç­‰åŠŸèƒ½ï¼Œè€Œå®æ²¡æœ‰ã€‚  å†…è”å‡½æ•°é€‚ç”¨åœºæ™¯:\n ä½¿ç”¨å®å®šä¹‰çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ inline å‡½æ•°ã€‚ ä½œä¸ºç±»æˆå‘˜æ¥å£å‡½æ•°æ¥è¯»å†™ç±»çš„ç§æœ‰æˆå‘˜æˆ–è€…ä¿æŠ¤æˆå‘˜ï¼Œä¼šæé«˜æ•ˆç‡ã€‚  åœ¨ Java ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— final æ¥ä¿®é¥°æ–¹æ³•ï¼Œä½¿å…¶æˆä¸º final æ–¹æ³•ï¼Œä»è€Œåœ¨ç¼–è¯‘æœŸé—´å®ç°ç±»ä¼¼äº inline å‡½æ•°çš„æ•ˆæœã€‚final æ–¹æ³•åœ¨ç¼–è¯‘æœŸé—´ä¼šè¢«ç›´æ¥æ›¿æ¢åˆ°è°ƒç”¨è¯¥æ–¹æ³•çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯åƒæ™®é€šæ–¹æ³•ä¸€æ ·éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½åŠ¨æ€ç»‘å®šã€‚\nåœ¨ Go è¯­è¨€ä¸­ï¼Œæ²¡æœ‰ç±»ä¼¼äº C++ ä¸­çš„ inline å…³é”®å­—ï¼Œä½†æ˜¯ Go ç¼–è¯‘å™¨ä¼šåœ¨é€‚å½“çš„æƒ…å†µä¸‹è‡ªåŠ¨å°†å‡½æ•°å†…è”ã€‚Go ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æ—¶è¿›è¡Œå‡½æ•°å†…è”ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å‡½æ•°è°ƒç”¨çš„å¼€é”€ï¼Œæé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚\nvolatileã€mutableå’Œexplicitå…³é”®å­—çš„ç”¨æ³• volatileå®šä¹‰å˜é‡çš„å€¼æ˜¯æ˜“å˜çš„ï¼Œæ¯æ¬¡ç”¨åˆ°è¿™ä¸ªå˜é‡çš„å€¼çš„æ—¶å€™éƒ½è¦å»é‡æ–°è¯»å–è¿™ä¸ªå˜é‡çš„å€¼ï¼Œè€Œä¸æ˜¯è¯»å¯„å­˜å™¨å†…çš„å¤‡ä»½ã€‚å¤šçº¿ç¨‹ä¸­è¢«å‡ ä¸ªä»»åŠ¡å…±äº«çš„å˜é‡éœ€è¦å®šä¹‰ä¸ºvolatileç±»å‹ã€‚\nmutableè¡¨ç¤ºå¯å˜çš„ï¼Œåœ¨å¸¸å‡½æ•°é‡Œä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  class person { int m_A; mutable int m_B;//ç‰¹æ®Šå˜é‡ åœ¨å¸¸å‡½æ•°é‡Œå€¼ä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ public: void add() const//åœ¨å‡½æ•°é‡Œä¸å¯ä¿®æ”¹thisæŒ‡é’ˆæŒ‡å‘çš„å€¼ å¸¸é‡æŒ‡é’ˆ  { m_A=10;//é”™è¯¯ ä¸å¯ä¿®æ”¹å€¼ï¼Œthiså·²ç»è¢«ä¿®é¥°ä¸ºå¸¸é‡æŒ‡é’ˆ  m_B=20;//æ­£ç¡®  } } class person { int m_A; mutable int m_B;//ç‰¹æ®Šå˜é‡ åœ¨å¸¸å‡½æ•°é‡Œå€¼ä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ } int main() { const person p;//ä¿®é¥°å¸¸å¯¹è±¡ ä¸å¯ä¿®æ”¹ç±»æˆå‘˜çš„å€¼ p.m_A=10;//é”™è¯¯ï¼Œè¢«ä¿®é¥°äº†æŒ‡é’ˆå¸¸é‡ p.m_B=200;//æ­£ç¡®ï¼Œç‰¹æ®Šå˜é‡ï¼Œä¿®é¥°äº†mutable }   explicitå…³é”®å­—ç”¨æ¥ä¿®é¥°ç±»çš„æ„é€ å‡½æ•°ï¼Œè¢«ä¿®é¥°çš„æ„é€ å‡½æ•°çš„ç±»ï¼Œä¸èƒ½å‘ç”Ÿç›¸åº”çš„éšå¼ç±»å‹è½¬æ¢ï¼Œåªèƒ½ä»¥æ˜¾ç¤ºçš„æ–¹å¼è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\n explicit å…³é”®å­—åªèƒ½ç”¨äºç±»å†…éƒ¨çš„æ„é€ å‡½æ•°å£°æ˜ä¸Š explicit å…³é”®å­—ä½œç”¨äºå•ä¸ªå‚æ•°çš„æ„é€ å‡½æ•° è¢«explicitä¿®é¥°çš„æ„é€ å‡½æ•°çš„ç±»ï¼Œä¸èƒ½å‘ç”Ÿç›¸åº”çš„éšå¼ç±»å‹è½¬æ¢  RAII(èµ„æºè·å–å³åˆå§‹åŒ–) åŸå› ï¼šåœ¨å¯¹è±¡åˆå§‹åŒ–æ—¶ï¼Œå¦‚æœè°ƒç”¨æ„é€ å‡½æ•°æ—¶å‘ç”Ÿäº†å¼‚å¸¸ï¼Œè¿™ä¹‹å‰å·²ç»è°ƒç”¨äº†operator newå‡½æ•°åˆ†é…äº†å†…å­˜ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œè§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨try-catchå—æ¥æ•è·æ„é€ å‡½æ•°ä¸­çš„å¼‚å¸¸ï¼Œå¹¶åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶æ˜¾å¼åœ°è°ƒç”¨ operator delete å‡½æ•°ä»¥é‡Šæ”¾å·²åˆ†é…çš„å†…å­˜ã€‚\nä½†æ˜¯ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆæ˜¾ç„¶å¤ªéº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨RAIIæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ RAIIï¼ˆèµ„æºè·å–å³åˆå§‹åŒ–ï¼‰æ˜¯ä¸€ç§C++ç¼–ç¨‹æŠ€æœ¯ï¼Œå®ƒåˆ©ç”¨äº†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ¥ç®¡ç†èµ„æºã€‚é€šè¿‡åœ¨å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­è·å–èµ„æºï¼Œåœ¨å¯¹è±¡çš„ææ„å‡½æ•°ä¸­é‡Šæ”¾èµ„æºï¼Œå¯ä»¥ç¡®ä¿åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æ­£ç¡®åœ°é‡Šæ”¾èµ„æºï¼Œä»è€Œé¿å…å†…å­˜æ³„æ¼ç­‰é—®é¢˜ã€‚\nå½“ RAII å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œæ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼Œå¹¶åˆ†é…äº†ç›¸åº”çš„èµ„æºï¼›å½“ RAII å¯¹è±¡è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œææ„å‡½æ•°è¢«è‡ªåŠ¨è°ƒç”¨ï¼Œä»¥é‡Šæ”¾ä¹‹å‰åˆ†é…çš„èµ„æºã€‚å¦‚æœæ„é€ å‡½æ•°ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™è¯¥ RAII å¯¹è±¡çš„æ„é€ æœªèƒ½æˆåŠŸå®Œæˆï¼Œå› æ­¤è¯¥å¯¹è±¡ä¸åº”è¯¥ç»§ç»­å­˜åœ¨ã€‚å› æ­¤ï¼ŒC++ ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°æ¥æ¸…ç†è¯¥å¯¹è±¡å ç”¨çš„èµ„æºã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36  class Resource { public: Resource() { // åˆ†é…å†…å­˜  m_data = new int[100]; } ~Resource() { // é‡Šæ”¾å†…å­˜  delete[] m_data; } private: int* m_data; }; class MyClass { public: MyClass() { // åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨èµ„æºç®¡ç†ç±»åˆ†é…å†…å­˜  m_resource = new (std::nothrow) Resource; if (!m_resource) { // å¤„ç†å†…å­˜åˆ†é…å¤±è´¥çš„æƒ…å†µ  throw std::bad_alloc(); } } ~MyClass() { // åœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾å†…å­˜  delete m_resource; } private: Resource* m_resource; };   åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† C++11 ä¸­çš„ std::nothrowï¼Œå®ƒè¡¨ç¤ºå¦‚æœå†…å­˜åˆ†é…å¤±è´¥ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆã€‚å¦‚æœå†…å­˜åˆ†é…å¤±è´¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­å¤„ç†è¿™ç§æƒ…å†µï¼Œä¾‹å¦‚æŠ›å‡º std::bad_alloc å¼‚å¸¸ï¼Œç„¶åå¤–éƒ¨çš„ä»£ç å°±å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå¤„ç†ã€‚\né›¶æ‹·è´ é›¶æ‹·è´æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå®ƒå¯ä»¥åœ¨ä¸å¤åˆ¶æ•°æ®çš„æƒ…å†µä¸‹ï¼Œåœ¨ä¸åŒçš„è¿›ç¨‹æˆ–çº¿ç¨‹ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚ é›¶æ‹·è´å°±æ˜¯ä¸€ç§é¿å… CPU å°†æ•°æ®ä»ä¸€å—å­˜å‚¨æ‹·è´åˆ°å¦å¤–ä¸€å—å­˜å‚¨çš„æŠ€æœ¯ã€‚ é›¶æ‹·è´æŠ€æœ¯å¯ä»¥å‡å°‘æ•°æ®æ‹·è´å’Œå…±äº«æ€»çº¿æ“ä½œçš„æ¬¡æ•°ã€‚ åœ¨C++ä¸­ï¼Œvectorçš„ä¸€ä¸ªæˆå‘˜å‡½æ•°**emplace_back()**å¾ˆå¥½åœ°ä½“ç°äº†é›¶æ‹·è´æŠ€æœ¯ï¼Œå®ƒè·Ÿpush_back()å‡½æ•°ä¸€æ ·å¯ä»¥å°†ä¸€ä¸ªå…ƒç´ æ’å…¥å®¹å™¨å°¾éƒ¨ï¼ŒåŒºåˆ«åœ¨äºï¼šä½¿ç”¨push_back()å‡½æ•°éœ€è¦è°ƒç”¨æ„é€ å‡½æ•°å’Œè½¬ç§»æ„é€ å‡½æ•°ï¼Œè€Œä½¿ç”¨emplace_back()æ’å…¥çš„å…ƒç´ åŸåœ°æ„é€ ï¼Œä¸éœ€è¦è§¦å‘æ„é€ å‡½æ•°å’Œè½¬ç§»æ„é€ å‡½æ•°ï¼Œæ•ˆç‡æ›´é«˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43  #include \u0026lt;vector\u0026gt;#include \u0026lt;string\u0026gt;#include \u0026lt;iostream\u0026gt;using namespace std; struct Person { string name; int age; //åˆå§‹æ„é€ å‡½æ•°  Person(string p_name, int p_age): name(std::move(p_name)), age(p_age) { cout \u0026lt;\u0026lt; \u0026#34;I have been constructed\u0026#34; \u0026lt;\u0026lt;endl; } //æ‹·è´æ„é€ å‡½æ•°  Person(const Person\u0026amp; other): name(std::move(other.name)), age(other.age) { cout \u0026lt;\u0026lt; \u0026#34;I have been copy constructed\u0026#34; \u0026lt;\u0026lt;endl; } //è½¬ç§»æ„é€ å‡½æ•°  Person(Person\u0026amp;\u0026amp; other): name(std::move(other.name)), age(other.age) { cout \u0026lt;\u0026lt; \u0026#34;I have been moved\u0026#34;\u0026lt;\u0026lt;endl; } }; int main() { vector\u0026lt;Person\u0026gt; e; cout \u0026lt;\u0026lt; \u0026#34;emplace_back:\u0026#34; \u0026lt;\u0026lt;endl; e.emplace_back(\u0026#34;Jane\u0026#34;, 23); //ä¸ç”¨æ„é€ ç±»å¯¹è±¡  vector\u0026lt;Person\u0026gt; p; cout \u0026lt;\u0026lt; \u0026#34;push_back:\u0026#34;\u0026lt;\u0026lt;endl; p.push_back(Person(\u0026#34;Mike\u0026#34;,36)); return 0; } //è¾“å‡ºç»“æœï¼š //emplace_back: //I have been constructed //push_back: //I have been constructed //I am being moved.   å³å€¼ å³å€¼å¼•ç”¨ä½¿ç”¨ \u0026amp;\u0026amp; ç¬¦å·è¡¨ç¤ºã€‚ åœ¨ C++ ä¸­ï¼Œå³å€¼æŒ‡çš„æ˜¯é‚£äº›åœ¨è¡¨è¾¾å¼æ±‚å€¼æœŸé—´åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡ã€å­—é¢å¸¸é‡ã€è¡¨è¾¾å¼ã€è¿”å›å³å€¼å¼•ç”¨çš„å‡½æ•°è°ƒç”¨ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸´æ—¶çš„ã€çŸ­æš‚çš„ï¼Œä¸èƒ½è¢«æŒä¹…åŒ–æˆ–ä¿®æ”¹ï¼Œå› æ­¤å³å€¼åªèƒ½è¢«æ‹·è´æˆ–ç§»åŠ¨ï¼Œä¸èƒ½è¢«èµ‹å€¼æˆ–å–åœ°å€ã€‚ å³å€¼å¼•ç”¨é€šå¸¸ç”¨äºå®ç°ç§»åŠ¨è¯­ä¹‰å’Œå®Œç¾è½¬å‘ã€‚ç§»åŠ¨è¯­ä¹‰å¯ä»¥é¿å…åœ¨èµ„æºç®¡ç†ç±»ä¸­è¿›è¡Œä¸å¿…è¦çš„å¤åˆ¶æ“ä½œï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚å®Œç¾è½¬å‘å¯ä»¥å®ç°å°†å‚æ•°æŒ‰åŸæ ·ä¼ é€’ç»™ä¸‹ä¸€å±‚å‡½æ•°ï¼ŒåŒæ—¶é¿å…ä¸å¿…è¦çš„å¤åˆ¶æ“ä½œã€‚ ä¸¾ä¸ªå®Œç¾è½¬å‘çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  #include \u0026lt;iostream\u0026gt;#include \u0026lt;utility\u0026gt; void foo(int \u0026amp;x) { std::cout \u0026lt;\u0026lt; \u0026#34;foo(int\u0026amp;): \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; std::endl; } void foo(int \u0026amp;\u0026amp;x) { std::cout \u0026lt;\u0026lt; \u0026#34;foo(int\u0026amp;\u0026amp;): \u0026#34; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; std::endl; } template\u0026lt;typename T\u0026gt; void bar(T \u0026amp;\u0026amp;x) { foo(std::forward\u0026lt;T\u0026gt;(x)); } int main() { int x = 42; bar(x); // è¾“å‡º foo(int\u0026amp;): 42  bar(3); // è¾“å‡º foo(int\u0026amp;\u0026amp;): 3  bar(std::move(x)); // è¾“å‡º foo(int\u0026amp;\u0026amp;): 42 å®Œç¾è½¬å‘  return 0; }   ç»„åˆ æ˜¯has-açš„å…³ç³»ã€‚ åœ¨C++ä¸­ï¼Œç»„åˆï¼ˆCompositionï¼‰æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºå®¹å™¨ç±»ï¼‰åŒ…å«å¦å¤–ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºæˆå‘˜ç±»ï¼‰çš„å¯¹è±¡ä½œä¸ºè‡ªå·±çš„æˆå‘˜ã€‚ç»„åˆå®ç°äº†ä»£ç çš„å¤ç”¨ï¼Œä½¿å¾—ä¸€ä¸ªç±»å¯ä»¥é‡ç”¨å¦ä¸€ä¸ªç±»çš„å®ç°è€Œä¸å¿…ä»å¤´å¼€å§‹ç¼–å†™ä»£ç ã€‚\né€šè¿‡ç»„åˆï¼Œä¸€ä¸ªç±»å¯ä»¥å°†å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½é›†æˆåˆ°è‡ªå·±çš„åŠŸèƒ½ä¸­ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ±½è½¦ç±»å¯ä»¥åŒ…å«ä¸€ä¸ªå¼•æ“ç±»çš„å¯¹è±¡ï¼Œä»è€Œå®ç°æ±½è½¦çš„åŠ¨åŠ›ç³»ç»Ÿã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œä¸€ä¸ªå›¾å½¢ç±»å¯ä»¥åŒ…å«ä¸€ä¸ªç‚¹ç±»çš„å¯¹è±¡ï¼Œä»è€Œå®ç°å›¾å½¢çš„å®šä½å’Œå½¢çŠ¶ã€‚\nåœ¨C++ä¸­ï¼Œç»„åˆçš„å®ç°æ–¹å¼æ˜¯å°†æˆå‘˜å¯¹è±¡ä½œä¸ºå®¹å™¨ç±»çš„ç§æœ‰æˆå‘˜å˜é‡ã€‚å®¹å™¨ç±»å¯ä»¥é€šè¿‡è°ƒç”¨æˆå‘˜å¯¹è±¡çš„å…¬å…±æ¥å£æ¥è®¿é—®å’Œæ“ä½œæˆå‘˜å¯¹è±¡çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚ç”±äºæˆå‘˜å¯¹è±¡æ˜¯å®¹å™¨ç±»çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æˆå‘˜å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå®¹å™¨ç±»çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€æ ·çš„ã€‚\nå‡½æ•°æŒ‡é’ˆ å‡½æ•°æŒ‡é’ˆæ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå˜é‡ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨å’Œè°ƒç”¨å‡½æ•°ã€‚åœ¨C++ä¸­ï¼Œå‡½æ•°åå¯ä»¥è§†ä¸ºä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼Œå› æ­¤å¯ä»¥å°†å‡½æ•°åèµ‹å€¼ç»™ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå˜é‡ï¼Œç„¶åé€šè¿‡è¯¥å˜é‡æ¥è°ƒç”¨å‡½æ•°ã€‚ å‡½æ•°æŒ‡é’ˆçš„è¯­æ³•å¦‚ä¸‹ï¼šreturn-type (*pointer-name)(argument-list);\nå‡½æ•°æŒ‡é’ˆå¯ä»¥ç”¨æ¥ä¼ é€’å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…ç”¨æ¥è¿”å›å‡½æ•°ä½œä¸ºè¿”å›å€¼ã€‚è¿™åœ¨ä¸€äº›é«˜çº§çš„ç¼–ç¨‹åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚å›è°ƒå‡½æ•°ã€å‡½æ•°å¯¹è±¡ç­‰ã€‚ å‡½æ•°å¯¹è±¡æ˜¯ä¸€ç§å°†å‡½æ•°å°è£…ä¸ºå¯¹è±¡çš„æŠ€æœ¯ã€‚é€šè¿‡å‡½æ•°å¯¹è±¡ï¼Œå¯ä»¥å°†å‡½æ•°ä¸æ•°æ®ç»“æ„ç›¸ç»“åˆï¼Œå½¢æˆä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ï¼Œä»è€Œå®ç°æ›´åŠ çµæ´»çš„ç¨‹åºè®¾è®¡ã€‚å‡½æ•°å¯¹è±¡å¹¿æ³›åº”ç”¨äºæ ‡å‡†æ¨¡æ¿åº“ï¼ˆSTLï¼‰ä¸­ï¼Œä¾‹å¦‚åœ¨ç®—æ³•ä¸­ä¼ é€’æ¯”è¾ƒå‡½æ•°ã€æ’åºå‡½æ•°ç­‰ã€‚\nä¸¾ä¾‹å¦‚ä½•ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæ¥å®ç°å›è°ƒå‡½æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33  #include \u0026lt;iostream\u0026gt;using namespace std; // åŠ æ³•å‡½æ•° int add(int a, int b) { return a + b; } // å‡æ³•å‡½æ•° int subtract(int a, int b) { return a - b; } // è®¡ç®—å‡½æ•° int calculate(int a, int b, int (*p)(int, int)) { return p(a, b); } int main() { int a = 3, b = 4; int result; // ä½¿ç”¨åŠ æ³•å‡½æ•°è¿›è¡Œè®¡ç®—  result = calculate(a, b, add); cout \u0026lt;\u0026lt; \u0026#34;Addition result: \u0026#34; \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; // ä½¿ç”¨å‡æ³•å‡½æ•°è¿›è¡Œè®¡ç®—  result = calculate(a, b, subtract); cout \u0026lt;\u0026lt; \u0026#34;Subtraction result: \u0026#34; \u0026lt;\u0026lt; result \u0026lt;\u0026lt; endl; return 0; }   å†…å­˜å¯¹é½ å†…å­˜å¯¹é½ï¼ˆMemory Alignmentï¼‰æ˜¯æŒ‡åœ¨è®¡ç®—æœºä¸­ä¸ºäº†æé«˜æ•°æ®è¯»å–æ•ˆç‡è€Œé‡‡å–çš„ä¸€ç§æ•°æ®å¯¹é½æ–¹å¼ã€‚åœ¨C++ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç»“æ„ä½“ä¸­æˆå‘˜å˜é‡çš„æ•°æ®ç±»å‹å’Œé¡ºåºæ¥å†³å®šå¦‚ä½•åˆ†é…å†…å­˜ï¼Œä»¥ä¿è¯æ¯ä¸ªæˆå‘˜å˜é‡è¢«æ­£ç¡®åœ°å¯¹é½ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºæ¯ä¸ªæˆå‘˜å˜é‡ï¼Œç¼–è¯‘å™¨ä¼šå°†å…¶åˆ†é…åœ¨åœ°å€å¯ä»¥è¢«å…¶å¤§å°æ•´é™¤çš„ä½ç½®ä¸Šï¼Œä»¥ç¡®ä¿è¯»å–æ—¶èƒ½å¤Ÿé«˜æ•ˆåœ°è®¿é—®ã€‚\nå†…å­˜å¯¹é½å¯ä»¥æé«˜æ•°æ®è¯»å–æ•ˆç‡çš„åŸå› æ˜¯ï¼Œå½“æ•°æ®è¢«å­˜å‚¨åˆ°å†…å­˜ä¸­æ—¶ï¼Œè®¡ç®—æœºé€šå¸¸ä¼šå°†æ•°æ®ä¸€æ¬¡æ€§è¯»å–åˆ°ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿å¿«é€Ÿè®¿é—®ã€‚å¦‚æœæ•°æ®æ²¡æœ‰æŒ‰ç…§ç‰¹å®šçš„å¯¹é½æ–¹å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè¯»å–æ—¶å°±éœ€è¦é¢å¤–çš„å¤„ç†ï¼Œä»è€Œå¯¼è‡´è¯»å–æ•ˆç‡é™ä½ã€‚\nå…±äº«å†…å­˜çš„å®ç°æ–¹å¼ å…±äº«å†…å­˜æ˜¯æŒ‡å¤šä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶è®¿é—®åŒä¸€ä¸ªç‰©ç†å†…å­˜åŒºåŸŸï¼Œå®ƒæ˜¯å®ç°è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥æé«˜è¿›ç¨‹é—´é€šä¿¡çš„æ•ˆç‡ã€‚\nå…±äº«å†…å­˜çš„å®ç°æ–¹å¼ä¸»è¦æœ‰ä¸¤ç§ï¼šåŸºäºæ–‡ä»¶å’ŒåŸºäºåŒ¿åæ˜ å°„ã€‚\nåŸºäºæ–‡ä»¶çš„å…±äº«å†…å­˜å®ç°æ–¹å¼ï¼šå°†å…±äº«å†…å­˜æ˜ å°„åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡è®¿é—®è¯¥æ–‡ä»¶æ¥è®¿é—®å…±äº«å†…å­˜ã€‚å…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰ä½¿ç”¨shmget()å‡½æ•°åˆ›å»ºæˆ–æ‰“å¼€ä¸€ä¸ªå…±äº«å†…å­˜å¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚ ï¼ˆ2ï¼‰ä½¿ç”¨shmat()å‡½æ•°å°†å…±äº«å†…å­˜å¯¹è±¡æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ã€‚ ï¼ˆ3ï¼‰å¤šä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡è®¿é—®å…±äº«å†…å­˜å¯¹è±¡æ‰€åœ¨çš„æ–‡ä»¶æ¥è®¿é—®å…±äº«å†…å­˜ã€‚ ï¼ˆ4ï¼‰ä½¿ç”¨shmdt()å‡½æ•°å°†å…±äº«å†…å­˜å¯¹è±¡ä»è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­åˆ†ç¦»ã€‚ ï¼ˆ5ï¼‰ä½¿ç”¨shmctl()å‡½æ•°æ§åˆ¶å…±äº«å†…å­˜å¯¹è±¡ã€‚\nåŸºäºåŒ¿åæ˜ å°„çš„å…±äº«å†…å­˜å®ç°æ–¹å¼ï¼šä¸éœ€è¦æ˜ å°„åˆ°æ–‡ä»¶ä¸­ï¼Œç›´æ¥å°†å…±äº«å†…å­˜æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­ã€‚å…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰ä½¿ç”¨mmap()å‡½æ•°åˆ›å»ºä¸€ä¸ªåŒ¿åæ˜ å°„åŒºåŸŸï¼Œè¯¥åŒºåŸŸè¢«å¤šä¸ªè¿›ç¨‹å…±äº«ã€‚ ï¼ˆ2ï¼‰å¤šä¸ªè¿›ç¨‹å¯ä»¥é€šè¿‡è®¿é—®è¯¥åŒ¿åæ˜ å°„åŒºåŸŸæ¥è®¿é—®å…±äº«å†…å­˜ã€‚ ï¼ˆ3ï¼‰ä½¿ç”¨munmap()å‡½æ•°é‡Šæ”¾åŒ¿åæ˜ å°„åŒºåŸŸã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨å…±äº«å†…å­˜æ—¶éœ€è¦è€ƒè™‘è¿›ç¨‹é—´åŒæ­¥çš„é—®é¢˜ï¼Œä»¥é¿å…æ•°æ®çš„ä¸ä¸€è‡´æ€§ã€‚å¯ä»¥ä½¿ç”¨ä¿¡å·é‡ç­‰è¿›ç¨‹é—´åŒæ­¥æœºåˆ¶æ¥ä¿è¯å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«å†…å­˜çš„è®¿é—®é¡ºåºå’Œæ­£ç¡®æ€§ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘å…±äº«å†…å­˜çš„å¤§å°å’Œé‡Šæ”¾é—®é¢˜ï¼Œé¿å…å†…å­˜æ³„æ¼å’Œè¿‡åº¦å ç”¨å†…å­˜ç­‰é—®é¢˜ã€‚\nåŒ¿åå‡½æ•° C++ä¸­å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼å®šä¹‰åŒ¿åå‡½æ•°ã€‚lambdaè¡¨è¾¾å¼æ˜¯C++11å¼•å…¥çš„ä¸€ç§è¯­æ³•ï¼Œç”¨äºå®šä¹‰åŒ¿åå‡½æ•°ã€‚\nlambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š [capture-list](parameter-list) -\u0026gt; return-type { function-body }\nå…¶ä¸­ï¼š\n capture-listè¡¨ç¤ºæ•è·åˆ—è¡¨ï¼Œç”¨äºæ•è·å¤–éƒ¨å˜é‡ã€‚ parameter-listè¡¨ç¤ºå‚æ•°åˆ—è¡¨ï¼Œä¸æ™®é€šå‡½æ•°çš„å‚æ•°åˆ—è¡¨ç±»ä¼¼ã€‚ return-typeè¡¨ç¤ºè¿”å›å€¼ç±»å‹ï¼Œå¯ä»¥çœç•¥ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ¨å¯¼ã€‚ function-bodyè¡¨ç¤ºå‡½æ•°ä½“ï¼Œä¸æ™®é€šå‡½æ•°çš„å‡½æ•°ä½“ç±»ä¼¼ã€‚  æ— æ•è·åˆ—è¡¨ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  #include \u0026lt;iostream\u0026gt; int main() { // å®šä¹‰ä¸€ä¸ªlambdaè¡¨è¾¾å¼  auto greet = []() { std::cout \u0026lt;\u0026lt; \u0026#34;Hello, world!\u0026#34; \u0026lt;\u0026lt; std::endl; }; // ç›´æ¥è°ƒç”¨lambdaè¡¨è¾¾å¼  greet(); return 0; }   æ•è·åˆ—è¡¨æœ‰ä¸‰ç§å½¢å¼ï¼šå€¼æ•è·ã€å¼•ç”¨æ•è·å’Œéšå¼æ•è·ã€‚ç”¨äºæ•è·å¤–éƒ¨å˜é‡ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  #include \u0026lt;iostream\u0026gt; int main() { int a = 10; // å®šä¹‰ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œæ•è·å¤–éƒ¨å˜é‡açš„å€¼  // lambdaè¡¨è¾¾å¼åˆ›å»ºæ—¶å¤åˆ¶ä¸€ä»½å¤–éƒ¨å˜é‡çš„å€¼ï¼Œå¹¶åœ¨å‡½æ•°ä½“ä¸­ä½¿ç”¨  auto add = [a](int b) { return a + b; }; // è°ƒç”¨lambdaè¡¨è¾¾å¼  std::cout \u0026lt;\u0026lt; add(20) \u0026lt;\u0026lt; std::endl; // è¾“å‡º 30  return 0; }   ","date":"2023-05-04T00:00:00Z","permalink":"https://jhrsya.github.io/p/cpp/","title":"cpp_notes"},{"content":"go goä¸åŒç‚¹ï¼š\n goå¦‚æœå£°æ˜äº†å˜é‡ï¼Œé‚£ä¸€å®šè¦ä½¿ç”¨ï¼Œä¸ç„¶ä¼šæŠ¥é”™ goæ²¡æœ‰ i++ å’Œ i-- go æ²¡æœ‰è¿”å›å€¼ä¸ç”¨è®¾ç½®ä¸ºvoid ï¼Œç›´æ¥ä¸è®¾ç½®è¿”å›å€¼å°±å¯ä»¥ go é‡Œé¢åˆ‡ç‰‡ä¸èƒ½ä½¿ç”¨è´Ÿå€¼ï¼Œæ¯”å¦‚-1 goä¸­å˜é‡åå’Œå‡½æ•°è¿”å›å€¼éƒ½æ˜¯å†™åœ¨å˜é‡åå’Œå‡½æ•°è¿”å›å€¼çš„åé¢ goæ˜¯é¢å‘æ¥å£ç¼–ç¨‹ goä¸­çš„constå¯ä»¥å®šä¹‰æšä¸¾ç±»å‹ c++, javaæŠ›å¼‚å¸¸éƒ½æ˜¯ç”¨throw, go ç”¨panic, pythonç”¨raise  goæä¾›çš„æ•°æ®ç»“æ„ 1. æ•°ç»„ var arr [3]int\n2. åˆ‡ç‰‡(slice) åŠ¨æ€æ•°ç»„var arr []int\n3. æ˜ å°„ map: åº•å±‚ç”¨å“ˆå¸Œè¡¨å®ç° å£°æ˜å¹¶åˆå§‹åŒ–ï¼šm := map[string]int {\u0026quot;one\u0026quot;: 1, \u0026quot;two: 2} mapçš„æ‰“å°é¡ºåºæ˜¯æ— æ³•ç¡®å®šçš„ï¼Œæ˜¯éšæœºçš„ï¼Œæ˜¯ä¸€ç§æ— åºçš„é”®å€¼å¯¹é›†åˆã€‚ goä¸­æ²¡æœ‰æœ‰åºçš„é”®å€¼å¯¹é›†åˆï¼Œå¯ä»¥ä½¿ç”¨sliceå’Œstructå®ç°æœ‰åºçš„é”®å€¼å¯¹ç»“åˆã€‚\nå…³é”®å­— 1. make make æ˜¯ä¸€ä¸ªç”¨æ¥åˆ›å»ºæŸäº›ç±»å‹çš„å¼•ç”¨å¯¹è±¡çš„å†…å»ºå‡½æ•°ã€‚ å…·ä½“æ¥è¯´ï¼Œmake ç”¨äºåˆ›å»º sliceã€map å’Œ channel ç±»å‹çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºå€¼ç±»å‹çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ intã€float ç­‰ï¼‰ã€‚ makeåæ‰ä¼šåˆ†é…å†…å­˜ç©ºé—´ã€‚\ngoå¹¶å‘ 1. goå…³é”®å­— Go å…è®¸ä½¿ç”¨ go è¯­å¥å¼€å¯ä¸€ä¸ªæ–°çš„è¿è¡ŒæœŸçº¿ç¨‹ï¼Œ å³ goroutine(åç¨‹)ï¼Œä»¥ä¸€ä¸ªä¸åŒçš„ã€æ–°åˆ›å»ºçš„ goroutine æ¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚ åŒä¸€ä¸ªç¨‹åºä¸­çš„æ‰€æœ‰ goroutine å…±äº«åŒä¸€ä¸ªåœ°å€ç©ºé—´ã€‚\n2. channelå…³é”®å­— é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šé“æ˜¯ä¸å¸¦ç¼“å†²åŒºçš„ã€‚å‘é€ç«¯å‘é€æ•°æ®ï¼ŒåŒæ—¶å¿…é¡»æœ‰æ¥æ”¶ç«¯ç›¸åº”çš„æ¥æ”¶æ•°æ®ã€‚\nå¦‚æœé€šé“ä¸å¸¦ç¼“å†²ï¼Œå‘é€æ–¹ä¼šé˜»å¡ç›´åˆ°æ¥æ”¶æ–¹ä»é€šé“ä¸­æ¥æ”¶äº†å€¼ã€‚å¦‚æœé€šé“å¸¦ç¼“å†²ï¼Œå‘é€æ–¹åˆ™ä¼šé˜»å¡ç›´åˆ°å‘é€çš„å€¼è¢«æ‹·è´åˆ°ç¼“å†²åŒºå†…ï¼›å¦‚æœç¼“å†²åŒºå·²æ»¡ï¼Œåˆ™æ„å‘³ç€éœ€è¦ç­‰å¾…ç›´åˆ°æŸä¸ªæ¥æ”¶æ–¹è·å–åˆ°ä¸€ä¸ªå€¼ã€‚æ¥æ”¶æ–¹åœ¨æœ‰å€¼å¯ä»¥æ¥æ”¶ä¹‹å‰ä¼šä¸€ç›´é˜»å¡ã€‚\nå¸¦ç¼“å†²åŒºçš„é€šé“å…è®¸å‘é€ç«¯çš„æ•°æ®å‘é€å’Œæ¥æ”¶ç«¯çš„æ•°æ®è·å–å¤„äºå¼‚æ­¥çŠ¶æ€ï¼Œå°±æ˜¯è¯´å‘é€ç«¯å‘é€çš„æ•°æ®å¯ä»¥æ”¾åœ¨ç¼“å†²åŒºé‡Œé¢ï¼Œå¯ä»¥ç­‰å¾…æ¥æ”¶ç«¯å»è·å–æ•°æ®ï¼Œè€Œä¸æ˜¯ç«‹åˆ»éœ€è¦æ¥æ”¶ç«¯å»è·å–æ•°æ®ã€‚\næ€»ç»“ï¼šgoroutineä¹‹é—´çš„é€šä¿¡å¯ä»¥é€šè¿‡channelæ¥å®ç°ã€‚\ngoé¢å‘æ¥å£ç¼–ç¨‹ åœ¨ Go è¯­è¨€ä¸­ï¼Œå¦‚æœè¦ç»§æ‰¿ä¸€ä¸ªæ¥å£ï¼Œä½ åªéœ€è¦åœ¨ç»“æ„ä½“ä¸­å®ç°è¯¥æ¥å£å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ã€‚ è¿™ç§ä¾é å®ç°æ–¹æ³•åŒ¹é…åº¦çš„ç»§æ‰¿æ–¹å¼ï¼Œå°±æ˜¯é¸­å­ç±»å‹ï¼šå¦‚æœä¸€ä¸ªåŠ¨ç‰©çœ‹èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥ä¹Ÿåƒé¸­å­ï¼Œé‚£å®ƒä¸€å®šæ˜¯é¸­å­ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  // å®šä¹‰ Animal æ¥å£ interface Animal { Eat() // å£°æ˜ Eat æ–¹æ³•  Move() // å£°æ˜ Move æ–¹æ³• } // ==== å®šä¹‰ Dog Start ==== // å®šä¹‰ Dog ç±» type Dog struct { } // å®ç° Eat æ–¹æ³• func (d *Dog) Eat() { fmt.Printf(\u0026#34;Eating bones\u0026#34;) } // å®ç° Move æ–¹æ³• func (d *Dog) Move() { fmt.Printf(\u0026#34;Moving with four legs\u0026#34;) } // ==== å®šä¹‰ Dog End ====  // ==== å®šä¹‰ Human Start ==== // å®šä¹‰ Human ç±» type Human struct { } // å®ç° Eat æ–¹æ³• func (h *Human) Eat() { fmt.Printf(\u0026#34;Eating rice\u0026#34;) } // å®ç° Move æ–¹æ³• func (h *Human) Move() { fmt.Printf(\u0026#34;Moving with two legs\u0026#34;) } // ==== å®šä¹‰ Human End ====   goé”™è¯¯å¤„ç† Go è¯­è¨€è¦æ±‚å¼€å‘è€…è‡ªå·±ç®¡ç†é”™è¯¯ï¼Œä¹Ÿå°±æ˜¯åœ¨å‡½æ•°ä¸­çš„é”™è¯¯éœ€è¦æ˜¾å¼æŠ›å‡ºæ¥ï¼Œå¦åˆ™ Go ç¨‹åºä¸ä¼šåšä»»ä½•é”™è¯¯å¤„ç†ã€‚å› ä¸º Go æ²¡æœ‰ä¼ ç»Ÿç¼–ç¨‹è¯­è¨€çš„ try/catch é’ˆå¯¹é”™è¯¯å¤„ç†çš„è¯­æ³•ï¼Œæ‰€ä»¥åœ¨é”™è¯¯ç®¡ç†ä¸Šç¼ºå°‘çµæ´»åº¦ï¼Œå¯¼è‡´äº† â€œerr æ»¡å¤©é£â€ çš„å±€é¢ã€‚\ngoé”™è¯¯å¤„ç†çš„å¥½å¤„ï¼šç¬¬ä¸€ï¼Œå®ƒå¼ºåˆ¶è¦æ±‚ Go è¯­è¨€å¼€å‘è€…ä»ä»£ç å±‚é¢æ¥è§„èŒƒé”™è¯¯çš„ç®¡ç†æ–¹å¼ï¼Œè¿™é©±ä½¿å¼€å‘è€…å†™å‡ºæ›´å¥å£®çš„ä»£ç ï¼›ç¬¬äºŒï¼Œè¿™ç§æ˜¾å¼è¿”å›é”™è¯¯çš„æ–¹å¼é¿å…äº† â€œtry/catch ä¸€æŠŠæ¢­â€ï¼Œå› ä¸ºè¿™ç§ â€œä¸€æ—¶çˆ½â€ çš„åšæ³•å¾ˆå¯èƒ½å¯¼è‡´ Bug æ— æ³•å‡†ç¡®å®šä½ï¼Œä»è€Œäº§ç”Ÿå¾ˆå¤šä¸å¯é¢„æµ‹çš„é—®é¢˜ï¼›ç¬¬ä¸‰ï¼Œç”±äºæ²¡æœ‰ try/catch çš„æ‹¬å·æˆ–é¢å¤–çš„ä»£ç å—ï¼ŒGo ç¨‹åºä»£ç æ•´ä½“çœ‹èµ·æ¥æ›´æ¸…çˆ½ï¼Œå¯è¯»æ€§è¾ƒå¼ºã€‚\ngoåŒ¿åå‡½æ•° åœ¨Goè¯­è¨€ä¸­ï¼Œfunc(){}è¡¨ç¤ºä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ˆæ²¡æœ‰å‡½æ•°åï¼‰ï¼Œå®ƒå¯ä»¥ä½œä¸ºå€¼è¿›è¡Œä¼ é€’ï¼Œä¹Ÿå¯ä»¥è¢«ç›´æ¥è°ƒç”¨ã€‚\nå½“åœ¨func(){}åé¢æ·»åŠ ä¸€ä¸ªæ‹¬å·å¯¹()æ—¶ï¼Œå®ƒè¡¨ç¤ºç›´æ¥è°ƒç”¨è¿™ä¸ªåŒ¿åå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œfunc(){}()ä¸­ç¬¬äºŒä¸ªæ‹¬å·çš„å†…å®¹ä¸ºç©ºï¼Œè¡¨ç¤ºç›´æ¥è°ƒç”¨å‰é¢å®šä¹‰çš„åŒ¿åå‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›å€¼ï¼ˆå¦‚æœæœ‰ï¼‰ä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚\nç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  package main import \u0026#34;fmt\u0026#34; func main() { // å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°  greet := func() { fmt.Println(\u0026#34;Hello, world!\u0026#34;) } // ç›´æ¥è°ƒç”¨åŒ¿åå‡½æ•°  greet() }   func(x int){}(10)ç¬¬ä¸€ä¸ªæ‹¬å·ä¸­è¡¨ç¤ºå‡½æ•°çš„å½¢å‚ï¼Œç¬¬äºŒä¸ªæ‹¬å·æ˜¯å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å®å‚ã€‚\n","date":"2023-05-04T00:00:00Z","permalink":"https://jhrsya.github.io/p/go/","title":"go"},{"content":"pythonåº“ pydantic pydantic æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®éªŒè¯å’Œæ•°æ®åºåˆ—åŒ–çš„ Python åº“ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåŸºäºç±»å‹æ³¨é‡Šçš„æ•°æ®æ¨¡å‹å®šä¹‰æ–¹å¼ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…è½»æ¾åœ°å®šä¹‰å’ŒéªŒè¯æ•°æ®æ¨¡å‹ã€‚ä»¥ä¸‹æ˜¯ pydantic åº“çš„ä¸€äº›å¸¸ç”¨åŠŸèƒ½å’Œç”¨æ³•ç¤ºä¾‹ã€‚\n1. å®šä¹‰æ•°æ®æ¨¡å‹ ä½¿ç”¨ pydantic å®šä¹‰æ•°æ®æ¨¡å‹æ—¶ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿ pydantic.BaseModel ç±»å¹¶ä½¿ç”¨ç±»å‹æ³¨é‡Šæ¥å®šä¹‰ç±»çš„æˆå‘˜å˜é‡ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6  from pydantic import BaseModel class User(BaseModel): id: int name: str email: str   å®šä¹‰ä¸€ä¸ªå­—æ®µæ˜¯å­—å…¸çš„æ•°æ®ç»“æ„æ¨¡å‹ï¼Œå¦‚ä¸‹ï¼š\n1 2 3 4 5  {\u0026#39;type\u0026#39;: \u0026#39;survey\u0026#39;, \u0026#39;content\u0026#39;: {\u0026#39;abstract\u0026#39;: \u0026#39;\u0026#39;, \u0026#39;reason\u0026#39;: \u0026#39;\u0026#39;, \u0026#39;solution\u0026#39;: \u0026#39;\u0026#39;}} # å­—å…¸é‡Œé¢åµŒå¥—äº†å­—å…¸   å¯ä»¥æŠŠé‚£ä¸ªæ˜¯å­—å…¸çš„å­—æ®µå®šä¹‰ä¸ºä¸€ä¸ªBaseModelç±»å°±å¯ä»¥äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  # å®šä¹‰ä¸€ä¸ªcontent pydanticæ•°æ®ç»“æ„ class Content(BaseModel): abstract: str = Field(..., description=\u0026#34;abstract\u0026#34;) reason: str = Field(..., description=\u0026#34;reason\u0026#34;) solution: str = Field(..., description=\u0026#34;solution\u0026#34;) # summaryæ•°æ®ç»“æ„ class Summary(BaseModel): type: str = Field(..., description=\u0026#34;summary type\u0026#34;) content: Content = Field(..., description=\u0026#34;summary content\u0026#34;) # æ­¤æ—¶çš„Summaryç±»å°±æ˜¯æœ€ç»ˆæƒ³è¦çš„ç­”æ¡ˆ   2. éªŒè¯æ•°æ®æ¨¡å‹ ä½¿ç”¨ pydantic éªŒè¯æ•°æ®æ¨¡å‹æ—¶ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹å¹¶ä¼ å…¥è¦éªŒè¯çš„æ•°æ®æ¥éªŒè¯æ•°æ®æ¨¡å‹çš„æ­£ç¡®æ€§ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6  user_data = { \u0026#39;id\u0026#39;: \u0026#39;1\u0026#39;, # æ³¨æ„è¿™é‡Œå°† id èµ‹å€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œä¸ç¬¦åˆå®šä¹‰ \u0026#39;name\u0026#39;: \u0026#39;Alice\u0026#39;, \u0026#39;email\u0026#39;: \u0026#39;alice@example.com\u0026#39; } user = User(**user_data)   è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œuser_data æ˜¯ä¸€ä¸ªåŒ…å«ç”¨æˆ·æ•°æ®çš„å­—å…¸ï¼Œå…¶ä¸­ id é”®çš„å€¼ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚åœ¨åˆ›å»º User ç±»çš„å®ä¾‹æ—¶ï¼Œpydantic ä¼šæ ¹æ®å®šä¹‰çš„ç±»å‹æ³¨é‡Šå’Œä¼ å…¥çš„æ•°æ®å¯¹æ•°æ®æ¨¡å‹è¿›è¡ŒéªŒè¯ã€‚ç”±äº id çš„å®šä¹‰æ˜¯æ•´å‹ï¼Œè€Œå®é™…ä¼ å…¥çš„å€¼æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºä¸€ä¸ª ValueError å¼‚å¸¸ï¼Œæç¤º id çš„ç±»å‹ä¸æ­£ç¡®ã€‚\n3. åºåˆ—åŒ–æ•°æ®æ¨¡å‹ ä½¿ç”¨ pydantic åºåˆ—åŒ–æ•°æ®æ¨¡å‹æ—¶ï¼Œå¯ä»¥é€šè¿‡å°†ä¸€ä¸ªæ•°æ®æ¨¡å‹å¯¹è±¡è½¬æ¢ä¸ºå­—å…¸æˆ– JSON æ ¼å¼çš„å­—ç¬¦ä¸²æ¥å®ç°ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7  user = User(id=1, name=\u0026#39;Alice\u0026#39;, email=\u0026#39;alice@example.com\u0026#39;) # è½¬æ¢ä¸ºå­—å…¸ user_dict = user.dict() # è½¬æ¢ä¸º JSON å­—ç¬¦ä¸² user_json = user.json()   4. padanticçš„validator pydantic åº“ä¸­çš„ validator æ˜¯ç”¨äºå®šä¹‰æ•°æ®æ¨¡å‹çš„éªŒè¯è§„åˆ™çš„è£…é¥°å™¨ã€‚é€šè¿‡ validator è£…é¥°å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®æ¨¡å‹å®šä¹‰ä¸­ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜å˜é‡æ·»åŠ è‡ªå®šä¹‰çš„éªŒè¯å‡½æ•°ï¼Œæ¥éªŒè¯è¿™äº›æˆå‘˜å˜é‡çš„å–å€¼æ˜¯å¦åˆæ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ª validator è£…é¥°å™¨çš„ä½¿ç”¨ç¤ºä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11  from pydantic import BaseModel, validator class Person(BaseModel): name: str age: int @validator(\u0026#39;age\u0026#39;) def check_age(cls, value): if value \u0026lt; 0: raise ValueError(\u0026#39;Age must be non-negative\u0026#39;) return value   åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒPerson ç±»å®šä¹‰äº†ä¸¤ä¸ªæˆå‘˜å˜é‡ name å’Œ ageï¼Œåˆ†åˆ«ä¸ºå­—ç¬¦ä¸²ç±»å‹å’Œæ•´å‹ã€‚ä½¿ç”¨ @validator(\u0026lsquo;age\u0026rsquo;) è£…é¥°å™¨ä¸º age æˆå‘˜å˜é‡æ·»åŠ äº†ä¸€ä¸ªåä¸º check_age çš„éªŒè¯å‡½æ•°ã€‚check_age å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° valueï¼Œè¡¨ç¤ºè¦éªŒè¯çš„å€¼ã€‚å¦‚æœè¿™ä¸ªå€¼å°äº 0ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª ValueError å¼‚å¸¸ï¼Œæç¤ºå¹´é¾„å¿…é¡»ä¸ºéè´Ÿæ•°ã€‚å¦åˆ™ï¼Œè¿”å›åŸå§‹å€¼ã€‚\nä½¿ç”¨ validator è£…é¥°å™¨æ—¶ï¼Œéœ€è¦æŒ‡å®šè¦éªŒè¯çš„æˆå‘˜å˜é‡åã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŒ‡å®šè¦éªŒè¯å¤šä¸ªæˆå‘˜å˜é‡ï¼š\n1 2 3 4 5  @validator(\u0026#39;name\u0026#39;, \u0026#39;age\u0026#39;) def check_person(cls, values): name, age = values # è¿›è¡ŒéªŒè¯é€»è¾‘ return values   åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œcheck_person å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° valuesï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†è¦éªŒè¯çš„æ‰€æœ‰æˆå‘˜å˜é‡çš„é”®å€¼å¯¹ã€‚å¯ä»¥é€šè¿‡è§£åŒ…å­—å…¸çš„æ–¹å¼æ¥è·å–æ¯ä¸ªæˆå‘˜å˜é‡çš„å€¼ï¼Œå¹¶è¿›è¡ŒéªŒè¯ã€‚\nvalidator è£…é¥°å™¨è¿˜æ”¯æŒåœ¨æ•´ä¸ªæ•°æ®æ¨¡å‹ä¸Šè¿›è¡ŒéªŒè¯ï¼Œè€Œä¸ä»…é™äºå•ä¸ªæˆå‘˜å˜é‡ã€‚å¯ä»¥é€šè¿‡åœ¨ç±»å®šä¹‰ä¸Šä½¿ç”¨ @root_validator è£…é¥°å™¨æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12  class Person(BaseModel): name: str age: int @root_validator def check_person(cls, values): name, age = values.get(\u0026#39;name\u0026#39;), values.get(\u0026#39;age\u0026#39;) if age \u0026lt; 0: raise ValueError(\u0026#39;Age must be non-negative\u0026#39;) if not name: raise ValueError(\u0026#39;Name must not be empty\u0026#39;) return values   åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ@root_validator è£…é¥°å™¨ç”¨äºä¸ºæ•´ä¸ªæ•°æ®æ¨¡å‹æ·»åŠ ä¸€ä¸ªéªŒè¯å‡½æ•°ã€‚check_person å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° valuesï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†æ‰€æœ‰æˆå‘˜å˜é‡çš„é”®å€¼å¯¹ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œcheck_person å‡½æ•°å¯¹ name å’Œ age è¿›è¡Œäº†éªŒè¯ï¼Œå¦‚æœå‘ç°ä¸åˆæ³•çš„å€¼ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª ValueError å¼‚å¸¸ã€‚å¦åˆ™ï¼Œè¿”å›åŸå§‹çš„å­—å…¸ã€‚\nvalidatorè£…é¥°å™¨è¿˜æœ‰éå¸¸é‡è¦çš„ä½œç”¨æ˜¯å¯ä»¥æŠŠå‚æ•°åšä¸€ä¸ªè½¬æ¢ï¼Œæ¯”å¦‚é’±åŒ…åœ°å€ï¼Œå¯ä»¥æŠŠé’±åŒ…åœ°å€è‡ªåŠ¨è½¬ä¸ºå°å†™çš„ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  from fastapi import FastAPI from pydantic import BaseModel, validator app = FastAPI() class Wallet(BaseModel): wallet_address: str @validator(\u0026#39;wallet_address\u0026#39;, pre=True) def convert_to_lowercase(cls, wallet_address: str) -\u0026gt; str: # è¿™é‡Œä¼šè‡ªåŠ¨æŠŠé’±åŒ…åœ°å€è½¬æ¢ä¸ºå°å†™ return wallet_address.lower() @app.post(\u0026#34;/wallet\u0026#34;) async def create_wallet(wallet: Wallet): return {\u0026#34;wallet_address\u0026#34;: wallet.wallet_address}   fastapi è®¾ç½®è¯·æ±‚å¤´ä¸­çš„key-valueæ—¶ï¼Œè¦ä¿è¯keyçš„åˆæ³•æ€§ï¼Œä¸åˆæ³•ä¼šå‡ºç°422 Unprocessable Entityã€‚\nå­¦ä¹ çŸ¥è¯†ç‚¹ï¼šä¾èµ–æ³¨å…¥, Path, Query, Header, Body\npeeweeåº“ æ‹¿åˆ°æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨çš„æ•°æ®çš„æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  from peewee import * # è¿™ä¸ªdbå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹åˆå§‹åŒ–å¥½ db = SqliteDatabase(\u0026#39;people.db\u0026#39;) class Person(Model): name = CharField() birthday = DateField() class Meta: database = db # This model uses the \u0026#34;people.db\u0026#34; database. # ä½¿ç”¨å¤–éƒ¨çš„é”®å€¼å…³ç³», ownerä¸æ˜¯people.dbä¸­çš„ class Pet(Model): owner = ForeignKeyField(Person, backref=\u0026#39;pets\u0026#39;) name = CharField() animal_type = CharField() class Meta: database = db # this model uses the \u0026#34;people.db\u0026#34; database   1. å­˜å‚¨æ•°æ® 1 2 3 4 5 6 7 8 9  from datetime import date uncle_bob = Person(name=\u0026#39;Bob\u0026#39;, birthday=date(1960, 1, 15)) uncle_bob.save() # bob is now stored in the database # ä¹Ÿå¯ä»¥ä½¿ç”¨createåˆ›å»ºå®ä¾‹ grandma = Person.create(name=\u0026#39;Grandma\u0026#39;, birthday=date(1935, 3, 1)) herb = Person.create(name=\u0026#39;Herb\u0026#39;, birthday=date(1950, 5, 5))   2. æ£€ç´¢æ•°æ®åº“ 1. è·å–å•ä¸ªè®°å½• 1 2 3 4  grandma = Person.select().where(Person.name == \u0026#39;Grandma L.\u0026#39;).get() # ä¸Šé¢çš„ä»£ç ç­‰ä»·äº grandma = Person.get(Person.name == \u0026#39;Grandma L.\u0026#39;)   ","date":"2023-05-04T00:00:00Z","permalink":"https://jhrsya.github.io/p/python/","title":"pythonåº“ä»‹ç»"},{"content":"åŒºå—é“¾æ¦‚å¿µ äº¤æ˜“å“ˆå¸Œ åœ¨åŒºå—é“¾ä¸­ï¼Œäº¤æ˜“å“ˆå¸Œï¼ˆTransaction Hashï¼‰æ˜¯å¯¹ä¸€ç¬”äº¤æ˜“è¿›è¡Œå“ˆå¸Œè®¡ç®—å¾—åˆ°çš„ç»“æœã€‚äº¤æ˜“å“ˆå¸Œæ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª64ä¸ªå­—ç¬¦çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚64 * 4 = 256 bitã€‚\näº¤æ˜“å“ˆå¸Œæ˜¯åŒºå—é“¾ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå› ä¸ºå®ƒå¯ä»¥å”¯ä¸€åœ°æ ‡è¯†ä¸€ç¬”äº¤æ˜“ã€‚åœ¨åŒºå—é“¾ä¸­ï¼Œæ¯ä¸ªäº¤æ˜“éƒ½ä¼šè¢«å¹¿æ’­åˆ°ç½‘ç»œä¸­ï¼Œç„¶åç”±çŸ¿å·¥è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶æœ€ç»ˆè¢«åŠ å…¥åˆ°åŒºå—é“¾ä¸Šã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œäº¤æ˜“å“ˆå¸Œèµ·åˆ°äº†å…³é”®çš„ä½œç”¨ã€‚\næ¯ä¸ªåŒºå—é“¾èŠ‚ç‚¹éƒ½å¯ä»¥é€šè¿‡äº¤æ˜“å“ˆå¸Œæ¥éªŒè¯ä¸€ç¬”äº¤æ˜“çš„åˆæ³•æ€§ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹æ¥æ”¶åˆ°ä¸€ä¸ªæ–°çš„äº¤æ˜“æ—¶ï¼Œå®ƒä¼šé¦–å…ˆå¯¹è¿™ä¸ªäº¤æ˜“è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œç„¶åå°†è®¡ç®—å‡ºçš„å“ˆå¸Œå€¼ä¸å·²æœ‰çš„äº¤æ˜“å“ˆå¸Œè¿›è¡Œæ¯”å¯¹ï¼Œæ¥åˆ¤æ–­è¿™ç¬”äº¤æ˜“æ˜¯å¦å·²ç»å­˜åœ¨äºåŒºå—é“¾ä¸Šã€‚\näº¤æ˜“å“ˆå¸Œè¿˜å¯ä»¥ç”¨æ¥è¿½è¸ªä¸€ç¬”äº¤æ˜“çš„çŠ¶æ€ã€‚åœ¨åŒºå—é“¾ä¸Šï¼Œæ¯ä¸€ç¬”äº¤æ˜“éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„äº¤æ˜“å“ˆå¸Œï¼Œå¹¶ä¸”äº¤æ˜“å“ˆå¸Œä¼šè¢«å†™å…¥åˆ°åŒºå—é“¾ä¸Šã€‚å½“ä¸€ç¬”äº¤æ˜“è¢«ç¡®è®¤å¹¶åŠ å…¥åˆ°åŒºå—é“¾ä¸Šæ—¶ï¼Œå®ƒçš„äº¤æ˜“å“ˆå¸Œä¹Ÿä¼šè¢«å†™å…¥åˆ°åŒºå—é“¾ä¸­ï¼Œå¹¶ä¸”æˆä¸ºåŒºå—é“¾ä¸­çš„ä¸€éƒ¨åˆ†ã€‚è¿™æ ·ï¼Œä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡äº¤æ˜“å“ˆå¸Œæ¥æŸ¥çœ‹ä¸€ç¬”äº¤æ˜“çš„çŠ¶æ€ï¼Œå¹¶ä¸”ç¡®è®¤è¿™ç¬”äº¤æ˜“æ˜¯å¦å·²ç»è¢«ç¡®è®¤å¹¶å†™å…¥åˆ°åŒºå—é“¾ä¸Šã€‚\nå‘é€æ–¹åœ°å€å’Œæ¥æ”¶æ–¹åœ°å€ åœ¨åŒºå—é“¾ä¸­ï¼Œå‘é€æ–¹åœ°å€æ˜¯ç”±å…¬é’¥ç»è¿‡å“ˆå¸Œè¿ç®—å¾—åˆ°çš„ã€‚å…·ä½“æ¥è¯´ï¼Œå‘é€æ–¹ä¼šä½¿ç”¨è‡ªå·±çš„ç§é’¥å¯¹äº¤æ˜“ä¿¡æ¯è¿›è¡Œæ•°å­—ç­¾åï¼Œå¹¶å°†ç­¾åå’Œå…¬é’¥ä¸€èµ·å‘é€ç»™ç½‘ç»œã€‚æ¥æ”¶æ–¹å¯ä»¥ä½¿ç”¨å…¬é’¥æ¥éªŒè¯æ•°å­—ç­¾åçš„æœ‰æ•ˆæ€§ï¼Œå¹¶ç¡®è®¤è¿™ç¬”äº¤æ˜“ç¡®å®æ˜¯ç”±å‘é€æ–¹å‘èµ·çš„ã€‚å‘é€æ–¹åœ°å€å°±æ˜¯é€šè¿‡å¯¹å…¬é’¥è¿›è¡Œå“ˆå¸Œè¿ç®—å¾—åˆ°çš„ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ ‡è¯†å‘é€æ–¹ã€‚\nå’Œäº¤æ˜“å“ˆå¸Œä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª64ä¸ªå­—ç¬¦çš„åå…­è¿›åˆ¶ä¸²ï¼Œå…±256bitã€‚\né›¶çŸ¥è¯†è¯æ˜ é›¶çŸ¥è¯†è¯æ˜æ˜¯åœ¨ä¸æŠ«éœ²å£°æ˜æœ¬èº«çš„æƒ…å†µä¸‹ï¼ŒéªŒè¯å£°æ˜æœ‰æ•ˆæ€§çš„ä¸€ç§æ–¹æ³•ã€‚ è¯æ˜è€…æ˜¯è¯•å›¾è¯æ˜å£°æ˜çš„ä¸€æ–¹ï¼Œè€ŒéªŒè¯è€…è´Ÿè´£éªŒè¯å£°æ˜ã€‚\né›¶çŸ¥è¯†è¯æ˜æ¥ä¿æŠ¤æ•°å­—ç‰ˆæƒï¼š\n éŸ³ä¹å®¶åˆ›å»ºä¸€ä¸ªæ•°å­—ç­¾åï¼Œå°†å…¶ä½œä¸ºè¯æ˜ã€‚ éŸ³ä¹å®¶ä½¿ç”¨ç¦»æ•£å¯¹æ•°ç®—æ³•ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œå°†å…¶ä½œä¸ºæŒ‘æˆ˜ã€‚ éŸ³ä¹å®¶ä½¿ç”¨éšæœºæ•°å’Œç­¾åè®¡ç®—å‡ºå“åº”ï¼Œå“åº”æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚ éŸ³ä¹å®¶å°†ç­¾åã€æŒ‘æˆ˜å’Œå“åº”å‘é€ç»™éªŒè¯è€…ã€‚ éªŒè¯è€…ä½¿ç”¨å…¬é’¥å’ŒæŒ‘æˆ˜è®¡ç®—å‡ºå“åº”çš„æœŸæœ›å€¼ï¼Œå¹¶æ¯”è¾ƒæœŸæœ›å€¼å’Œå®é™…å“åº”æ˜¯å¦ä¸€è‡´ã€‚å¦‚æœä¸€è‡´ï¼Œå°±è®¤ä¸ºç­¾åæœ‰æ•ˆï¼Œå¦åˆ™è®¤ä¸ºç­¾åæ— æ•ˆã€‚  å¥³å·«æ”»å‡» å¥³å·«æ”»å‡»æ˜¯æŒ‡ä¸€ä¸ªç”¨æˆ·æˆ–ä¸€ä¸ªç”¨æˆ·ç¾¤ä½“å‡è£…æˆè®¸å¤šç”¨æˆ·ã€‚\nå…±è¯†æœºåˆ¶ å…±è¯†æœºåˆ¶åˆ†ä¸ºå·¥ä½œé‡è¯æ˜å’Œæƒç›Šè¯æ˜ã€‚\næŒ–çŸ¿ å‘åŒºå—é“¾ä¸­æ·»åŠ ç°æœ‰åŒºå—ã€‚\nå·¥ä½œé‡è¯æ˜(PoW) proof of work. å·¥ä½œé‡è¯æ˜æ˜¯ä¸€ç§åŸºç¡€æ€§ç®—æ³•ï¼Œå®ƒä¸ºçŸ¿å·¥åœ¨å·¥ä½œé‡è¯æ˜åŒºå—é“¾ä¸Šçš„å·¥ä½œè®¾ç½®éš¾åº¦å’Œè§„åˆ™ã€‚\næƒç›Šè¯æ˜ åœ¨æƒç›Šè¯æ˜æœºåˆ¶ä¸‹ï¼ŒéªŒè¯è€…æ˜ç¡®çš„é€šè¿‡ä»¥å¤ªå¸å°†èµ„æœ¬è´¨æŠ¼åˆ°ä»¥å¤ªå¸çš„æ™ºèƒ½åˆçº¦ä¸­ã€‚è¿™äº›è´¨æŠ¼çš„ä»¥å¤ªå¸å……å½“æŠµæŠ¼å“ï¼Œå¦‚æœéªŒè¯è€…æœ‰å¤±ä¿¡è¡Œä¸ºæˆ–æ¶ˆææ€ å·¥ï¼Œé‚£ä¹ˆå¯ä»¥é”€æ¯æŠµæŠ¼å“ã€‚\næ™ºèƒ½åˆçº¦ GASPER Gasperæ˜¯ä¸€ç§å®šä¹‰éªŒè¯è€…å¦‚ä½•å—åˆ°å¥–æƒ©çš„æœºåˆ¶ï¼Œå†³å®šè¦æ¥å—å’Œæ‹’ç»å“ªä¸ªåŒºå—ï¼Œä»¥åŠå°†åŒºå—å»ºåœ¨å“ªä¸ªåŒºå—é“¾åˆ†å‰ä¸Šã€‚\nERC20 ERC20æ˜¯ä»¥å¤ªåŠï¼ˆEthereumï¼‰ä¸Šçš„ä¸€ç§æ™ºèƒ½åˆçº¦æ ‡å‡†ï¼Œå®ƒè§„å®šäº†ä»£å¸åˆçº¦å¿…é¡»å®ç°çš„ä¸€ç»„å‡½æ•°æ¥å£ã€‚è¿™äº›æ¥å£åŒ…æ‹¬ä»£å¸æ€»é‡ã€è½¬è´¦åŠŸèƒ½ã€ä½™é¢æŸ¥è¯¢ç­‰ã€‚ä½¿ç”¨è¿™äº›æ ‡å‡†åŒ–æ¥å£å¯ä»¥ç¡®ä¿ä»£å¸åˆçº¦ä¹‹é—´çš„äº’æ“ä½œæ€§ï¼Œä½¿å¾—ä¸åŒçš„ä»£å¸åˆçº¦å¯ä»¥åœ¨ä»¥å¤ªåŠä¸Šæ— ç¼åœ°äº¤äº’ã€‚\nERC20æ ‡å‡†çš„å®ç°éå¸¸ç®€å•ï¼Œå› æ­¤æˆä¸ºå¤§é‡ä»£å¸åˆçº¦å®ç°çš„é¦–é€‰æ ‡å‡†ã€‚ç›®å‰å¸‚åœºä¸Šç»å¤§å¤šæ•°çš„ä»£å¸åˆçº¦éƒ½æ˜¯åŸºäºERC20æ ‡å‡†å®ç°çš„ã€‚ä½¿ç”¨ERC20æ ‡å‡†å¯ä»¥æ–¹ä¾¿é’±åŒ…ã€äº¤æ˜“æ‰€ç­‰æœåŠ¡å¯¹ä»£å¸è¿›è¡Œæ”¯æŒï¼Œä¹Ÿå¯ä»¥é™ä½å¼€å‘è€…çš„å¼€å‘éš¾åº¦å’Œæˆæœ¬ã€‚\n","date":"2023-04-23T00:00:00Z","permalink":"https://jhrsya.github.io/p/%E5%8C%BA%E5%9D%97%E9%93%BE/","title":"åŒºå—é“¾æ¦‚å¿µ"},{"content":"åœ¨linuxæœåŠ¡å™¨ä¸Šä½¿ç”¨hugoç”Ÿæˆé™æ€ç½‘ç«™  å®‰è£…hugo apt-get install hugo åˆ›å»ºæ–°ç«™ç‚¹ hugo new site \u0026lt;site-name\u0026gt; ä¸‹è½½ç«™ç‚¹ä¸»é¢˜ ç½‘ç«™ ä»¥ä¸»é¢˜stackä¸ºä¾‹ é“¾æ¥ å¯ä»¥é€šè¿‡ä¸‹è½½quickstartæ¥å®ç°å¿«é€Ÿé…ç½® ä¸‹è½½ä¸‹æ¥åï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨hugo server -Dæ¥æŸ¥çœ‹æ•ˆæœã€‚ è¦åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œå¿…é¡»è¦ä½¿ç”¨ssh -L 1313:localhost:1313 \u0026lt;username\u0026gt;@\u0026lt;server-ip\u0026gt;æ¥å»ºç«‹ä¸€ä¸ªé€šé“ï¼Œæ­¤æ—¶å¯ä»¥æ‰“å¼€localhost:1313æŸ¥çœ‹ç½‘ç«™demoã€‚  ","date":"2022-03-06T00:00:00Z","image":"https://jhrsya.github.io/p/hugo/cover_hud7e36f7e20e71be184458283bdae4646_55974_120x120_fill_q75_box_smart1.jpg","permalink":"https://jhrsya.github.io/p/hugo/","title":"hugo-starter ç”Ÿæˆé™æ€é¡µé¢"}]